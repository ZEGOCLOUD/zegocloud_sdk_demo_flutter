!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n,r=t();for(n in r)("object"==typeof exports?exports:e)[n]=r[n]}}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){var o;return(t[r]||(o=t[r]={i:r,l:!1,exports:{}},e[r].call(o.exports,o,o.exports,n),o.l=!0,o)).exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=32)}([function(e,t,n){"use strict";n(12);var r=n(13),o=(n.d(t,"j",(function(){return r.a})),n.d(t,"o",(function(){return r.b})),n(14)),i=(n.d(t,"n",(function(){return o.a})),n(15)),s=(n.d(t,"d",(function(){return i.a})),n(16)),a=(n.d(t,"e",(function(){return s.a})),n(17)),c=(n.d(t,"g",(function(){return a.a})),n.d(t,"h",(function(){return a.b})),n.d(t,"i",(function(){return a.c})),n.d(t,"l",(function(){return a.d})),n.d(t,"m",(function(){return a.e})),n(18),n(19));n.d(t,"a",(function(){return c.a})),n.d(t,"b",(function(){return c.b})),n.d(t,"c",(function(){return c.c})),n.d(t,"f",(function(){return c.d})),n.d(t,"k",(function(){return c.e}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"h",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return i}));var r,o,i,s={DISPATCH_RESULT_UPDATE:"dispatchResultUpdate",DISCONNECTED:"disconnected",CONNECTED:"connected",BROKEN:"broken"},a=15e3,c="wss://accesshub-wss.zego.im/accesshub",u=37,l="accesshubDispatchServers";(n=r=r||{})[n.BROWSER=0]="BROWSER",n[n.WEIXINMINI=1]="WEIXINMINI",(t=o=o||{}).LOGIN="/v1/sdk/login",t.GET_GAME_LIST="/v1/sdk/mg_list",t.GET_GAME_INFO="/v1/sdk/mg_info",t.CREATE_GAME="/v1/sdk/create_game",t.CLOSE_GAME="/v1/sdk/close_game",t.HEARTBEAT="/v1/sdk/heartbeat",t.START_GAME="/v1/sdk/start_game",t.REFRESH_TOKEN="/v1/sdk/refresh_token",t.START_CLOUD_GAME="/v1/sdk/cloudgame/start_game",t.STOP_CLOUD_GAME="/v1/sdk/cloudgame/stop_game",t.START_PUBLISH_STREAM="/v1/sdk/cloudgame/start_publish_stream",t.STOP_PUBLISH_STREAM="/v1/sdk/cloudgame/stop_publish_stream",(n=i=i||{}).Init="init",n.UnInit="unInit",n.GetGameList="getGameList",n.GetGameInfo="getGameInfo",n.CreateGameRoom="createGameRoom",n.CloseGameRoom="closeGameRoom",n.LoadGame="loadGame",n.LoadingTime="loadingTime",n.LoadedTime="loadedTime",n.UnloadGame="unloadGame",n.GetGameParams="getGameParams",n.SetGameParams="setGameParams",n.GetGameComponentList="getGameComponentList",n.SetGameComponent="setGameComponent",n.GetGameFunctionList="getGameFunctionList",n.RunGameFunction="runGameFunction",n.GameError="gameError",n.GameDestroy="gameDestroy",n.ButtonEvent="buttonEvent",n.PlayerState="playerState",n.GameState="gameState",n.UpdateCode="updateCode",n.UpdateToken="updateToken",n.RefreshCoin="refreshCoin",n.ToGameInfo="toGameInfo",n.FromGameInfo="fromGameInfo",n.On="on",n.Off="off",n.Visibilitychange="visibilitychange",n.startGame="startGame",n.InitCloudGame="initCloudGame",n.StartCloudGame="startCloudGame",n.StopCloudGame="stopCloudGame",n.SetStreamProfile="setStreamProfile",n.SetPlayVolume="setPlayVolume",n.GetPlayVolume="getPlayVolume",n.SendKeyboardEvent="sendKeyboardEvent",n.CloudGameFirstFrame="cloudGameFirstFrame"},function(e,t,n){"use strict";var r=n(20),o=(n.d(t,"d",(function(){return r.a})),n.d(t,"f",(function(){return r.b})),n(21)),i=(n.d(t,"c",(function(){return o.a})),n.d(t,"e",(function(){return o.b})),n(22)),s=(n.d(t,"g",(function(){return i.a})),n(23)),a=(n.d(t,"b",(function(){return s.a})),n(24));n.d(t,"a",(function(){return a.a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(25),o=n(6),i=(t=n(2),s.getDeviceId=function(){var e=localStorage.getItem("device");return e||(e="device-web-".concat(String((new Date).getTime()).substr(1)),localStorage.setItem("device",e)),e},s.createTracer=function(e,t,n,r){var o=this;this.init(t,n,r),e.getDomain().then((function(e){var n;null!=(n=o.tracer)&&n.setConfig({serverUrl:"wss://weblogger".concat(t,"-api.").concat(e,"/zglog/tlog")})}))},s.init=function(e,t,n){var i=this;this.tracer||(this.tracer=new r.ZegoTracer,this.tracer.init({product:this.PRODUCT,version:o.a.getVersion(),appID:e,deviceID:this.getDeviceId(),env:0,importantLevel:0,levels:[0,10,30,50,80],spanStart:function(e){},spanBeforeEnd:function(e){var t={},n={};Object.keys(e.attributes).forEach((function(r){-1!==i.stringifyWhitelist.indexOf(r)?t[r]=e.attributes[r]:n[r]=e.attributes[r]})),t.detail=JSON.stringify(n),e.attributes=t},spanEnd:function(e){},resources:{product:this.PRODUCT,version:o.a.getVersion(),system:this.systemInfo.system,browser:this.systemInfo.browser,user_agent:this.systemInfo.ua,device_id:this.getDeviceId(),platform:"W",appid:+e,app_id:+e,user_id:n,report_version:3}}),(e=new Map).set("userID",n),e.set("token",t),this.tracer.startReport(e))},s.unInit=function(){this.tracer=null},s.createSpan=function(e,t){return this.tracer.createSpan(0,e,{kind:2,attributes:t})},s.PRODUCT="zegominigame",s.systemInfo=(new t.b).getInfo(),s.domain="imzego.com",s.stringifyWhitelist=["e_time_s","error","elapsed_time","game_id","room_id"],s);function s(){}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));t=n(0);var r=(o.language=t.n.zh_CN,o);function o(){}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),o=n(1),i=n(3),s=n(2),a=n(28),c=(u.initGame=function(e,t,n,r){var o=document.querySelector(e);e=new a.a(e,t,n,r,o.offsetWidth,o.offsetHeight),u.gameInsMap.set(r.miniGameId,e),u.currentGameId=r.miniGameId,t=r.mgUrl;return t+=-1!==t.indexOf("?")?"&zego_platform=web":"?zego_platform=web",o.src=t,o.removeEventListener("visibilitychange",this.visibilitychange),{dom:o,width:o.offsetWidth,height:o.offsetHeight,url:t}},u.unInitGame=function(){var e=document.querySelector(this.getCurrentGame().domId);e.src="",u.currentGameId="",e.removeEventListener("visibilitychange",this.visibilitychange)},u.getCurrentGame=function(){if(u.currentGameId&&u.gameInsMap.has(u.currentGameId))return u.gameInsMap.get(u.currentGameId);throw new Error(JSON.stringify(Object(s.g)(r.d.ErrorGameIsNotRunning)))},u.visibilitychange=function(e){e=e.currentTarget,i.a.createSpan(o.g.Visibilitychange,{game_id:this.currentGameId,hidden:e.hidden}).end(!0)},u.gameInsMap=new Map,u);function u(){}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),o=n(4),i=n(1),s=n(26),a=n(29),c=n(3),u=n(30),l=n(31),h=n(5),p=n(2),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},d=(_.getVersion=function(){return"1.2.2"},_.prototype.registerInnerEvent=function(){this.eventBus.add(r.f.Init,this.onGameInit.bind(this)),this.eventBus.add(r.f.GameOverDetail,this.onGameOverDetail.bind(this)),this.eventBus.add(r.f.GameLoading,this.onGameLoadStateUpdate.bind(this)),this.eventBus.add(r.f.GameLoaded,this.onGameLoadStateUpdate.bind(this)),this.eventBus.add(r.f.ActionEvents,this.onActionEvents.bind(this)),this.eventBus.add(r.f.UserMicChange,this.onUserMicChange.bind(this)),this.eventBus.add(r.f.UserSpeakerChange,this.onUserSpeakerChange.bind(this)),this.eventBus.add(r.k.Destroy,this.onGameDestroy.bind(this)),this.eventBus.add(r.k.GameOrientation,this.onGameOrientationUpdate.bind(this)),this.eventBus.add(r.k.GameRecharge,this.onGameRechargeUpdate.bind(this)),this.eventBus.add(r.k.GameIntroduction,this.onGameIntroductionUpdate.bind(this)),this.eventBus.add(r.k.GetConfig,this.onGetConfig.bind(this)),this.eventBus.add(r.k.PlayerPlaying,this.onPlayerPlayingChanged.bind(this)),this.eventBus.add(r.k.GameState,this.onGameStateUpdate.bind(this)),this.eventBus.add(r.k.GameUploadError,this.onGameUploadError.bind(this)),this.eventBus.add(r.k.PlayGameSound,this.onPlayGameSound.bind(this)),this.eventBus.add(r.k.ChangeGameSoundVolume,this.onChangeGameSoundVolume.bind(this)),this.eventBus.add(r.k.GetRobotSetting,this.onGetRobotSetting.bind(this)),this.eventBus.add(r.a.CloudGameFirstFrame,this.onCloudGameFirstFrame.bind(this))},_.prototype.onGameInit=function(e){var t=h.a.getCurrentGame();t.version=e.version,this.startHeartbeat(o.a.heartbeatInterval,t.gameInfo.miniGameId,e.version)},_.prototype.onGameLoadStateUpdate=function(e,t){var n=h.a.getCurrentGame();if(console.log("===onGameLoadStateUpdate data",e),t.command!==r.f.GameLoading){if(0!==n.loadedTime)return;n.loadedTime=Date.now()}c.a.createSpan(t.command===r.f.GameLoading?i.g.LoadingTime:i.g.LoadedTime,{game_id:n.gameInfo.miniGameId,room_id:n.config.roomId,error:r.d.Success,elapsed_time:Date.now()-n.startTime}).end(!0),n=t.command===r.f.GameLoading?r.g.Loading:r.g.Loaded,this.eventBus.emit(r.e.GameLoadStateUpdate,{state:n,data:e})},_.prototype.onGameOverDetail=function(e){this.eventBus.emit(r.e.GameResult,f({},e))},_.prototype.onActionEvents=function(e){var t=h.a.getCurrentGame();c.a.createSpan(i.g.ButtonEvent,{game_id:t.gameInfo.miniGameId,room_id:t.config.roomId,button_id:e.eventType,data:e.data}).end(!0),this.eventBus.emit(r.e.ActionEventUpdate,{eventType:e.eventType,data:e.data})},_.prototype.onUserMicChange=function(e){this.eventBus.emit(r.e.MicStateChange,{mute:!!e.isMute})},_.prototype.onUserSpeakerChange=function(e){this.eventBus.emit(r.e.MicStateChange,{mute:!!e.isMute,userIdList:e.userIDList})},_.prototype.onGameDestroy=function(){var e=h.a.getCurrentGame(),t=c.a.createSpan(i.g.GameDestroy,{game_id:e.gameInfo.miniGameId,room_id:e.config.roomId});h.a.unInitGame(),this.stopHeartbeat(),this.eventBus.emit(r.e.Unloaded,{miniGameId:e.gameInfo.miniGameId}),t.end(!0)},_.prototype.onGameOrientationUpdate=function(e,t){this.gameConnect.request({command:r.k.GameOrientation,data:{code:r.d.Success},seq:t.seq,gameCallback:!0})},_.prototype.onGameRechargeUpdate=function(e,t){var n=h.a.getCurrentGame();this.gameConnect.request({command:r.k.GameRecharge,data:{code:r.d.Success},seq:t.seq,gameCallback:!0}),this.eventBus.emit(r.e.ChargeRequire,{miniGameId:n.gameInfo.miniGameId})},_.prototype.onGameIntroductionUpdate=function(e,t){this.gameConnect.request({command:r.k.GameIntroduction,data:{code:r.d.Success},seq:t.seq,gameCallback:!0})},_.prototype.onGetConfig=function(e,t){var n=h.a.getCurrentGame();console.warn("onGetConfig",n.config),this.gameConnect.request({command:r.k.GetConfig,data:{code:o.a.userCode,roomID:n.config.roomId,appID:o.a.appId,role:r.o.Audience,language:o.a.language,userID:o.a.gameUserInfo.userId,customPlaySound:n.config.customPlaySound,gameMode:n.gameMode,gameConfig:f({},n.config),container:{gameOrientation:n.gameInfo.gameOrientation,width:n.webViewWidth,height:n.webViewHeight}},seq:t.seq,gameCallback:!0})},_.prototype.onPlayerPlayingChanged=function(e){var t=h.a.getCurrentGame();c.a.createSpan(i.g.PlayerState,{game_id:t.gameInfo.miniGameId,room_id:t.config.roomId,is_play:e.isPlaying}).end(!0),this.eventBus.emit(r.e.PlayerStateUpdate,{isPlaying:e.isPlaying?r.j.ZegoGamePlayerStartPlay:r.j.ZegoGamePlayerStopPlay})},_.prototype.onGameStateUpdate=function(e){var t=h.a.getCurrentGame();c.a.createSpan(i.g.GameState,{game_id:t.gameInfo.miniGameId,room_id:t.config.roomId,state:e.status,reasonCode:e.reasonCode}).end(!0),this.eventBus.emit(r.e.GameStateUpdate,{state:e.status,reasonCode:e.reasonCode})},_.prototype.onPlayGameSound=function(e){this.eventBus.emit(r.e.GameSoundPlay,{name:e.name,isPlay:e.isPlay,volume:e.volume,url:e.url,playType:e.playType})},_.prototype.onChangeGameSoundVolume=function(e){this.eventBus.emit(r.e.GameSoundVolumeChange,{name:e.name,volume:e.volume})},_.prototype.onGameUploadError=function(e,t){var n=h.a.getCurrentGame();c.a.createSpan(i.g.GameError,{game_id:n.gameInfo.miniGameId,room_id:n.config.roomId,error:e.errorCode,msg:e.message}).end(!0),this.gameConnect.request({command:r.k.GameUploadError,data:{code:r.d.Success},seq:t.seq,gameCallback:!0}),this.eventBus.emit(r.e.GameError,f({},e))},_.prototype.onGetRobotSetting=function(e,t){var n=this;this.eventBus.emit(r.e.RobotConfigRequire,{done:function(e,o,i,s,a,c){n.gameConnect.request({command:r.k.GetRobotSetting,data:{robotLevel:e=e<0?0:e,robotName:o,robotAvatar:i,useRobotAfterSeconds:s,minCoin:a,maxCoin:c},seq:t.seq,gameCallback:!0})}})},_.prototype.onCloudGameFirstFrame=function(){c.a.createSpan(i.g.CloudGameFirstFrame,{}).end(!0),this.eventBus.emit(r.e.CloudGameFirstFrame,{})},_.prototype.login=function(){var e=this;return this.serverConnect.request(i.f.LOGIN,{userName:o.a.gameUserInfo.userName,userAvatar:o.a.gameUserInfo.avatar}).then((function(t){return t.code===r.d.Success&&(o.a.userCode=t.data.code,o.a.heartbeatInterval=1e3*t.data.heartbeatInterval,e.setUpdateCodeAlarm(t.data.expireDate-Date.now()-3e4),e.setTokenAlarm(o.a.token)),t}))},_.prototype.refrashToken=function(){return this.serverConnect.request(i.f.REFRESH_TOKEN,{}).then((function(e){return console.log("===refreshtoken",e),e}))},_.prototype.getGameList=function(e,t,n){return this.serverConnect.request(i.f.GET_GAME_LIST,{pageIndex:e,pageSize:t,gameMode:n,gameOrientation:r.i.OrientationBoth})},_.prototype.getGameInfo=function(e){var t=this;return this.serverConnect.request(i.f.GET_GAME_INFO,{miniGameId:e}).then((function(e){return e.code===r.d.Success&&t.gameInfoDetailMap.set(e.data.miniGameId,JSON.parse(JSON.stringify(e.data))),e}))},_.prototype.createGameRoom=function(e,t,n,r,o,s){return this.serverConnect.request(i.f.CREATE_GAME,{miniGameId:e,roomId:t,player:n,spin:r,taxType:o,taxRate:s})},_.prototype.closeGameRoom=function(e,t){return this.serverConnect.request(i.f.CLOSE_GAME,{miniGameId:e,roomId:t})},_.prototype.loadGame=function(e,t,n,o){function i(e){var r=(e=h.a.initGame(s.domId,t,n,e)).dom,i=e.width,a=e.height;e=e.url;return o.setAttributes({game_url:e,web_view_width:i,web_view_height:a}),r}var s=this,a=this.gameInfoDetailMap.get(e);return a?Promise.resolve(i(a)):this.getGameInfo(e).then((function(e){return e.code===r.d.Success?i(a=e.data):Promise.reject(e)}))},_.prototype.unloadGame=function(e,t){try{var n=h.a.getCurrentGame();return t.setAttributes({game_id:n.gameInfo.miniGameId,room_id:n.config.roomId}),this.gameConnect.request({command:r.b.BeforeDestroy,data:{gameID:n.gameInfo.miniGameId},gameCallback:!1}),e&&this.onGameDestroy(),Promise.resolve({code:r.d.Success})}catch(e){return Promise.reject(e)}},_.prototype.startGame=function(e,t,n,r){var o=h.a.getCurrentGame();r.setAttributes({room_id:o.config.roomId,mini_game_id:o.gameInfo.miniGameId}),r=t.map((function(e){return{robotName:e.robotName,robotLevel:e.robotLevel,robotAvatar:e.robotAvatar,robotCurrencyBalance:e.robotCoin,seatIndex:e.seatIndex}}));return this.serverConnect.request(i.f.START_GAME,{miniGameId:o.gameInfo.miniGameId,roomId:o.config.roomId,gameCfg:n.customConfig,taxType:n.taxType,taxRate:n.taxRate,minGameCoin:n.minGameCoin,timeout:n.timeout,userList:e,robotList:r},["game_cfg"])},_.prototype.startCloudGame=function(e,t,n){var r=this;return new Promise((function(s,a){r.cloudGameConnect.domId||a("还未调用 setCloudGameDomId 接口设置父容器");try{var u=document.querySelector(r.cloudGameConnect.domId);u.src="./zegoCloud/cloudGame.html",u.onload=function(){r.getGameInfo(e).then((function(u){var l=u.data.CloudType||1,h=c.a.createSpan(i.g.InitCloudGame,{game_id:e,room_id:t,cloud_type:l});u={command:"zego_cloud_game_init",data:{appid:o.a.appId,cloudType:l},callback:function(o){console.log("===callback",o),h.setAttributes({cloudGameRes:o,error:o.data.code}),h.end(!0),0===o.data.code?r.serverConnect.request(i.f.START_CLOUD_GAME,{miniGameId:e,roomId:t,cloudType:l,txRequest:{clientSession:o.data.clientSession||""},wlRequest:{bizData:o.data.bizData||"",node:o.data.node||"",resolution:n.resolution,codecType:n.codecType,bitRate:n.bitRate,fps:n.fps},appParameters:n.runningParameters}).then((function(n){var o;console.log("===server start cloud game success",n),0===n.code&&(o=c.a.createSpan(i.g.StartCloudGame,{game_id:e,room_id:t,cloud_type:l,server_session:n.data.txResponse.serverSession,sdk_msg:n.data.wlResponse.sdkMsg}),n={command:"zego_cloud_game_start",data:{serverSession:n.data.txResponse.serverSession,sdkMsg:n.data.wlResponse.sdkMsg},callback:function(e){o.setAttributes({cloudGameRes:e,error:e.data.code}),o.end(!0),console.log("===start callback",e),s(e.data)}},r.cloudGameConnect.request(n))})).catch((function(e){a(e)})):(console.warn("初始化失败",o.data),a(o.data))}};r.cloudGameConnect.request(u)}))}}catch(u){a(u)}}))},_.prototype.stopCloudGame=function(e,t){var n=this;return new Promise((function(r,o){var s=c.a.createSpan(i.g.StopCloudGame,{game_id:e,room_id:t});try{n.serverConnect.request(i.f.STOP_CLOUD_GAME,{miniGameId:e,roomId:t}).then((function(n){console.log("===server res",n,{miniGameId:e,roomId:t}),s.setAttributes({cloudGameSeverRes:n}),s.end(!0)})).catch((function(e){console.log("===err",e)}));var a={command:"zego_cloud_game_destroy",callback:function(e){console.log("===destroy callback",e),document.querySelector(n.cloudGameConnect.domId),s.setAttributes({cloudGameRes:e,error:e.data.code}),r(e.data)}};n.cloudGameConnect.request(a)}catch(a){s.end(!0),o(a)}}))},_.prototype.setCloudGameContainer=function(e){this.cloudGameConnect.domId=e},_.prototype.startPublishCloudGameStream=function(e,t,n){return this.serverConnect.request(i.f.START_PUBLISH_STREAM,{miniGameId:e,roomId:t,streamID:n})},_.prototype.stopPublishCloudGameStream=function(e,t,n){return this.serverConnect.request(i.f.STOP_PUBLISH_STREAM,{miniGameId:e,roomId:t,streamID:n})},_.prototype.setStreamProfile=function(e){var t=c.a.createSpan(i.g.SetStreamProfile,{stream_profile:e});try{var n={command:"zego_cloud_game_set_stream_profile",data:{fps:e.fps,min_bitrate:e.minBitrate,max_bitrate:e.maxBitrate},callback:function(){t.end(!0)}};this.cloudGameConnect.request(n)}catch(e){t.end(!0),console.log("setStreamProfile error",e)}},_.prototype.setPlayVolume=function(e){var t=c.a.createSpan(i.g.SetPlayVolume,{volume:e});try{var n={command:"zego_cloud_game_set_video_volume",data:{value:e},callback:function(){t.end(!0)}};this.cloudGameConnect.request(n)}catch(e){t.end(!0),console.log("setPlayVolume error",e)}},_.prototype.getPlayVolume=function(){var e=this,t=c.a.createSpan(i.g.GetPlayVolume,{});return new Promise((function(n,r){try{var o={command:"zego_cloud_game_video_volume",callback:function(e){console.log("===get video volume callback",e),t.setAttributes({cloudGameRes:e}),t.end(!0),n(e.data)}};e.cloudGameConnect.request(o)}catch(o){t.end(!0),r(o)}}))},_.prototype.sendKeyboardEvent=function(e){var t=c.a.createSpan(i.g.SendKeyboardEvent,{key:e});try{var n={command:"zego_cloud_game_send_keyboard_event",data:{key:e},callback:function(){t.end(!0)}};this.cloudGameConnect.request(n)}catch(e){t.end(!0),console.log("sendKeyboardEvent error",e)}},_.prototype.setGameSetting=function(e){var t=h.a.getCurrentGame();c.a.createSpan(i.g.SetGameParams,{game_id:t.gameInfo.miniGameId,room_id:t.config.roomId,param_type:e.settingType,param_value:e.settingValue,error:r.d.Success}).end(!0),this.gameConnect.request({command:r.b.SetGameSetting,data:e,gameCallback:!1})},_.prototype.getGameSetting=function(e){var t=this,n=h.a.getCurrentGame(),o=c.a.createSpan(i.g.GetGameParams,{game_id:n.gameInfo.miniGameId,room_id:n.config.roomId});return new Promise((function(n,i){try{t.gameConnect.request({command:r.c.GetGameSetting,data:{},gameCallback:!1,callback:function(t){t=t.data.settings,o.setAttributes({settings:t,error:r.d.Success}),o.end(!0),n(t[e])}})}catch(e){o.end(!0),i(e)}}))},_.prototype.refreshGameCoin=function(e){var t=h.a.getCurrentGame();e.setAttributes({game_id:t.gameInfo.miniGameId}),this.gameConnect.request({command:r.b.WalletUpdate,data:{gameID:t.gameInfo.miniGameId},gameCallback:!1})},_.prototype.getGameComponentList=function(e){var t=this;return new Promise((function(n,o){try{var i=h.a.getCurrentGame();t.gameConnect.request({command:r.c.GetCustomComponents,data:{},gameCallback:!1,callback:function(t){e.setAttributes({game_id:i.gameInfo.miniGameId,room_id:i.config.roomId,error:t.code,component_list:t.data.webviews}),n(t.data.webviews)}})}catch(e){o(e)}}))},_.prototype.getGameFunctionList=function(e){var t=this;return new Promise((function(n,o){try{var i=h.a.getCurrentGame();t.gameConnect.request({command:r.c.GetCustomFunctions,data:{},gameCallback:!1,callback:function(t){e.setAttributes({game_id:i.gameInfo.miniGameId,room_id:i.config.roomId,error:t.code,function_list:t.data.functions}),n(t.data.functions)}})}catch(e){o(e)}}))},_.prototype.setGameComponent=function(e,t,n){var o=this;return new Promise((function(i,s){try{var a=h.a.getCurrentGame();o.gameConnect.request({command:r.c.RunCustomComponent,data:{name:e,isShow:t},gameCallback:!1,callback:function(e){n.setAttributes({game_id:a.gameInfo.miniGameId,room_id:a.config.roomId,error:e.code}),i(e.data.isSuccess)}})}catch(e){s(e)}}))},_.prototype.runGameFunction=function(e,t){var n=this;return new Promise((function(o,i){try{var s=h.a.getCurrentGame();n.gameConnect.request({command:r.c.RunCustomFunction,data:{name:e,params:[]},gameCallback:!1,callback:function(e){t.setAttributes({game_id:s.gameInfo.miniGameId,room_id:s.config.roomId,error:e.code}),o(e.data.isSuccess)}})}catch(e){i(e)}}))},_.prototype.updateCode=function(e){},_.prototype.on=function(e,t){this.eventBus.on(e,t)},_.prototype.off=function(e){this.eventBus.off(e)},_.prototype.isConnected=function(){return this.serverConnect.isConnected()},_.prototype.setTokenAlarm=function(e){var t=this;(e=(this.tokenTimeout&&(clearTimeout(this.tokenTimeout),this.tokenTimeout=0),1e3*p.a.decodeTokenExpire(e.substring(2))-3e4-Date.now()))<0&&(e=0),this.tokenTimeout=window.setTimeout((function(){t.eventBus.emit(r.e.TokenWillExpire,{})}),e)},_.prototype.setUpdateCodeAlarm=function(e){var t=this;this.codeTimeout&&(clearTimeout(this.codeTimeout),this.codeTimeout=0),this.codeTimeout=window.setTimeout((function(){var e=c.a.createSpan(i.g.UpdateCode,{});t.login().then((function(n){e.setAttributes({error:n.code,code:n.data.code}),n.code!==r.d.Success&&t.setUpdateCodeAlarm(0)})).finally((function(){e.end(!0)}))}),e)},_.prototype.stopHeartbeat=function(){this.heartbeatTimeout&&(clearTimeout(this.heartbeatTimeout),this.heartbeatTimeout=0)},_.prototype.startHeartbeat=function(e,t,n){var o=this,s=h.a.getCurrentGame(),a=s.config.roomId||"";s.gameMode===r.h.GameModeMallGame&&(a=""),this.serverConnect.request(i.f.HEARTBEAT,{miniGameId:t,h5Version:n,roomId:a}),this.stopHeartbeat(),this.heartbeatTimeout=window.setTimeout((function(){o.startHeartbeat(e,t,n)}),e)},_);function _(){this.codeTimeout=0,this.tokenTimeout=0,this.heartbeatTimeout=0,this.gameInfoDetailMap=new Map,this.domId="",this.serverConnect=new a.a,this.eventBus=new l.a,this.gameConnect=new s.a(this.eventBus),this.cloudGameConnect=new u.a(this.eventBus),this.registerInnerEvent(),c.a.createTracer(this.serverConnect,o.a.appId,o.a.token,o.a.gameUserInfo.userId)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(e){var t,n=r.hexChars,o=r.hexOut;let i,s,a;for(a=0;a<4;a+=1)for(t=8*a,i=e[a],s=0;s<8;s+=2)o[1+t+s]=n.charAt(15&i),i>>>=4,o[0+t+s]=n.charAt(15&i),i>>>=4;return o.join("")}static _md5cycle(e,t){var n=e[0],r=e[1],o=e[2],i=e[3];r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&o)+t[1]-389564586|0)<<12|i>>>20)+n|0)&n|~i&r)+t[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&n)+t[3]-1044525330|0)<<22|r>>>10)+o|0;r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&o)+t[5]+1200080426|0)<<12|i>>>20)+n|0)&n|~i&r)+t[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&n)+t[7]-45705983|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&o)+t[9]-1958414417|0)<<12|i>>>20)+n|0)&n|~i&r)+t[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&n)+t[11]-1990404162|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&o)+t[13]-40341101|0)<<12|i>>>20)+n|0)&n|~i&r)+t[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&n)+t[15]+1236535329|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[1]-165796510|0)<<5|n>>>27)+r|0)&o|r&~o)+t[6]-1069501632|0)<<9|i>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|o>>>18)+i|0)&n|i&~n)+t[0]-373897302|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[5]-701558691|0)<<5|n>>>27)+r|0)&o|r&~o)+t[10]+38016083|0)<<9|i>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|o>>>18)+i|0)&n|i&~n)+t[4]-405537848|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[9]+568446438|0)<<5|n>>>27)+r|0)&o|r&~o)+t[14]-1019803690|0)<<9|i>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|o>>>18)+i|0)&n|i&~n)+t[8]+1163531501|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&o|r&~o)+t[2]-51403784|0)<<9|i>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|o>>>18)+i|0)&n|i&~n)+t[12]-1926607734|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^o)+t[8]-2022574463|0)<<11|i>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|o>>>16)+i|0)^i^n)+t[14]-35309556|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^o)+t[4]+1272893353|0)<<11|i>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|o>>>16)+i|0)^i^n)+t[10]-1094730640|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^o)+t[0]-358537222|0)<<11|i>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|o>>>16)+i|0)^i^n)+t[6]+76029189|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^o)+t[12]-421815835|0)<<11|i>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|o>>>16)+i|0)^i^n)+t[2]-995338651|0)<<23|r>>>9)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~o))+t[7]+1126891415|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[14]-1416354905|0)<<15|o>>>17)+i|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~o))+t[3]-1894986606|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[10]-1051523|0)<<15|o>>>17)+i|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~o))+t[15]-30611744|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[6]-1560198380|0)<<15|o>>>17)+i|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~o))+t[11]-1120210379|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[2]+718787259|0)<<15|o>>>17)+i|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+o|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(r.stateIdentity),this}appendStr(e){var t,n=this._buffer8,o=this._buffer32;let i,s=this._bufferLength;for(i=0;i<e.length;i+=1){if((t=e.charCodeAt(i))<128)n[s++]=t;else{if(t<2048)n[s++]=192+(t>>>6);else{if(t<55296||56319<t)n[s++]=224+(t>>>12);else{if(1114111<(t=1024*(t-55296)+(e.charCodeAt(++i)-56320)+65536))throw new Error("Unicode standard supports code points up to U+10FFFF");n[s++]=240+(t>>>18),n[s++]=t>>>12&63|128}n[s++]=t>>>6&63|128}n[s++]=63&t|128}64<=s&&(this._dataLength+=64,r._md5cycle(this._state,o),s-=64,o[0]=o[16])}return this._bufferLength=s,this}appendAsciiStr(e){var t=this._buffer8,n=this._buffer32;let o,i=this._bufferLength,s=0;for(;;){for(o=Math.min(e.length-s,64-i);o--;)t[i++]=e.charCodeAt(s++);if(i<64)break;this._dataLength+=64,r._md5cycle(this._state,n),i=0}return this._bufferLength=i,this}appendByteArray(e){var t=this._buffer8,n=this._buffer32;let o,i=this._bufferLength,s=0;for(;;){for(o=Math.min(e.length-s,64-i);o--;)t[i++]=e[s++];if(i<64)break;this._dataLength+=64,r._md5cycle(this._state,n),i=0}return this._bufferLength=i,this}getState(){var e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){var t=e.buffer,n=e.state,r=this._state;let o;for(this._dataLength=e.length,this._bufferLength=e.buflen,r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],o=0;o<t.length;o+=1)this._buffer8[o]=t.charCodeAt(o)}end(e=!1){var t=this._bufferLength,n=this._buffer8,o=this._buffer32,i=1+(t>>2),s=(this._dataLength+=t,8*this._dataLength);if(n[t]=128,n[t+1]=n[t+2]=n[t+3]=0,o.set(r.buffer32Identity.subarray(i),i),55<t&&(r._md5cycle(this._state,o),o.set(r.buffer32Identity)),s<=4294967295)o[14]=s;else{if(null===(n=s.toString(16).match(/(.*?)(.{0,8})$/)))return;i=parseInt(n[2],16),t=parseInt(n[1],16)||0,o[14]=i,o[15]=t}return r._md5cycle(this._state,o),e?this._state:r._hex(this._state)}}if(r.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),r.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),r.hexChars="0123456789abcdef",r.hexOut=[],r.onePassHasher=new r,"5d41402abc4b2a76b9719d911017c592"!==r.hashStr("hello"))throw new Error("Md5 self test failed.")},function(module,exports,__webpack_require__){var e;e=function(){return function(e){var t={};function n(r){var o;return(t[r]||(o=t[r]={i:r,l:!1,exports:{}},e[r].call(o.exports,o,o.exports,n),o.l=!0,o)).exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.typeMap=t.BrokenType=t.ConnectedType=t.DisconnectedType=t.Method=t.ConnectionClosedAction=t.NetWorkState=t.externalErrorList=t.Stick=t.PcConnectState=t.ENUM_CONNECT_STATE=t.StreamType=t.Mode=t.ZegoconnRunEnv=t.BusinessService=t.AccessHub_Error_Code=t.AccessHubMessageType=t.ENUM_NETWORK_STATE=void 0,(o=t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={}))[o.offline=0]="offline",o[o.online=1]="online",(o=t.AccessHubMessageType||(t.AccessHubMessageType={}))[o.MSG_TYPE_STREAM_CLOSED=2]="MSG_TYPE_STREAM_CLOSED",o[o.MSG_TYPE_CLOSE_CONNECTION=3]="MSG_TYPE_CLOSE_CONNECTION",o[o.MSG_TYPE_HTTP_REQUEST=4]="MSG_TYPE_HTTP_REQUEST",o[o.MSG_TYPE_HTTP_RESPONSE=5]="MSG_TYPE_HTTP_RESPONSE",o[o.MSG_TYPE_HB_REQUEST=12]="MSG_TYPE_HB_REQUEST",o[o.MSG_TYPE_HB_RESPONSE=13]="MSG_TYPE_HB_RESPONSE",o[o.MSG_TYPE_GET_CONFIG_REQUEST=14]="MSG_TYPE_GET_CONFIG_REQUEST",o[o.MSG_TYPE_GET_CONFIG_RESPONSE=15]="MSG_TYPE_GET_CONFIG_RESPONSE",o[o.MSG_TYPE_HTTP_REQUEST_ACK=16]="MSG_TYPE_HTTP_REQUEST_ACK",o[o.MSG_TYPE_PC_UPWARD_MESSAGE=17]="MSG_TYPE_PC_UPWARD_MESSAGE",o[o.MSG_TYPE_PC_UPWARD_MESSAGE_ACK=18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK",o[o.MSG_TYPE_PC_ESTABLISHED=19]="MSG_TYPE_PC_ESTABLISHED",o[o.MSG_TYPE_PC_BROKEN=20]="MSG_TYPE_PC_BROKEN",o[o.MSG_TYPE_PC_DOWNWARD_MESSAGE=21]="MSG_TYPE_PC_DOWNWARD_MESSAGE",o[o.MSG_TYPE_REDIRECT=22]="MSG_TYPE_REDIRECT",o[o.MSG_TYPE_GET_APPCONFIG_REQUEST=23]="MSG_TYPE_GET_APPCONFIG_REQUEST",o[o.MSG_TYPE_GET_APPCONFIG_RESPONSE=24]="MSG_TYPE_GET_APPCONFIG_RESPONSE",o[o.MSG_TYPE_PUSH_APPCONFIG=25]="MSG_TYPE_PUSH_APPCONFIG",o[o.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST=26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST",o[o.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE=27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE",o[o.MSG_TYPE_PUSH_EXCEPTION=30]="MSG_TYPE_PUSH_EXCEPTION",(r=o=t.AccessHub_Error_Code||(t.AccessHub_Error_Code={}))[r.ACCESSHUB_INVALID_FRAME=2e4]="ACCESSHUB_INVALID_FRAME",r[r.ACCESSHUB_NEED_ENCRYPT=20001]="ACCESSHUB_NEED_ENCRYPT",r[r.ACCESSHUB_DECRYPT=20002]="ACCESSHUB_DECRYPT",r[r.ACCESSHUB_MSGTYPE=20003]="ACCESSHUB_MSGTYPE",r[r.ACCESSHUB_UNMARSHAL=20004]="ACCESSHUB_UNMARSHAL",r[r.ACCESSHUB_TIMEOUT=20005]="ACCESSHUB_TIMEOUT",r[r.ACCESSHUB_CONNECT=20006]="ACCESSHUB_CONNECT",r[r.ACCESSHUB_BROKEN=20007]="ACCESSHUB_BROKEN",r[r.ACCESSHUB_INTERNAL_ERROR=20008]="ACCESSHUB_INTERNAL_ERROR",r[r.ACCESSHUB_MARSHAL=20009]="ACCESSHUB_MARSHAL",r[r.ACCESSHUB_UNSUPPORTED_SERVICE=20010]="ACCESSHUB_UNSUPPORTED_SERVICE",r[r.ACCESSHUB_TOO_FREQUENTLY=20011]="ACCESSHUB_TOO_FREQUENTLY",r[r.ACCESSHUB_INVALID_APPID=20012]="ACCESSHUB_INVALID_APPID",r[r.ACCESSHUB_HB_TIMEOUT=20013]="ACCESSHUB_HB_TIMEOUT",r[r.ACCESSHUB_INVALID_SIGNATURE=20014]="ACCESSHUB_INVALID_SIGNATURE",(r=t.BusinessService||(t.BusinessService={}))[r.SERVICE_UNSET=0]="SERVICE_UNSET",r[r.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",r[r.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",r[r.SERVICE_MIX=3]="SERVICE_MIX",r[r.SERVICE_ZEUS=4]="SERVICE_ZEUS",r[r.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",r[r.SERVICE_L3=6]="SERVICE_L3",r[r.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",r[r.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",r[r.SERVICE_ZIM=9]="SERVICE_ZIM",r[r.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",r[r.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",r[r.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",r[r.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",r[r.SERVICE_QUALITY=14]="SERVICE_QUALITY",r[r.SERVICE_SECURITY=15]="SERVICE_SECURITY",r[r.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",r[r.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",r[r.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",r[r.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",r[r.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",r[r.SERVICE_CDN=21]="SERVICE_CDN",r[r.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",r[r.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",r[r.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",r[r.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",r[r.SERVICE_ECHO=26]="SERVICE_ECHO",r[r.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",r[r.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR",(r=t.ZegoconnRunEnv||(t.ZegoconnRunEnv={}))[r.ZEGOCONN_RUN_ENV_UNSET=0]="ZEGOCONN_RUN_ENV_UNSET",r[r.ZEGOCONN_RUN_ENV_BROWSER=1]="ZEGOCONN_RUN_ENV_BROWSER",r[r.ZEGOCONN_RUN_ENV_APPLET=2]="ZEGOCONN_RUN_ENV_APPLET",(r=t.Mode||(t.Mode={}))[r.Mode_UNSET=0]="Mode_UNSET",r[r.MODE_ONLINE=1]="MODE_ONLINE",r[r.MODE_TEST=2]="MODE_TEST",r[r.MODE_ALPHA=3]="MODE_ALPHA",(r=t.StreamType||(t.StreamType={}))[r.HTTP=0]="HTTP",r[r.PC=1]="PC",r[r.OTHER=2]="OTHER",t.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},(r=t.PcConnectState||(t.PcConnectState={}))[r.CONNECTED=0]="CONNECTED",r[r.DISCONNECT=1]="DISCONNECT",r[r.BROKEN=2]="BROKEN",t.Stick={DISPATCH:"zego-action-dispatch",RETRY:"zego-action-retry",ABORT:"zego-action-abort",NEXT_GROUP:"zego-action-next-group",PUSH_APP_CONFIG:"push-app-config:"},t.externalErrorList=[o.ACCESSHUB_INVALID_APPID,o.ACCESSHUB_INVALID_SIGNATURE],(r=t.NetWorkState||(t.NetWorkState={}))[r.offline=0]="offline",r[r.online=1]="online",(o=t.ConnectionClosedAction||(t.ConnectionClosedAction={}))[o.ACTION_RESERVED=0]="ACTION_RESERVED",o[o.ACTION_DISPATCH=1]="ACTION_DISPATCH",o[o.ACTION_RETRY=2]="ACTION_RETRY",o[o.ACTION_NEXT_NODE=3]="ACTION_NEXT_NODE",o[o.ACTION_ABORT=4]="ACTION_ABORT",o[o.ACTION_NEXT_GROUP=5]="ACTION_NEXT_GROUP",(r=t.Method||(t.Method={}))[r.METHOD_UNSET=0]="METHOD_UNSET",r[r.METHOD_GET=1]="METHOD_GET",r[r.METHOD_POST=2]="METHOD_POST",(o=t.DisconnectedType||(t.DisconnectedType={}))[o.CLOSE=0]="CLOSE",o[o.TEMP=1]="TEMP",o[o.TIMEOUT=2]="TIMEOUT",(r=t.ConnectedType||(t.ConnectedType={}))[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",(o=t.BrokenType||(t.BrokenType={}))[o.EMPTY=0]="EMPTY",o[o.CLOSE=1]="CLOSE",t.typeMap={2:"stream_closed",3:"close_connection",4:"http_request",5:"http_response",12:"hb_request",13:"hb_response",14:"get_config_request",15:"get_config_response",16:"http_request_ack",17:"pc_upward_message",18:"pc_upward_message_ack",19:"pc_established",20:"pc_broken",21:"pc_downward_message",22:"redirect",23:"get_appconfig_request",24:"get_appconfig_response",25:"push_appconfig",26:"accesshub_dispatch_request",27:"accesshub_dispatch_response",30:"push_exception"}},function(e,t,n){"use strict";(function(e){var r=t;function o(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;++o)void 0!==e[r[o]]&&n||(e[r[o]]=t[r[o]]);return e}function i(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&o(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(17),r.base64=n(18),r.EventEmitter=n(19),r.float=n(20),r.inquire=n(21),r.utf8=n(22),r.pool=n(23),r.LongBits=n(24),r.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),r.global=r.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||0<(Array.isArray(n)?n:Object.keys(n)).length)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){return e=r.LongBits.fromHash(e),r.Long?r.Long.fromBits(e.lo,e.hi,t):e.toNumber(Boolean(t))},r.merge=o,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;-1<n;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}).call(this,n(16))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APP_CONFIG_KEY=t.NET_ACCESS_SERVERS=t.NET_ACCESS_CONFIG=void 0,n=n(0),t.NET_ACCESS_CONFIG={domains:["accesshub-wss.zego.im"],mode:"online",modeNo:n.Mode.MODE_ONLINE,sdkType:3,connectVer:2,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1},t.NET_ACCESS_SERVERS="z_net_access_servers",t.APP_CONFIG_KEY="z_appconfig"},function(e,t,n){"use strict";e.exports=n(15)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuidNum=t.decodeString=t.encodeString=void 0,t.encodeString=function(e){return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map((function(e){return e.charCodeAt(0)})))},t.decodeString=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(e))))},t.uuidNum=function(e,t){var n,r,o="0123456789".split(""),i=[];if(t=o.length,e)for(n=0;n<e;n++)i[n]=o[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",n=0;n<36;n++)i[n]||(r=0|16*Math.random(),i[n]=o[19==n?3&r|8:r]);return i.join("")}},function(e,t,n){"use strict";e.exports=h;var r,o=n(1),i=o.LongBits,s=o.base64,a=o.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}function p(){return o.Buffer?function(){return(h.create=function(){return new r})()}:function(){return new h}}function f(e,t,n){t[n]=255&e}function d(e,t){this.len=e,this.next=void 0,this.val=t}function _(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function g(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}h.create=p(),h.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(h.alloc=o.pool(h.alloc,o.Array.prototype.subarray)),h.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},(d.prototype=Object.create(c.prototype)).fn=function(e,t,n){for(;127<e;)t[n++]=127&e|128,e>>>=7;t[n]=e},h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new d((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this._push(_,10,i.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.int64=h.prototype.uint64=function(e){return e=i.from(e),this._push(_,e.length(),e)},h.prototype.sint64=function(e){return e=i.from(e).zzEncode(),this._push(_,e.length(),e)},h.prototype.bool=function(e){return this._push(f,1,e?1:0)},h.prototype.sfixed32=h.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},h.prototype.sfixed64=h.prototype.fixed64=function(e){return e=i.from(e),this._push(g,4,e.lo)._push(g,4,e.hi)},h.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var m=o.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};h.prototype.bytes=function(e){var t,n=e.length>>>0;return n?(o.isString(e)&&(t=h.alloc(n=s.length(e)),s.decode(e,t,0),e=t),this.uint32(n)._push(m,n,e)):this._push(f,1,0)},h.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(f,1,0)},h.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},h._configure=function(e){r=e,h.create=p(),r._configure()}},function(e,t,n){"use strict";e.exports=c;var r,o=n(1),i=o.LongBits,s=o.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}function u(){return o.Buffer?function(e){return(c.create=function(e){return o.Buffer.isBuffer(e)?new r(e):h(e)})(e)}:h}var l,h="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")};function p(){var e=new i(0,0),t=0;if(!(4<this.len-this.pos)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,4<this.len-this.pos){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function f(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw a(this,8);return new i(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}c.create=u(),c.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)||!((this.pos+=5)>this.len))return l;throw this.pos=this.len,a(this,10)}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=u(),r._configure();var t=o.Long?"toLong":"toNumber";o.merge(c.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return d.call(this)[t](!0)},sfixed64:function(){return d.call(this)[t](!1)}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentPCRequest=void 0;var r=n(0),o=n(2),i=n(9),s=n(5),a=[r.BusinessService.SERVICE_WEBRTC_SIGNAL,r.BusinessService.SERVICE_L3_WEBRTC_SIGNAL];function c(e,t,n,o,s){this.logger=e,this.service=t,this.streamManager=n,this.pcEstablishTimeout=o,this.option=s,this.connectState=r.PcConnectState.DISCONNECT,this.lastConnectState=r.PcConnectState.DISCONNECT,this.brokenTimer=null,this.listenerList={connected:[],broken:[]},this.netPcStream=this.streamManager.createStream(r.StreamType.PC),this.eventManager=new i.EventManager,this.netPcStream.onPushEvent=this.onPushEvent.bind(this)}c.prototype.sendRequest=function(e,t,n){var i=this,c=e.payload,u=((a.includes(this.service)||null!=(u=this.option)&&u.encode)&&(c=(0,s.encodeString)(e.payload)),{service_no:this.service,ack:e.ack,payload:c,wss_message_type:o.NET_ACCESS_CONFIG.wssMessageType,wss_path:null==(u=this.option)?void 0:u.path,wss_raw_query:null==(c=this.option)?void 0:c.query,zegoconn_version:o.NET_ACCESS_CONFIG.connectVer});this.netPcStream.isConnect()||this.eventManager.emit("connectStart"),this.netPcStream.sendMessage(r.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE,u,(function(){i.logger.info("zn.napr.sr suc"),n&&n()}),(function(e){i.logger.error("zn.napr.sr fail"),t&&t(e)}),null,{isInSendMap:"boolean"==typeof e.isInSendMap&&e.isInSendMap}),this.netPcStream.isFirst=!1},c.prototype.onPushEvent=function(e,t){var n;switch(this.logger.info("zn.napr.ope"+" msgType: ".concat(e)),e){case r.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED:this.pcEstablished(t);break;case r.AccessHubMessageType.MSG_TYPE_PC_BROKEN:this.pcBroken();break;case r.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE:var o=t.payload;(a.includes(this.service)||null!=(n=this.option)&&n.encode)&&(o=(0,s.decodeString)(t.payload)),this.eventManager.emit("downLoadMessage",o)}},c.prototype.on=function(e,t){return this.eventManager.addEventHandler(e,t)},c.prototype.off=function(e,t){this.eventManager.removeEventHandler(e,t)},c.prototype.pcEstablished=function(e){this.logger.info("zn.napr.pe call "+JSON.stringify(e)),this.setConnectState(r.PcConnectState.CONNECTED);var t=r.ConnectedType.MANUAL;this.lastConnectState===r.PcConnectState.BROKEN&&this.connectState===r.PcConnectState.CONNECTED&&(t=r.ConnectedType.AUTO),this.eventManager.emit("connected",t),this.eventManager.emit("pcConnectedEvent",{proxy_link_sources:null==e?void 0:e.from}),this.brokenTimer&&clearTimeout(this.brokenTimer)},c.prototype.pcBroken=function(){var e=this;this.logger.info("zn.napr.pb call"),this.setConnectState(r.PcConnectState.BROKEN),this.eventManager.emit("broken"),this.brokenTimer=setTimeout((function(){e.eventManager.emit("disconnected",r.DisconnectedType.TEMP)}),1e3*this.pcEstablishTimeout)},c.prototype.resetBrokenTimer=function(){this.brokenTimer&&clearTimeout(this.brokenTimer)},c.prototype._close=function(e,t){var n;this.logger.info("zn.napr.cr call "+this.service+" "+this.connectState),this.connectState!==r.PcConnectState.DISCONNECT&&(this.netPcStream.closeStream(0,""),this.resetBrokenTimer(),n=this.streamManager.getStreamID(),this.netPcStream.refresh(n),this.eventManager.emit(e,t)),this.setConnectState(r.PcConnectState.DISCONNECT)},c.prototype.closePc=function(){this._close("broken")},c.prototype.closeRequest=function(){this._close("disconnected",r.DisconnectedType.CLOSE)},c.prototype.setConnectState=function(e){this.connectState!==e&&(this.lastConnectState=this.connectState,this.connectState=e)},t.NetAgentPCRequest=c},function(e,t,n){"use strict";function r(){this.handlerListMap={}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventManager=void 0,r.prototype.addEventHandler=function(e,t){if(this.handlerListMap[e]||(this.handlerListMap[e]=[]),"function"!=typeof t)throw new Error("Params callBack is not a Function");return this.handlerListMap[e]&&-1==this.handlerListMap[e].indexOf(t)&&this.handlerListMap[e].push(t),!0},r.prototype.removeEventHandler=function(e,t){return!!this.handlerListMap[e]&&(this.handlerListMap[e]=t?this.handlerListMap[e].filter((function(e){return e!==t})):[],!0)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.handlerListMap[e]&&this.handlerListMap[e].forEach((function(n){try{setTimeout((function(){n.apply(void 0,t)}),0)}catch(n){console.error("dispatch "+e+" "+n)}}))},t.EventManager=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentHttpRequest=void 0;var r=n(0),o=n(5),i=n(2);function s(e,t,n){this.logger=e,this.service=t,this.streamManager=n,this.netHttpStream=this.streamManager.createStream(r.StreamType.HTTP)}s.prototype.sendRequest=function(e,t,n,s,a){var c=this;e={service_no:this.service,ack:e.ack,headers:e.headers,body:(0,o.encodeString)(JSON.stringify(e.body)),id_name:e.idName,method_no:e.method_no,stick:e.stick,location:e.location,zegoconn_version:i.NET_ACCESS_CONFIG.connectVer},this.netHttpStream.sendMessage(r.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST,e,(function(e){var n;e.body&&(n=(0,o.decodeString)(e.body),e.body=n),c.logger.info("zn.nahr.sr suc "+JSON.stringify(e)),t&&t(e)}),(function(e,t,r){c.logger.error("zn.nahr.sr fail"),n&&n(r||e)}),(function(e){c.logger.error("zn.nahr.sr ack"),s&&s(e)}),a),this.netHttpStream.isFirst=!1},t.NetAgentHttpRequest=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Method=t.Mode=t.DisconnectedType=t.ConnectedType=t.NET_ACCESS_CONFIG=t.BrokenType=t.BusinessService=t.NetAgentHttpRequest=t.NetAgentPCRequest=t.ZegoConnectionAgent=void 0;var r=n(0),o=(Object.defineProperty(t,"BrokenType",{enumerable:!0,get:function(){return r.BrokenType}}),Object.defineProperty(t,"BusinessService",{enumerable:!0,get:function(){return r.BusinessService}}),Object.defineProperty(t,"ConnectedType",{enumerable:!0,get:function(){return r.ConnectedType}}),Object.defineProperty(t,"DisconnectedType",{enumerable:!0,get:function(){return r.DisconnectedType}}),Object.defineProperty(t,"Mode",{enumerable:!0,get:function(){return r.Mode}}),Object.defineProperty(t,"Method",{enumerable:!0,get:function(){return r.Method}}),n(12)),i=(Object.defineProperty(t,"ZegoConnectionAgent",{enumerable:!0,get:function(){return o.ZegoConnectionAgent}}),n(10)),s=(Object.defineProperty(t,"NetAgentHttpRequest",{enumerable:!0,get:function(){return i.NetAgentHttpRequest}}),n(2)),a=(Object.defineProperty(t,"NET_ACCESS_CONFIG",{enumerable:!0,get:function(){return s.NET_ACCESS_CONFIG}}),n(8));Object.defineProperty(t,"NetAgentPCRequest",{enumerable:!0,get:function(){return a.NetAgentPCRequest}})},function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoConnectionAgent=void 0,n(0)),i=n(13),s=n(31),a=n(36),c=n(37),u=n(38),l=n(2),h=n(9),p=n(39),f=n(4),d=n(40),_=n(5),g=n(41),m=n(10),y=n(42);function v(){var e=this;this.linkCheckTimer=null,this.connectServers=[],this.getAppConfigFailCount=0,this.getAppConfigTime=0,this.inited=!1,this.linkMsgMaxInterval=90,this.linkMsgCheckInterval=5,this.connectedTime=0,this.connectid="",this.reportSeq=0,this.connectSeq=0,this.onConnectedEvent=function(t){e.getConfig();var n=e.reportSeq++;e.eventManager.emit("dispatchEvent",n,"start"),e.dispatch().then((function(t){var r=t.servers;t=t.domains,e.eventManager.emit("dispatchEvent",n,"end",{domains:t}),0<r.length&&e.eventManager.emit("dispatchResultUpdate",{servers:r})})).catch((function(e){})),e.eventManager.emit("connected"),e.connectedTime=(new Date).getTime(),e.connectid=(0,_.uuidNum)(16),e.eventManager.emit("connectedEvent",e.connectSeq,"end",{servers:t,count:t.length,connectid:e.connectid})},this.onConnectingEvent=function(){e.logger.info("zn.zca.oce call")},this.onDisConnectedEvent=function(t){e.disConnect(),e.netAgentPCRequestMgr.updateConnectState(o.PcConnectState.BROKEN)},this.onPushEvent=function(t,n,r){switch(n){case o.AccessHubMessageType.MSG_TYPE_REDIRECT:e.redirect(r);break;case o.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION:e.connectClosed(r);break;case o.AccessHubMessageType.MSG_TYPE_PC_BROKEN:case o.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED:case o.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE:e.streamManager.onPushEvent(t,n,r);break;case o.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG:e.businessRequestMgr.decodeConfigMessage(r.data)}}}v.prototype.init=function(){this.logger=new g.ZegoLogger,this.protobuf=new i.AccessHubProtoBuf,this.stateCenter=new d.StateCenter,this.eventManager=new h.EventManager,this.checkLinkMsg(),this.inited=!0},v.prototype.unInit=function(){this.inited=!1},v.prototype.setAppInfo=function(e){this.stateCenter.appInfo=e,this.stateCenter.networkState=!navigator||navigator.onLine?o.ENUM_NETWORK_STATE.online:o.ENUM_NETWORK_STATE.offline,0===e.env?this.bindWindowListener():1===e.env&&this.bindWxListener(),this.zegoLink=new s.ZegoWssLink(e.appID,e.env,this.protobuf,this.logger,this.stateCenter),this.zegoLink.initEvent(this.onConnectedEvent,this.onDisConnectedEvent,this.onConnectingEvent,this.onPushEvent),this.streamManager=new y.StreamManager(this.zegoLink),this.businessRequestMgr=new a.NetAgentBusinessRequestMgr(this.streamManager,this.protobuf,this.logger,this.stateCenter),this.netHeartBeatHandler=new c.NetHeartBeatHandler(this.streamManager,this.logger),this.netAgentPCRequestMgr=new u.NetAgentPCRequestMgr(this.streamManager,this.logger),this.heartBeatHandler()},v.prototype.setUserInfo=function(e){this.stateCenter.userId=e},v.prototype.setNetAgentDefaultServers=function(e){this.connectServers=r([],e,!0)},v.prototype.setDispatchConnectServers=function(e){this.connect(e)},v.prototype.startHttpRequest=function(e,t,n,r,o){var i=this,s=this.reportSeq++;this.eventManager.emit("requestEvent",s,"start"),this.isConnect()||this.connectUa(),new m.NetAgentHttpRequest(this.logger,e.service,this.streamManager).sendRequest(e,(function(e){i.eventManager.emit("requestEvent",s,"end",{na_req_location:location,status_code:e.status_code}),t&&t(e)}),(function(e){i.eventManager.emit("requestEvent",s,"end",{na_req_location:location}),n&&n(e)}),r,o)},v.prototype.getAppConfigByAgent=function(e,t,n){return this.isConnect()||this.connectUa(),this.getAppConfig(e,this.stateCenter.userId,t,n)},v.prototype.getPCRequest=function(e,t){var n=this;return(t=this.netAgentPCRequestMgr.getRequest(e,t)).on("disconnected",(function(t){n.logger.warn("zn.zca.gpr "+e+" disconnect "+t),t===o.DisconnectedType.TEMP&&(n.disConnect(),n.connectStart())})),t.on("connectStart",(function(){n.connectUa()})),t},v.prototype.connectUa=function(){this.logger.info("zn.zca.cua call"),this.retryLinkHandler&&(this.retryLinkHandler.init(),this.connectStart(!1,!0))},v.prototype.destroyConnect=function(){this.logger.info("zn.zca.dc.0 call"),this.resetNetAgent()},v.prototype.isConnect=function(){return this.zegoLink&&this.zegoLink.isConnect()},v.prototype.on=function(e,t){return this.logger.info("zn.zca.o.0 "+e),this.eventManager.addEventHandler(e,t)},v.prototype.off=function(e,t){this.logger.info("zn.zca.o.1 "+e),this.eventManager.removeEventHandler(e,t)},v.prototype.setLogger=function(e){this.logger=e},v.prototype.setAccess=function(e){this.stateCenter.useNetAgent=e},v.prototype.heartBeatHandler=function(){var e=this;this.netHeartBeatHandler.netHbLogout=function(t){e.retryLinkHandler&&([f.errorCodeList.NET_HB_TIMEOUT.code].includes(t.code)?(e.retryLinkHandler.startMaxTime(),e.disConnect(),e.connectStart()):(e.retryLinkHandler.stopMaxTime(),e.retryLinkHandler.invalid(),e.eventManager.emit("disconnected")))}},v.prototype.bindWindowListener=function(){var e=this;window.addEventListener("offline",(function(){e.netOffLineHandle()})),window.addEventListener("online",(function(){e.netOnLineHandle()}))},v.prototype.bindWxListener=function(){var e=this;wx.onNetworkStatusChange((function(t){t.isConnected?e.netOnLineHandle():e.netOffLineHandle()}))},v.prototype.netOnLineHandle=function(){this.logger.info("zn.zca.noh.0 network is online"),this.stateCenter.networkState=o.ENUM_NETWORK_STATE.online,this.stateCenter.useNetAgent&&this.netOnLineHandler()},v.prototype.netOffLineHandle=function(){this.logger.info("zn.zca.noh.1 network is broken"),this.stateCenter.networkState=o.ENUM_NETWORK_STATE.offline,this.stateCenter.useNetAgent&&this.netOffLineHandler()},v.prototype.checkLinkMsg=function(){var e=this;if(this.stateCenter.useNetAgent){if(this.isConnect()){var t=Date.now()-this.zegoLink.updatedMsgTime;if(t>1e3*this.linkMsgMaxInterval)return this.logger.info("zn.zca.clm interval: "+t),void this.resetNetAgent()}this.linkCheckTimer&&clearTimeout(this.linkCheckTimer),this.linkCheckTimer=setTimeout((function(){e.checkLinkMsg()}),1e3*this.linkMsgCheckInterval)}},v.prototype.connect=function(e){var t=this;0<e.length&&(this.connectServers=r([],e,!0)),this.zegoLink.createSocket(this.connectServers),this.retryLinkHandler||(this.retryLinkHandler=new p.NetRetryLinkHandler(this.logger,this.stateCenter)),this.retryLinkHandler.init(),this.retryLinkHandler.initLink(this.zegoLink),this.retryLinkHandler.onactive=function(e,n){n===f.errorCodeList.NET_SOCKET_TIMEOUT&&(t.eventManager.emit("disconnected",n),t.netAgentPCRequestMgr.updateConnectState(o.PcConnectState.DISCONNECT,o.DisconnectedType.TIMEOUT,n))},this.connectStart(!1,!0)},v.prototype.resetNetAgent=function(){this.netHeartBeatHandler.reset(),this.zegoLink.destroySocket()},v.prototype.getConfig=function(){function e(e,n,r){r?t.logger.info("zn.zca.gc fail "+JSON.stringify(r)):0===e.code?(t.logger.info("zn.zca.gc suc "+JSON.stringify(e)),t.getConfigSuccess(e)):t.logger.info("zn.zca.gc fail")}var t=this;this.businessRequestMgr.getConfig(e,e)},v.prototype.getConfigSuccess=function(e){this.netHeartBeatHandler.init(e),this.netAgentPCRequestMgr.setEstablishTimeout(e.data.pc_establish_timeout)},v.prototype.dispatch=function(){var e=this;return new Promise((function(t,n){e.businessRequestMgr.dispatchURL((function(n){n=n.data.wss_groups;var r=(e.logger.info("zn.nab.du wss_groups: "+JSON.stringify(n)),e.handleWssGroups(n));t({servers:r,domains:n})}),(function(e){n(e)}))}))},v.prototype.handleWssGroups=function(e){return Array.isArray(e)&&0<e.length?e.map((function(e){return l.NET_ACCESS_CONFIG.scheme+"://"+e.host+"/"+l.NET_ACCESS_CONFIG.location})):[]},v.prototype.getAppConfig=function(e,t,n,r){var i=this;return new Promise((function(s,a){"string"==typeof t&&"string"==typeof n?i.businessRequestMgr.getAppConfig(e,t,n,r).then((function(e){s(e)})).catch((function(r){i.logger.error("zn.zca.gac "+JSON.stringify(r)),!(-1<o.externalErrorList.indexOf(r.code))&&(i.getAppConfigFailCount++,20008===r.code)&&i.getAppConfigFailCount<3?i.getAppConfig(e,t,n).then((function(e){return s(e)})).catch((function(e){return a(e)})):(i.getAppConfigFailCount=0,a(r))})):i.logger.error("zn.zca.gac userID or token must be string")}))},v.prototype.reportDisConnectEvent=function(){var e=(new Date).getTime()-this.connectedTime;this.eventManager.emit("disConnectedEvent",{duration:e,server:this.zegoLink.connectServer})},v.prototype.redirect=function(e){this.logger.info("zn.zca.rd"+" ".concat(JSON.stringify(e.wss_groups))),(e=this.handleWssGroups(e.wss_groups))&&Array.isArray(e)&&0<e.length?(this.disConnect(),this.zegoLink.createSocket(e),this.connectStart(!1,!0)):this.logger.warn("zn.zca.rd wss_groups null")},v.prototype.connectClosed=function(e){var t=this;switch(this.logger.info("zn.zca.cc"+" ".concat(e.reason," ").concat(e.msg," ").concat(e.action)),e.action){case o.ConnectionClosedAction.ACTION_DISPATCH:var n=this.reportSeq++;this.eventManager.emit("dispatchEvent",n,"start"),this.dispatch().then((function(e){var r=e.servers;e=e.domains,t.eventManager.emit("dispatchEvent",n,"end",{domains:e,reason:"ConnectClosed"}),Array.isArray(r)&&0<r.length&&(t.disConnect(),t.zegoLink.createSocket(r),t.eventManager.emit("dispatchResultUpdate",{servers:r}),t.connectStart(!1,!0))})).catch((function(e){t.logger.info("zn.zca.cc dispatch fail")}));break;case o.ConnectionClosedAction.ACTION_RETRY:this.disConnect(),this.connectStart(!1);break;case o.ConnectionClosedAction.ACTION_NEXT_GROUP:this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken",o.BrokenType.CLOSE),this.connectStart();break;case o.ConnectionClosedAction.ACTION_ABORT:case o.ConnectionClosedAction.ACTION_RESERVED:}},v.prototype.netOnLineHandler=function(){this.retryLinkHandler&&(this.zegoLink.isConnect()?this.retryLinkHandler.stopMaxTime():this.connectStart())},v.prototype.netOffLineHandler=function(){this.disConnect(),this.retryLinkHandler&&(this.retryLinkHandler.invalid(),this.retryLinkHandler.startMaxTime(),this.zegoLink.setState(o.ENUM_CONNECT_STATE.disconnect))},v.prototype.connectStart=function(e,t){this.retryLinkHandler.active(e,t)&&this.reportConnectEvent()},v.prototype.reportConnectEvent=function(){var e=this.reportSeq++;this.connectSeq=e,this.eventManager.emit("connectedEvent",e,"start")},v.prototype.disConnect=function(){this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken"),this.reportDisConnectEvent()},v.prototype.testConnect=function(){this.startHttpRequest({service:o.BusinessService.SERVICE_ClOUD_SETTING,headers:[],body:{appid:3349318446,biztype:0,deviceid:"27a315ae-ff78-4ded-8581-8b7b7afe6f2e",files:["init","room"],id_name:"sample1647345322471",mode:"online",param:{},product:"Web_SDK",timestamp:1647345362932,token:"eyJ2ZXIiOjEsImhhc2giOiIwOGQxMDYzMzQ0M2EzNjk1ZmE4YTg2ZDNmZGRlNGNiNyIsIm5vbmNlIjoiYWEyZDFmMDJmOGRiYjBlM2Q1YjY5NzA3NzMzOGYyODIiLCJleHBpcmVkIjoxNjQ5OTM3MzI2fQ=="},idName:"sample1647345322471",ack:!0,method_no:o.Method.METHOD_POST,location:"/cloud-setting/get"},(function(e){console.warn("suc",e)}),(function(e){console.warn("err",e)}),(function(e){console.warn("suc",e)}))},t.ZegoConnectionAgent=v},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},c=(Object.defineProperty(t,"__esModule",{value:!0}),t.AccessHubProtoBuf=void 0,a(n(14))),u=(s=s(n(3)),n(0)),l=a(n(30));function h(){var e;this.protoInstance=l.default,this.protoMap=((e={})[u.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED]=["proto_accesshub","ConnectionClosed"],e[u.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION]=["proto_accesshub","CloseConnection"],e[u.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST]=["proto_accesshub","HTTPRequest"],e[u.AccessHubMessageType.MSG_TYPE_HTTP_RESPONSE]=["proto_accesshub","HTTPResponse"],e[u.AccessHubMessageType.MSG_TYPE_HB_REQUEST]=["proto_accesshub","HBRequest"],e[u.AccessHubMessageType.MSG_TYPE_HB_RESPONSE]=["proto_accesshub","HBResponse"],e[u.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST]=["proto_accesshub","GetConfigRequest"],e[u.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE]=["proto_accesshub","GetConfigResponse"],e[u.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK]=["proto_accesshub","HBResponse"],e[u.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE]=["proto_accesshub","PCUpwardMessage"],e[u.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE_ACK]=["proto_accesshub","PCUpwardMessageAck"],e[u.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED]=["proto_accesshub","PCEstablished"],e[u.AccessHubMessageType.MSG_TYPE_PC_BROKEN]=["proto_accesshub","PCBroken"],e[u.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE]=["proto_accesshub","PCDownwardMessage"],e[u.AccessHubMessageType.MSG_TYPE_REDIRECT]=["proto_accesshub","Redirect"],e[u.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST]=["proto_accesshub","GetAppConfigRequest"],e[u.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_RESPONSE]=["proto_accesshub","GetAppConfigResponse"],e[u.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG]=["proto_accesshub","PushAppConfig"],e[u.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST]=["proto_accesshub","AccesshubDispatchRequest"],e[u.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE]=["proto_accesshub","AccesshubDispatchResponse"],e[u.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION]=["proto_accesshub","PushException"],e)}s.util.Long=c.default,s.configure(),h.prototype.encodeRequest=function(e,t,n){var r=(o=this.protoMap[e])[0],o=o[1];return o=(r=this.encode(this.protoInstance[r][o],t)).length,(t=new Uint8Array(13+o))[0]=175,t[1]=0,t[2]=e>>8,t[3]=e-(t[2]<<8),t.set(new Uint8Array(Int32Array.from([o]).buffer).reverse(),4),t.set(new Uint8Array(Int32Array.from([n]).buffer).reverse(),8),t[12]=0,t.set(r,13),t},h.prototype.decodeResponse=function(e){var t=(e[2]<<8)+e[3],n=new DataView(e.buffer).getUint32(8),r=e.slice(13);try{var o=this.protoMap[t],i=o[0],s=o[1];return[n,t,this.decode(this.protoInstance[i][s],r)]}catch(e){return[n,t,{code:1}]}},h.prototype.decodeConfigMessage=function(e){return this.decode(this.protoInstance.proto_initconfig.InitConfig,e)},h.prototype.encode=function(e,t){return e.encode(new e(t)).finish()},h.prototype.decode=function(e,t){return r({},e.decode(t))},t.AccessHubProtoBuf=h},function(e,t,n){var r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}function o(e){var t=Math.clz32(e&-e);return e?31-t:t}Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},s={};function a(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=u(e,0,!0),o&&(s[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=u(e,e<0?-1:0,!1),o&&(i[e]=n),n)}function c(e,t){if(isNaN(e))return t?y:m;if(t){if(e<0)return y;if(d<=e)return O}else{if(e<=-_)return C;if(_<=e+1)return E}return e<0?c(-e,t).neg():u(e%f|0,e/f|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=a,n.fromNumber=c,n.fromBits=u;var l=Math.pow;function h(e,t,n){if(0===e.length)throw Error("empty string");if(t="number"==typeof t?(n=t,!1):!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?y:m;if((n=n||10)<2||36<n)throw RangeError("radix");var r;if(0<(r=e.indexOf("-")))throw Error("interior hyphen");if(0===r)return h(e.substring(1),t,n).neg();for(var o=c(l(n,8)),i=m,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+a),n);i=(a<8?(a=c(l(n,a)),i.mul(a)):i=i.mul(o)).add(c(u))}return i.unsigned=t,i}function p(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?h(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=h,n.fromValue=p;var f=4294967296,d=f*f,_=d/2,g=a(1<<24),m=a(0),y=(n.ZERO=m,a(0,!0)),v=(n.UZERO=y,a(1)),b=(n.ONE=v,a(1,!0)),S=(n.UONE=b,a(-1)),E=(n.NEG_ONE=S,u(-1,2147483647,!1)),O=(n.MAX_VALUE=E,u(-1,-1,!0)),C=(n.MAX_UNSIGNED_VALUE=O,u(0,-2147483648,!1)),T=(n.MIN_VALUE=C,n.prototype);return T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},T.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";var t,n;if(this.isNegative())return this.eq(C)?(n=c(e),n=(t=this.div(n)).mul(n).sub(this),t.toString(e)+n.toInt().toString(e)):"-"+this.neg().toString(e);for(var r=c(l(e,6),this.unsigned),o=this,i="";;){var s=o.div(r),a=(o.sub(s.mul(r)).toInt()>>>0).toString(e);if((o=s).isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||0<=this.high},T.isOdd=function(){return 1==(1&this.low)},T.isEven=function(){return 0==(1&this.low)},T.equals=function(e){return r(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return 0<this.comp(e)},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return 0<=this.comp(e)},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){var t,n;return r(e)||(e=p(e)),this.eq(e)?0:(t=this.isNegative(),n=e.isNegative(),t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1)},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(v)},T.neg=T.negate,T.add=function(e){r(e)||(e=p(e));var t=this.high>>>16,n=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,c=e.low>>>16,l=0,h=0,f=0,d=0;return h+=(f=f+((d+=i+(65535&e.low))>>>16)+(o+c))>>>16,u((f&=65535)<<16|(d&=65535),((l+=(h+=n+a)>>>16)+(t+s)&65535)<<16|(h&=65535),this.unsigned)},T.subtract=function(e){return r(e)||(e=p(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){var n,o,i,s,a,l,h,f,d,_,v;return this.isZero()?this:(r(e)||(e=p(e)),t?u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):e.isZero()?this.unsigned?y:m:this.eq(C)?e.isOdd()?C:m:e.eq(C)?this.isOdd()?C:m:this.isNegative()?e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg():e.isNegative()?this.mul(e.neg()).neg():this.lt(g)&&e.lt(g)?c(this.toNumber()*e.toNumber(),this.unsigned):(n=this.high>>>16,o=65535&this.high,i=this.low>>>16,s=65535&this.low,a=e.high>>>16,l=65535&e.high,h=e.low>>>16,v=(v=_=d=f=0)+((d=d+((_+=s*(e=65535&e.low))>>>16)+i*e)>>>16)+((d=(65535&d)+s*h)>>>16),u((d&=65535)<<16|(_&=65535),(f=(f=(f+=(v+=o*e)>>>16)+((v=(65535&v)+i*h)>>>16)+((v=(65535&v)+s*l)>>>16))+(n*e+o*h+i*l+s*a)&65535)<<16|(v&=65535),this.unsigned)))},T.mul=T.multiply,T.divide=function(e){if((e=r(e)?e:p(e)).isZero())throw Error("division by zero");var n,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:m;if(this.unsigned){if((e=e.unsigned?e:e.toUnsigned()).gt(this))return y;if(e.gt(this.shru(1)))return b;o=y}else{if(this.eq(C))return e.eq(v)||e.eq(S)?C:e.eq(C)?v:(i=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?v:S:(n=this.sub(e.mul(i)),i.add(n.div(e)));if(e.eq(C))return this.unsigned?y:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=m}for(n=this;n.gte(e);){for(var i=Math.max(1,Math.floor(n.toNumber()/e.toNumber())),s=Math.ceil(Math.log(i)/Math.LN2),a=s<=48?1:l(2,s-48),h=c(i),f=h.mul(e);f.isNegative()||f.gt(n);)f=(h=c(i-=a,this.unsigned)).mul(e);h.isZero()&&(h=v),o=o.add(h),n=n.sub(f)}return o},T.div=T.divide,T.modulo=function(e){return r(e)||(e=p(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return u(~this.low,~this.high,this.unsigned)},T.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},T.clz=T.countLeadingZeros,T.countTrailingZeros=function(){return this.low?o(this.low):o(this.high)+32},T.ctz=T.countTrailingZeros,T.and=function(e){return r(e)||(e=p(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return r(e)||(e=p(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return r(e)||(e=p(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):u(32===e?this.high:this.high>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.rotateLeft=function(e){var t;return r(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?u(this.low<<e|this.high>>>(t=32-e),this.high<<e|this.low>>>t,this.unsigned):(t=32-(e-=32),u(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},T.rotl=T.rotateLeft,T.rotateRight=function(e){var t;return r(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?u(this.high<<(t=32-e)|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned):(t=32-(e-=32),u(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},T.rotr=T.rotateRight,T.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},e.default=n,"default"in e?e.default:e}({});void 0!==(t=function(){return r}.apply(t,[]))&&(e.exports=t)},function(e,t,n){"use strict";var r=t;function o(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(6),r.BufferWriter=n(25),r.Reader=n(7),r.BufferReader=n(26),r.util=n(1),r.rpc=n(27),r.roots=n(29),r.configure=o,o()},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=new Array(arguments.length-1),r=0,o=2,i=!0;o<arguments.length;)n[r++]=arguments[o++];return new Promise((function(o,s){n[r]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];o.apply(null,t)}};try{e.apply(t||null,n)}catch(e){i&&(i=!1,s(e))}}))}},function(e,t,n){"use strict";t.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;1<--t%4&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),o=new Array(123),i=0;i<64;)o[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;t.encode=function(e,t,n){for(var o,i=null,s=[],a=0,c=0;t<n;){var u=e[t++];switch(c){case 0:s[a++]=r[u>>2],o=(3&u)<<4,c=1;break;case 1:s[a++]=r[o|u>>4],o=(15&u)<<2,c=2;break;case 2:s[a++]=r[o|u>>6],s[a++]=r[63&u],c=0}8191<a&&((i=i||[]).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=r[o],s[a++]=61,1===c)&&(s[a++]=61),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))},t.decode=function(e,t,n){for(var r,i=n,s=0,a=0;a<e.length;){var c=e.charCodeAt(a++);if(61===c&&1<s)break;if(void 0===(c=o[c]))throw Error("invalid encoding");switch(s){case 0:r=c,s=1;break;case 1:t[n++]=r<<2|(48&c)>>4,r=c,s=2;break;case 2:t[n++]=(15&r)<<4|(60&c)>>2,r=c,s=3;break;case 3:t[n++]=(3&r)<<6|c,s=0}}if(1===s)throw Error("invalid encoding");return n-i},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,n){"use strict";function r(){this._listeners={}}(e.exports=r).prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},function(e,t,n){"use strict";function r(e){return"undefined"!=typeof Float32Array?(f=new Float32Array([-0]),_=128===(d=new Uint8Array(f.buffer))[3],e.writeFloatLE=_?y:v,e.writeFloatBE=_?v:y,e.readFloatLE=_?b:S,e.readFloatBE=_?S:b):(e.writeFloatLE=g.bind(null,o),e.writeFloatBE=g.bind(null,i),e.readFloatLE=m.bind(null,s),e.readFloatBE=m.bind(null,a)),"undefined"!=typeof Float64Array?(h=new Float64Array([-0]),_=128===(p=new Uint8Array(h.buffer))[7],e.writeDoubleLE=_?r:c,e.writeDoubleBE=_?c:r,e.readDoubleLE=_?u:l,e.readDoubleBE=_?l:u):(e.writeDoubleLE=t.bind(null,o,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=n.bind(null,s,0,4),e.readDoubleBE=n.bind(null,a,4,0)),e;function t(e,t,n,r,o,i){var s,a,c=r<0?1:0;0===(r=c?-r:r)?(e(0,o,i+t),e(0<1/r?0:2147483648,o,i+n)):isNaN(r)?(e(0,o,i+t),e(2146959360,o,i+n)):17976931348623157e292<r?(e(0,o,i+t),e((c<<31|2146435072)>>>0,o,i+n)):r<22250738585072014e-324?(e((s=r/5e-324)>>>0,o,i+t),e((c<<31|s/4294967296)>>>0,o,i+n)):(1024===(a=Math.floor(Math.log(r)/Math.LN2))&&(a=1023),e(4503599627370496*(s=r*Math.pow(2,-a))>>>0,o,i+t),e((c<<31|a+1023<<20|1048576*s&1048575)>>>0,o,i+n))}function n(e,t,n,r,o){return t=e(r,o+t),r=2*((e=e(r,o+n))>>31)+1,n=4294967296*(1048575&e)+t,2047==(o=e>>>20&2047)?n?NaN:1/0*r:0==o?5e-324*r*n:r*Math.pow(2,o-1075)*(n+4503599627370496)}function r(e,t,n){h[0]=e,t[n]=p[0],t[n+1]=p[1],t[n+2]=p[2],t[n+3]=p[3],t[n+4]=p[4],t[n+5]=p[5],t[n+6]=p[6],t[n+7]=p[7]}function c(e,t,n){h[0]=e,t[n]=p[7],t[n+1]=p[6],t[n+2]=p[5],t[n+3]=p[4],t[n+4]=p[3],t[n+5]=p[2],t[n+6]=p[1],t[n+7]=p[0]}function u(e,t){return p[0]=e[t],p[1]=e[t+1],p[2]=e[t+2],p[3]=e[t+3],p[4]=e[t+4],p[5]=e[t+5],p[6]=e[t+6],p[7]=e[t+7],h[0]}function l(e,t){return p[7]=e[t],p[6]=e[t+1],p[5]=e[t+2],p[4]=e[t+3],p[3]=e[t+4],p[2]=e[t+5],p[1]=e[t+6],p[0]=e[t+7],h[0]}var h,p,f,d,_;function g(e,t,n,r){var o=t<0?1:0;0===(t=o?-t:t)?e(0<1/t?0:2147483648,n,r):isNaN(t)?e(2143289344,n,r):e(34028234663852886e22<t?(o<<31|2139095040)>>>0:t<11754943508222875e-54?(o<<31|Math.round(t/1401298464324817e-60))>>>0:(o<<31|(e=Math.floor(Math.log(t)/Math.LN2))+127<<23|8388607&Math.round(t*Math.pow(2,-e)*8388608))>>>0,n,r)}function m(e,t,n){return t=2*((e=e(t,n))>>31)+1,n=e>>>23&255,e&=8388607,255==n?e?NaN:1/0*t:0==n?1401298464324817e-60*t*e:t*Math.pow(2,n-150)*(8388608+e)}function y(e,t,n){f[0]=e,t[n]=d[0],t[n+1]=d[1],t[n+2]=d[2],t[n+3]=d[3]}function v(e,t,n){f[0]=e,t[n]=d[3],t[n+1]=d[2],t[n+2]=d[1],t[n+3]=d[0]}function b(e,t){return d[0]=e[t],d[1]=e[t+1],d[2]=e[t+2],d[3]=e[t+3],f[0]}function S(e,t){return d[3]=e[t],d[2]=e[t+1],d[1]=e[t+2],d[0]=e[t+3],f[0]}}function o(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function i(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=r(r)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,n){"use strict";t.length=function(e){for(var t,n=0,r=0;r<e.length;++r)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(r+1))?(++r,n+=4):n+=3;return n},t.read=function(e,t,n){if(n-t<1)return"";for(var r,o=null,i=[],s=0;t<n;)(r=e[t++])<128?i[s++]=r:191<r&&r<224?i[s++]=(31&r)<<6|63&e[t++]:239<r&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(r>>10),i[s++]=56320+(1023&r)):i[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],8191<s&&((o=o||[]).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},t.write=function(e,t,n){for(var r,o,i=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(o=e.charCodeAt(s+1)))?(++s,t[n++]=(r=65536+((1023&r)<<10)+(1023&o))>>18|240,t[n++]=r>>12&63|128):t[n++]=r>>12|224,t[n++]=r>>6&63|128),t[n++]=63&r|128);return n-i}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=n||8192,o=r>>>1,i=null,s=r;return function(n){return n<1||o<n?e(n):(r<s+n&&(i=e(r),s=0),n=t.call(i,s,s+=n),7&s&&(s=1+(7|s)),n)}}},function(e,t,n){"use strict";e.exports=o;var r=n(1);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0),s=(i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1},o.zeroHash="\0\0\0\0\0\0\0\0",o.fromNumber=function(e){var t,n;return 0===e?i:(n=(e=(t=e<0)?-e:e)>>>0,e=(e-n)/4294967296>>>0,t&&(e=~e>>>0,n=~n>>>0,4294967295<++n)&&(n=0,4294967295<++e)&&(e=0),new o(n,e))},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(r.isString(e)){if(!r.Long)return o.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){var t;return!e&&this.hi>>>31?(e=1+~this.lo>>>0,t=~this.hi>>>0,-(e+4294967296*(t=e?t:t+1>>>0))):this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}},String.prototype.charCodeAt);o.fromHash=function(e){return"\0\0\0\0\0\0\0\0"===e?i:new o((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0==n?0==t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){"use strict";e.exports=i;var r=n(6),o=((i.prototype=Object.create(r.prototype)).constructor=i,n(1));function i(){r.call(this)}function s(e,t,n){e.length<40?o.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},i.prototype.bytes=function(e){var t=(e=o.isString(e)?o._Buffer_from(e,"base64"):e).length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},function(e,t,n){"use strict";e.exports=i;var r=n(7),o=((i.prototype=Object.create(r.prototype)).constructor=i,n(1));function i(e){r.call(this,e)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},function(e,t,n){"use strict";t.Service=n(28)},function(e,t,n){"use strict";e.exports=o;var r=n(1);function o(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}((o.prototype=Object.create(r.EventEmitter.prototype)).constructor=o).prototype.rpcCall=function e(t,n,o,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,o,i);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof o))try{n=o[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(e){a.emit("error",e,t),setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"proto_accesshub",(function(){return c})),n.d(t,"proto_initconfig",(function(){return u})),n.d(t,"default",(function(){return a}));const o=(t=n(3)).Reader,i=t.Writer,s=t.util,a=t.roots.default||(t.roots.default={}),c=a.proto_accesshub=((n={}).MessageType=(t={},(r=Object.create(t))[t[0]="MSG_TYPE_EMPTY"]=0,r[t[1]="MSG_TYPE_CONNECTION_CLOSED"]=1,r[t[2]="MSG_TYPE_STREAM_CLOSED"]=2,r[t[3]="MSG_TYPE_CLOSE_CONNECTION"]=3,r[t[4]="MSG_TYPE_HTTP_REQUEST"]=4,r[t[5]="MSG_TYPE_HTTP_RESPONSE"]=5,r[t[6]="MSG_TYPE_HTTP_REQUEST_DROPED"]=6,r[t[7]="MSG_TYPE_PROXY_CONNECT"]=7,r[t[8]="MSG_TYPE_PROXY_CONNECTED"]=8,r[t[9]="MSG_TYPE_PROXY_CONNECTION_CLOSED"]=9,r[t[10]="MSG_TYPE_PROXY_SEND_DATA"]=10,r[t[11]="MSG_TYPE_PROXY_RECV_DATA"]=11,r[t[12]="MSG_TYPE_HB_REQUEST"]=12,r[t[13]="MSG_TYPE_HB_RESPONSE"]=13,r[t[14]="MSG_TYPE_GET_CONFIG_REQUEST"]=14,r[t[15]="MSG_TYPE_GET_CONFIG_RESPONSE"]=15,r[t[16]="MSG_TYPE_HTTP_REQUEST_ACK"]=16,r[t[17]="MSG_TYPE_PC_UPWARD_MESSAGE"]=17,r[t[18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK"]=18,r[t[19]="MSG_TYPE_PC_ESTABLISHED"]=19,r[t[20]="MSG_TYPE_PC_BROKEN"]=20,r[t[21]="MSG_TYPE_PC_DOWNWARD_MESSAGE"]=21,r[t[22]="MSG_TYPE_REDIRECT"]=22,r[t[23]="MSG_TYPE_GET_APPCONFIG_REQUEST"]=23,r[t[24]="MSG_TYPE_GET_APPCONFIG_RESPONSE"]=24,r[t[25]="MSG_TYPE_PUSH_APPCONFIG"]=25,r[t[26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST"]=26,r[t[27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE"]=27,r[t[28]="MSG_TYPE_GET_IM_CONFIG_REQUEST"]=28,r[t[29]="MSG_TYPE_GET_IM_CONFIG_RESPONSE"]=29,r[t[30]="MSG_TYPE_PUSH_EXCEPTION"]=30,r[t[50]="MSG_TYPE_UA_DISPATCH_REQUEST"]=50,r[t[51]="MSG_TYPE_UA_DISPATCH_RESPONSE"]=51,r[t[52]="MSG_TYPE_UA_ECHO_REQUEST"]=52,r[t[53]="MSG_TYPE_UA_ECHO_RESPONSE"]=53,r[t[100]="MSG_TYPE_NODE_REGISTER_REQUEST"]=100,r[t[101]="MSG_TYPE_NODE_REGISTER_RESPONSE"]=101,r[t[102]="MSG_TYPE_NODE_HB_REQUEST"]=102,r[t[103]="MSG_TYPE_NODE_HB_RESPONSE"]=103,r),n.ErrorCode=(t={},(r=Object.create(t))[t[0]="OK"]=0,r[t[1e4]="DISPATCH_NO_AVAILABLE_NODE"]=1e4,r[t[10001]="DISPATCH_INTERNAL_ERROR"]=10001,r[t[10002]="DISPATCH_INVALID_FRAME"]=10002,r[t[10003]="DISPATCH_UNMARSHAL"]=10003,r[t[10004]="DISPATCH_MSGTYPE"]=10004,r[t[10005]="DISPATCH_MARSHAL"]=10005,r[t[10006]="DISPATCH_TOO_FREQUENTLY"]=10006,r[t[2e4]="ACCESSHUB_INVALID_FRAME"]=2e4,r[t[20001]="ACCESSHUB_NEED_ENCRYPT"]=20001,r[t[20002]="ACCESSHUB_DECRYPT"]=20002,r[t[20003]="ACCESSHUB_MSGTYPE"]=20003,r[t[20004]="ACCESSHUB_UNMARSHAL"]=20004,r[t[20005]="ACCESSHUB_TIMEOUT"]=20005,r[t[20006]="ACCESSHUB_CONNECT"]=20006,r[t[20007]="ACCESSHUB_BROKEN"]=20007,r[t[20008]="ACCESSHUB_INTERNAL_ERROR"]=20008,r[t[20009]="ACCESSHUB_MARSHAL"]=20009,r[t[20010]="ACCESSHUB_UNSUPPORTED_SERVICE"]=20010,r[t[20011]="ACCESSHUB_TOO_FREQUENTLY"]=20011,r[t[20012]="ACCESSHUB_INVALID_APPID"]=20012,r[t[20013]="ACCESSHUB_HB_TIMEOUT"]=20013,r[t[20014]="ACCESSHUB_INVALID_SIGNATURE"]=20014,r[t[20015]="ACCESSHUB_AUTH_FAILED"]=20015,r[t[3e4]="ACCESSHUB_GET_STREAM_FAILED"]=3e4,r[t[30001]="ACCESSHUB_GET_CONN_FAILED"]=30001,r[t[30002]="ACCESSHUB_DO_HTTP_REQUEST_FAILED"]=30002,r[t[30003]="ACCESSHUB_UNMARSHAL_HB_FAILED"]=30003,r[t[30004]="ACCESSHUB_DO_BACKEND_DISPATCH_FAILED"]=30004,r),n.Mode=(t={},(r=Object.create(t))[t[0]="Mode_UNSET"]=0,r[t[1]="MODE_ONLINE"]=1,r[t[2]="MODE_TEST"]=2,r[t[3]="MODE_ALPHA"]=3,r),n.Service=(t={},(r=Object.create(t))[t[0]="SERVICE_UNSET"]=0,r[t[1]="SERVICE_MEDIAGW"]=1,r[t[2]="SERVICE_LIVEROOM"]=2,r[t[3]="SERVICE_MIX"]=3,r[t[4]="SERVICE_ZEUS"]=4,r[t[5]="SERVICE_ZPUSH"]=5,r[t[6]="SERVICE_L3"]=6,r[t[7]="SERVICE_TALKLINE"]=7,r[t[8]="SERVICE_EDUSUITE"]=8,r[t[9]="SERVICE_ZIM"]=9,r[t[10]="SERVICE_ClOUD_SETTING"]=10,r[t[11]="SERVICE_ZEUSHB"]=11,r[t[12]="SERVICE_USER_LOGIC"]=12,r[t[13]="SERVICE_UNIFYDISPATCH"]=13,r[t[14]="SERVICE_QUALITY"]=14,r[t[15]="SERVICE_SECURITY"]=15,r[t[16]="SERVICE_KTVCPR"]=16,r[t[17]="SERVICE_SWITCH4LIVEROOM"]=17,r[t[18]="SERVICE_WEBRTC_SIGNAL"]=18,r[t[19]="SERVICE_L3_WEBRTC_SIGNAL"]=19,r[t[20]="SERVICE_VIDEOCPR"]=20,r[t[21]="SERVICE_CDN"]=21,r[t[22]="SERVICE_CLOUDRECORD"]=22,r[t[23]="SERVICE_INNER_ECHO"]=23,r[t[24]="SERVICE_OUTER_ECHO"]=24,r[t[25]="SERVICE_LOCALHOST_ECHO"]=25,r[t[26]="SERVICE_ECHO"]=26,r[t[27]="SERVICE_DOCSERVICE"]=27,r[t[28]="SERVICE_AUTHSVR"]=28,r),n.Method=(t={},(r=Object.create(t))[t[0]="METHOD_UNSET"]=0,r[t[1]="METHOD_GET"]=1,r[t[2]="METHOD_POST"]=2,r),n.SdkType=(t={},(r=Object.create(t))[t[0]="SDK_TYPE_UNSET"]=0,r[t[1]="SDK_TYPE_QUIC_MTCP_NATIVE"]=1,r[t[2]="SDK_TYPE_WSS_NATIVE"]=2,r[t[3]="SDK_TYPE_WSS_WEB"]=3,r),n.ZegoconnRunEnv=(t={},(r=Object.create(t))[t[0]="ZEGOCONN_RUN_ENV_UNSET"]=0,r[t[1]="ZEGOCONN_RUN_ENV_BROWSER"]=1,r[t[2]="ZEGOCONN_RUN_ENV_APPLET"]=2,r),n.ConnectionClosed=(ae.prototype.code=0,ae.prototype.msg="",ae.encode=function(e,t){return t=t||i.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),t},ae.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.ConnectionClosed;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.code=e.int32();break;case 2:r.msg=e.string();break;default:e.skipType(7&i)}}return r},ae),n.StreamClosed=(se.prototype.code=0,se.prototype.msg="",se.encode=function(e,t){return t=t||i.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),t},se.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.StreamClosed;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.code=e.int32();break;case 2:r.msg=e.string();break;default:e.skipType(7&i)}}return r},se),n.CloseConnection=(ie.prototype.reason=0,ie.prototype.msg="",ie.prototype.action=0,ie.encode=function(e,t){return t=t||i.create(),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(24).int32(e.action),t},ie.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.CloseConnection;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.reason=e.int32();break;case 2:r.msg=e.string();break;case 3:r.action=e.int32();break;default:e.skipType(7&i)}}return r},ie.Action=(t={},(r=Object.create(t))[t[0]="ACTION_RESERVED"]=0,r[t[1]="ACTION_DISPATCH"]=1,r[t[2]="ACTION_RETRY"]=2,r[t[3]="ACTION_NEXT_NODE"]=3,r[t[4]="ACTION_ABORT"]=4,r[t[5]="ACTION_NEXT_GROUP"]=5,r),ie),n.HTTPRequest=(re.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,re.prototype.appid=0,re.prototype.biz_type=0,re.prototype.mode="",re.prototype.id_name="",re.prototype.reqid="",re.prototype.stick="",re.prototype.service="",re.prototype.location="",re.prototype.method="",re.prototype.headers=s.emptyArray,re.prototype.body=s.newBuffer([]),re.prototype.ack=!1,re.prototype.mode_no=0,re.prototype.service_no=0,re.prototype.method_no=0,re.prototype.sdk_type=0,re.prototype.zegoconn_run_env=0,re.prototype.zegoconn_version=0,re.encode=function(e,t){if(t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(34).string(e.mode),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.reqid&&Object.hasOwnProperty.call(e,"reqid")&&t.uint32(50).string(e.reqid),null!=e.stick&&Object.hasOwnProperty.call(e,"stick")&&t.uint32(58).string(e.stick),null!=e.service&&Object.hasOwnProperty.call(e,"service")&&t.uint32(66).string(e.service),null!=e.location&&Object.hasOwnProperty.call(e,"location")&&t.uint32(74).string(e.location),null!=e.method&&Object.hasOwnProperty.call(e,"method")&&t.uint32(82).string(e.method),null!=e.headers&&e.headers.length)for(let n=0;n<e.headers.length;++n)a.proto_accesshub.HTTPRequest.HTTPHeader.encode(e.headers[n],t.uint32(90).fork()).ldelim();return null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(98).bytes(e.body),null!=e.ack&&Object.hasOwnProperty.call(e,"ack")&&t.uint32(104).bool(e.ack),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(112).int32(e.mode_no),null!=e.service_no&&Object.hasOwnProperty.call(e,"service_no")&&t.uint32(120).int32(e.service_no),null!=e.method_no&&Object.hasOwnProperty.call(e,"method_no")&&t.uint32(128).int32(e.method_no),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(136).int32(e.sdk_type),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(144).int32(e.zegoconn_run_env),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(152).uint32(e.zegoconn_version),t},re.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.HTTPRequest;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.txid=e.uint64();break;case 2:r.appid=e.uint32();break;case 3:r.biz_type=e.uint32();break;case 4:r.mode=e.string();break;case 5:r.id_name=e.string();break;case 6:r.reqid=e.string();break;case 7:r.stick=e.string();break;case 8:r.service=e.string();break;case 9:r.location=e.string();break;case 10:r.method=e.string();break;case 11:r.headers&&r.headers.length||(r.headers=[]),r.headers.push(a.proto_accesshub.HTTPRequest.HTTPHeader.decode(e,e.uint32()));break;case 12:r.body=e.bytes();break;case 13:r.ack=e.bool();break;case 14:r.mode_no=e.int32();break;case 15:r.service_no=e.int32();break;case 16:r.method_no=e.int32();break;case 17:r.sdk_type=e.int32();break;case 18:r.zegoconn_run_env=e.int32();break;case 19:r.zegoconn_version=e.uint32();break;default:e.skipType(7&i)}}return r},re.HTTPHeader=(oe.prototype.name="",oe.prototype.val="",oe.encode=function(e,t){return t=t||i.create(),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.val&&Object.hasOwnProperty.call(e,"val")&&t.uint32(18).string(e.val),t},oe.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.HTTPRequest.HTTPHeader;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.name=e.string();break;case 2:r.val=e.string();break;default:e.skipType(7&i)}}return r},oe),re),n.HTTPResponse=(ne.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,ne.prototype.headers=s.emptyArray,ne.prototype.status_code=0,ne.prototype.body=s.newBuffer([]),ne.encode=function(e,t){if(t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.headers&&e.headers.length)for(let n=0;n<e.headers.length;++n)a.proto_accesshub.HTTPRequest.HTTPHeader.encode(e.headers[n],t.uint32(18).fork()).ldelim();return null!=e.status_code&&Object.hasOwnProperty.call(e,"status_code")&&t.uint32(24).int32(e.status_code),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(34).bytes(e.body),t},ne.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.HTTPResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.txid=e.uint64();break;case 2:r.headers&&r.headers.length||(r.headers=[]),r.headers.push(a.proto_accesshub.HTTPRequest.HTTPHeader.decode(e,e.uint32()));break;case 3:r.status_code=e.int32();break;case 4:r.body=e.bytes();break;default:e.skipType(7&i)}}return r},ne),n.HTTPRequestAck=(te.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,te.encode=function(e,t){return t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),t},te.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.HTTPRequestAck;e.pos<n;){var i=e.uint32();i>>>3==1?r.txid=e.uint64():e.skipType(7&i)}return r},te),n.HTTPRequestDroped=(ee.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,ee.prototype.reason=0,ee.prototype.msg="",ee.encode=function(e,t){return t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(16).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(26).string(e.msg),t},ee.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.HTTPRequestDroped;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.txid=e.uint64();break;case 2:r.reason=e.int32();break;case 3:r.msg=e.string();break;default:e.skipType(7&i)}}return r},ee),n.HBRequest=($.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,$.prototype.ts=s.Long?s.Long.fromBits(0,0,!1):0,$.encode=function(e,t){return t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).int64(e.ts),t},$.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.HBRequest;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.txid=e.uint64();break;case 2:r.ts=e.int64();break;default:e.skipType(7&i)}}return r},$),n.HBResponse=(J.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,J.prototype.ts=s.Long?s.Long.fromBits(0,0,!1):0,J.encode=function(e,t){return t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).int64(e.ts),t},J.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.HBResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.txid=e.uint64();break;case 2:r.ts=e.int64();break;default:e.skipType(7&i)}}return r},J),n.GetConfigRequest=(X.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,X.prototype.appid=0,X.prototype.biz_type=0,X.prototype.mode="",X.prototype.id_name="",X.prototype.reqid="",X.prototype.zegoconn_version=0,X.prototype.sdk_type=0,X.prototype.zegoconn_run_env=0,X.encode=function(e,t){return t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(34).string(e.mode),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.reqid&&Object.hasOwnProperty.call(e,"reqid")&&t.uint32(50).string(e.reqid),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(56).uint32(e.zegoconn_version),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(64).int32(e.sdk_type),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(72).int32(e.zegoconn_run_env),t},X.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.GetConfigRequest;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.txid=e.uint64();break;case 2:r.appid=e.uint32();break;case 3:r.biz_type=e.uint32();break;case 4:r.mode=e.string();break;case 5:r.id_name=e.string();break;case 6:r.reqid=e.string();break;case 7:r.zegoconn_version=e.uint32();break;case 8:r.sdk_type=e.int32();break;case 9:r.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return r},X),n.GetConfigResponseData=(Q.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,Q.prototype.quic_hb_interval=0,Q.prototype.quic_hb_timeout=0,Q.prototype.logic_hb_interval=0,Q.prototype.logic_hb_timeout=0,Q.prototype.pc_establish_timeout=0,Q.prototype.sdk_link_detect_interval=0,Q.prototype.sdk_link_detect_duration=0,Q.prototype.client_outer_ip="",Q.encode=function(e,t){return t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.quic_hb_interval&&Object.hasOwnProperty.call(e,"quic_hb_interval")&&t.uint32(16).uint32(e.quic_hb_interval),null!=e.quic_hb_timeout&&Object.hasOwnProperty.call(e,"quic_hb_timeout")&&t.uint32(24).uint32(e.quic_hb_timeout),null!=e.logic_hb_interval&&Object.hasOwnProperty.call(e,"logic_hb_interval")&&t.uint32(32).uint32(e.logic_hb_interval),null!=e.logic_hb_timeout&&Object.hasOwnProperty.call(e,"logic_hb_timeout")&&t.uint32(40).uint32(e.logic_hb_timeout),null!=e.pc_establish_timeout&&Object.hasOwnProperty.call(e,"pc_establish_timeout")&&t.uint32(48).uint32(e.pc_establish_timeout),null!=e.sdk_link_detect_interval&&Object.hasOwnProperty.call(e,"sdk_link_detect_interval")&&t.uint32(56).uint32(e.sdk_link_detect_interval),null!=e.sdk_link_detect_duration&&Object.hasOwnProperty.call(e,"sdk_link_detect_duration")&&t.uint32(64).uint32(e.sdk_link_detect_duration),null!=e.client_outer_ip&&Object.hasOwnProperty.call(e,"client_outer_ip")&&t.uint32(74).string(e.client_outer_ip),t},Q.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.GetConfigResponseData;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.txid=e.uint64();break;case 2:r.quic_hb_interval=e.uint32();break;case 3:r.quic_hb_timeout=e.uint32();break;case 4:r.logic_hb_interval=e.uint32();break;case 5:r.logic_hb_timeout=e.uint32();break;case 6:r.pc_establish_timeout=e.uint32();break;case 7:r.sdk_link_detect_interval=e.uint32();break;case 8:r.sdk_link_detect_duration=e.uint32();break;case 9:r.client_outer_ip=e.string();break;default:e.skipType(7&i)}}return r},Q),n.GetConfigResponse=(K.prototype.code=0,K.prototype.message="",K.prototype.data=null,K.encode=function(e,t){return t=t||i.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&a.proto_accesshub.GetConfigResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},K.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.GetConfigResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.code=e.int32();break;case 2:r.message=e.string();break;case 3:r.data=a.proto_accesshub.GetConfigResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return r},K),n.PCUpwardMessage=(Z.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,Z.prototype.appid=0,Z.prototype.biz_type=0,Z.prototype.mode_no=0,Z.prototype.id_name="",Z.prototype.service_no=0,Z.prototype.ack=!1,Z.prototype.payload=s.newBuffer([]),Z.prototype.sdk_type=0,Z.prototype.wss_message_type=0,Z.prototype.wss_path="",Z.prototype.wss_raw_query="",Z.prototype.zegoconn_version=0,Z.prototype.zegoconn_run_env=0,Z.encode=function(e,t){return t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.service_no&&Object.hasOwnProperty.call(e,"service_no")&&t.uint32(48).int32(e.service_no),null!=e.ack&&Object.hasOwnProperty.call(e,"ack")&&t.uint32(56).bool(e.ack),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(66).bytes(e.payload),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(72).int32(e.sdk_type),null!=e.wss_message_type&&Object.hasOwnProperty.call(e,"wss_message_type")&&t.uint32(80).uint32(e.wss_message_type),null!=e.wss_path&&Object.hasOwnProperty.call(e,"wss_path")&&t.uint32(90).string(e.wss_path),null!=e.wss_raw_query&&Object.hasOwnProperty.call(e,"wss_raw_query")&&t.uint32(98).string(e.wss_raw_query),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(104).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(112).int32(e.zegoconn_run_env),t},Z.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.PCUpwardMessage;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.txid=e.uint64();break;case 2:r.appid=e.uint32();break;case 3:r.biz_type=e.uint32();break;case 4:r.mode_no=e.int32();break;case 5:r.id_name=e.string();break;case 6:r.service_no=e.int32();break;case 7:r.ack=e.bool();break;case 8:r.payload=e.bytes();break;case 9:r.sdk_type=e.int32();break;case 10:r.wss_message_type=e.uint32();break;case 11:r.wss_path=e.string();break;case 12:r.wss_raw_query=e.string();break;case 13:r.zegoconn_version=e.uint32();break;case 14:r.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return r},Z),n.PCUpwardMessageAck=(W.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,W.encode=function(e,t){return t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),t},W.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.PCUpwardMessageAck;e.pos<n;){var i=e.uint32();i>>>3==1?r.txid=e.uint64():e.skipType(7&i)}return r},W),n.PCEstablished=(Y.prototype.elapse=0,Y.prototype.from=0,Y.encode=function(e,t){return t=t||i.create(),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(8).uint32(e.elapse),null!=e.from&&Object.hasOwnProperty.call(e,"from")&&t.uint32(16).uint32(e.from),t},Y.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.PCEstablished;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.elapse=e.uint32();break;case 2:r.from=e.uint32();break;default:e.skipType(7&i)}}return r},Y),n.PCBroken=(V.encode=function(e,t){return t||i.create()},V.decode=function(e,t){e instanceof o||(e=o.create(e));var n=void 0===t?e.len:e.pos+t;for(t=new a.proto_accesshub.PCBroken;e.pos<n;){var r=e.uint32();e.skipType(7&r)}return t},V),n.PCDownwardMessage=(q.prototype.payload=s.newBuffer([]),q.prototype.wss_message_type=0,q.encode=function(e,t){return t=t||i.create(),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(10).bytes(e.payload),null!=e.wss_message_type&&Object.hasOwnProperty.call(e,"wss_message_type")&&t.uint32(16).uint32(e.wss_message_type),t},q.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.PCDownwardMessage;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.payload=e.bytes();break;case 2:r.wss_message_type=e.uint32();break;default:e.skipType(7&i)}}return r},q),n.Redirect=(F.prototype.rand="",F.prototype.secret="",F.prototype.groups=s.emptyArray,F.prototype.opt_ports=s.emptyArray,F.prototype.wss_groups=s.emptyArray,F.encode=function(e,t){if(t=t||i.create(),null!=e.rand&&Object.hasOwnProperty.call(e,"rand")&&t.uint32(10).string(e.rand),null!=e.secret&&Object.hasOwnProperty.call(e,"secret")&&t.uint32(18).string(e.secret),null!=e.groups&&e.groups.length)for(let n=0;n<e.groups.length;++n)a.proto_accesshub.AccesshubDispatchGroup.encode(e.groups[n],t.uint32(26).fork()).ldelim();if(null!=e.opt_ports&&e.opt_ports.length)for(let n=0;n<e.opt_ports.length;++n)t.uint32(32).uint32(e.opt_ports[n]);if(null!=e.wss_groups&&e.wss_groups.length)for(let n=0;n<e.wss_groups.length;++n)a.proto_accesshub.WssAccesshubDispatchGroup.encode(e.wss_groups[n],t.uint32(42).fork()).ldelim();return t},F.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.Redirect;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.rand=e.string();break;case 2:r.secret=e.string();break;case 3:r.groups&&r.groups.length||(r.groups=[]),r.groups.push(a.proto_accesshub.AccesshubDispatchGroup.decode(e,e.uint32()));break;case 4:if(r.opt_ports&&r.opt_ports.length||(r.opt_ports=[]),2==(7&i))for(var s=e.uint32()+e.pos;e.pos<s;)r.opt_ports.push(e.uint32());else r.opt_ports.push(e.uint32());break;case 5:r.wss_groups&&r.wss_groups.length||(r.wss_groups=[]),r.wss_groups.push(a.proto_accesshub.WssAccesshubDispatchGroup.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},F),n.GetAppConfigRequest=(H.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,H.prototype.appid=0,H.prototype.biz_type=0,H.prototype.mode_no=0,H.prototype.id_name="",H.prototype.config_key="",H.prototype.ts=s.Long?s.Long.fromBits(0,0,!0):0,H.prototype.signature=s.newBuffer([]),H.prototype.lite_sign="",H.prototype.token="",H.prototype.sdk_type=0,H.prototype.zegoconn_version=0,H.prototype.zegoconn_run_env=0,H.encode=function(e,t){return t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.config_key&&Object.hasOwnProperty.call(e,"config_key")&&t.uint32(50).string(e.config_key),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(56).uint64(e.ts),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(66).bytes(e.signature),null!=e.lite_sign&&Object.hasOwnProperty.call(e,"lite_sign")&&t.uint32(74).string(e.lite_sign),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(82).string(e.token),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(88).int32(e.sdk_type),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(96).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(104).int32(e.zegoconn_run_env),t},H.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.GetAppConfigRequest;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.txid=e.uint64();break;case 2:r.appid=e.uint32();break;case 3:r.biz_type=e.uint32();break;case 4:r.mode_no=e.int32();break;case 5:r.id_name=e.string();break;case 6:r.config_key=e.string();break;case 7:r.ts=e.uint64();break;case 8:r.signature=e.bytes();break;case 9:r.lite_sign=e.string();break;case 10:r.token=e.string();break;case 11:r.sdk_type=e.int32();break;case 12:r.zegoconn_version=e.uint32();break;case 13:r.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return r},H),n.GetAppConfigResponseData=(z.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,z.prototype.data=s.newBuffer([]),z.prototype.ts=s.Long?s.Long.fromBits(0,0,!0):0,z.encode=function(e,t){return t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(24).uint64(e.ts),t},z.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.GetAppConfigResponseData;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.txid=e.uint64();break;case 2:r.data=e.bytes();break;case 3:r.ts=e.uint64();break;default:e.skipType(7&i)}}return r},z),n.GetAppConfigResponse=(B.prototype.code=0,B.prototype.message="",B.prototype.data=null,B.encode=function(e,t){return t=t||i.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&a.proto_accesshub.GetAppConfigResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},B.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.GetAppConfigResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.code=e.int32();break;case 2:r.message=e.string();break;case 3:r.data=a.proto_accesshub.GetAppConfigResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return r},B),n.PushAppConfig=(U.prototype.config_key="",U.prototype.data=s.newBuffer([]),U.encode=function(e,t){return t=t||i.create(),null!=e.config_key&&Object.hasOwnProperty.call(e,"config_key")&&t.uint32(10).string(e.config_key),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},U.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.PushAppConfig;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.config_key=e.string();break;case 2:r.data=e.bytes();break;default:e.skipType(7&i)}}return r},U),n.AccesshubDispatchRequest=(j.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,j.prototype.appid=0,j.prototype.biz_type=0,j.prototype.mode_no=0,j.prototype.id_name="",j.prototype.sdk_type=0,j.prototype.zegoconn_version=0,j.prototype.zegoconn_run_env=0,j.encode=function(e,t){return t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(48).int32(e.sdk_type),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(56).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(64).int32(e.zegoconn_run_env),t},j.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.AccesshubDispatchRequest;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.txid=e.uint64();break;case 2:r.appid=e.uint32();break;case 3:r.biz_type=e.uint32();break;case 4:r.mode_no=e.int32();break;case 5:r.id_name=e.string();break;case 6:r.sdk_type=e.int32();break;case 7:r.zegoconn_version=e.uint32();break;case 8:r.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return r},j),n.AccesshubDispatchGroup=(x.prototype.group="",x.prototype.quic_nodes=s.emptyArray,x.prototype.mtcp_nodes=s.emptyArray,x.prototype.wss_nodes=s.emptyArray,x.encode=function(e,t){if(t=t||i.create(),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.quic_nodes&&e.quic_nodes.length)for(let n=0;n<e.quic_nodes.length;++n)t.uint32(18).string(e.quic_nodes[n]);if(null!=e.mtcp_nodes&&e.mtcp_nodes.length)for(let n=0;n<e.mtcp_nodes.length;++n)t.uint32(26).string(e.mtcp_nodes[n]);if(null!=e.wss_nodes&&e.wss_nodes.length)for(let n=0;n<e.wss_nodes.length;++n)t.uint32(34).string(e.wss_nodes[n]);return t},x.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.AccesshubDispatchGroup;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.group=e.string();break;case 2:r.quic_nodes&&r.quic_nodes.length||(r.quic_nodes=[]),r.quic_nodes.push(e.string());break;case 3:r.mtcp_nodes&&r.mtcp_nodes.length||(r.mtcp_nodes=[]),r.mtcp_nodes.push(e.string());break;case 4:r.wss_nodes&&r.wss_nodes.length||(r.wss_nodes=[]),r.wss_nodes.push(e.string());break;default:e.skipType(7&i)}}return r},x),n.WssAccesshubDispatchGroup=(L.prototype.group="",L.prototype.host="",L.encode=function(e,t){return t=t||i.create(),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.host&&Object.hasOwnProperty.call(e,"host")&&t.uint32(18).string(e.host),t},L.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.WssAccesshubDispatchGroup;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.group=e.string();break;case 2:r.host=e.string();break;default:e.skipType(7&i)}}return r},L),n.AccesshubDispatchResponseData=(G.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,G.prototype.rand="",G.prototype.secret="",G.prototype.groups=s.emptyArray,G.prototype.opt_ports=s.emptyArray,G.prototype.wss_groups=s.emptyArray,G.encode=function(e,t){if(t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.rand&&Object.hasOwnProperty.call(e,"rand")&&t.uint32(18).string(e.rand),null!=e.secret&&Object.hasOwnProperty.call(e,"secret")&&t.uint32(26).string(e.secret),null!=e.groups&&e.groups.length)for(let n=0;n<e.groups.length;++n)a.proto_accesshub.AccesshubDispatchGroup.encode(e.groups[n],t.uint32(34).fork()).ldelim();if(null!=e.opt_ports&&e.opt_ports.length)for(let n=0;n<e.opt_ports.length;++n)t.uint32(40).uint32(e.opt_ports[n]);if(null!=e.wss_groups&&e.wss_groups.length)for(let n=0;n<e.wss_groups.length;++n)a.proto_accesshub.WssAccesshubDispatchGroup.encode(e.wss_groups[n],t.uint32(50).fork()).ldelim();return t},G.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.AccesshubDispatchResponseData;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.txid=e.uint64();break;case 2:r.rand=e.string();break;case 3:r.secret=e.string();break;case 4:r.groups&&r.groups.length||(r.groups=[]),r.groups.push(a.proto_accesshub.AccesshubDispatchGroup.decode(e,e.uint32()));break;case 5:if(r.opt_ports&&r.opt_ports.length||(r.opt_ports=[]),2==(7&i))for(var s=e.uint32()+e.pos;e.pos<s;)r.opt_ports.push(e.uint32());else r.opt_ports.push(e.uint32());break;case 6:r.wss_groups&&r.wss_groups.length||(r.wss_groups=[]),r.wss_groups.push(a.proto_accesshub.WssAccesshubDispatchGroup.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},G),n.AccesshubDispatchResponse=(D.prototype.code=0,D.prototype.message="",D.prototype.data=null,D.encode=function(e,t){return t=t||i.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&a.proto_accesshub.AccesshubDispatchResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},D.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.AccesshubDispatchResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.code=e.int32();break;case 2:r.message=e.string();break;case 3:r.data=a.proto_accesshub.AccesshubDispatchResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return r},D),n.GetIMConfigRequest=(R.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,R.prototype.appid=0,R.prototype.mode_no=0,R.prototype.user_id="",R.prototype.config_key="",R.prototype.token="",R.prototype.lite_sign="",R.prototype.sdk_type=0,R.prototype.zegoconn_version=0,R.prototype.zegoconn_run_env=0,R.encode=function(e,t){return t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(24).int32(e.mode_no),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(34).string(e.user_id),null!=e.config_key&&Object.hasOwnProperty.call(e,"config_key")&&t.uint32(42).string(e.config_key),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(50).string(e.token),null!=e.lite_sign&&Object.hasOwnProperty.call(e,"lite_sign")&&t.uint32(58).string(e.lite_sign),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(64).int32(e.sdk_type),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(72).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(80).int32(e.zegoconn_run_env),t},R.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.GetIMConfigRequest;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.txid=e.uint64();break;case 2:r.appid=e.uint32();break;case 3:r.mode_no=e.int32();break;case 4:r.user_id=e.string();break;case 5:r.config_key=e.string();break;case 6:r.token=e.string();break;case 7:r.lite_sign=e.string();break;case 8:r.sdk_type=e.int32();break;case 9:r.zegoconn_version=e.uint32();break;case 10:r.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return r},R),n.GetIMConfigResponseData=(N.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,N.prototype.data=s.newBuffer([]),N.encode=function(e,t){return t=t||i.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},N.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.GetIMConfigResponseData;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.txid=e.uint64();break;case 2:r.data=e.bytes();break;default:e.skipType(7&i)}}return r},N),n.GetIMConfigResponse=(M.prototype.code=0,M.prototype.message="",M.prototype.data=null,M.encode=function(e,t){return t=t||i.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&a.proto_accesshub.GetIMConfigResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},M.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.GetIMConfigResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.code=e.int32();break;case 2:r.message=e.string();break;case 3:r.data=a.proto_accesshub.GetIMConfigResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return r},M),n.PushException=(A.prototype.reason=0,A.prototype.msg="",A.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,A.encode=function(e,t){return t=t||i.create(),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(24).uint64(e.txid),t},A.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_accesshub.PushException;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.reason=e.int32();break;case 2:r.msg=e.string();break;case 3:r.txid=e.uint64();break;default:e.skipType(7&i)}}return r},A),n),u=a.proto_initconfig=((t={}).ProtoVersion=(r={},(n=Object.create(r))[r[0]="RPOTO_V000000"]=0,n[r[65536]="RPOTO_V010000"]=65536,n),t.ResourceType=(r={},(n=Object.create(r))[r[0]="CDN"]=0,n[r[1]="RTC"]=1,n[r[2]="L3"]=2,n),t.ProtocolType=(r={},(n=Object.create(r))[r[0]="UDP"]=0,n[r[1]="RTMP"]=1,n[r[2]="FLV"]=2,n[r[3]="HLS"]=3,n[r[4]="WEBRTC"]=4,n),t.ResolveType=(r={},(n=Object.create(r))[r[0]="LOCAL_DNS"]=0,n[r[1]="DISPATCH"]=1,n),t.AppConfig=(P.prototype.test_id=null,P.prototype.domain=null,P.prototype.flexible_domain=null,P.prototype.replace_flexible_domain=null,Object.defineProperty(P.prototype,"_test_id",{get:s.oneOfGetter(r=["test_id"]),set:s.oneOfSetter(r)}),Object.defineProperty(P.prototype,"_domain",{get:s.oneOfGetter(r=["domain"]),set:s.oneOfSetter(r)}),Object.defineProperty(P.prototype,"_flexible_domain",{get:s.oneOfGetter(r=["flexible_domain"]),set:s.oneOfSetter(r)}),Object.defineProperty(P.prototype,"_replace_flexible_domain",{get:s.oneOfGetter(r=["replace_flexible_domain"]),set:s.oneOfSetter(r)}),P.encode=function(e,t){return t=t||i.create(),null!=e.test_id&&Object.hasOwnProperty.call(e,"test_id")&&t.uint32(8).int32(e.test_id),null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(18).string(e.domain),null!=e.flexible_domain&&Object.hasOwnProperty.call(e,"flexible_domain")&&t.uint32(26).string(e.flexible_domain),null!=e.replace_flexible_domain&&Object.hasOwnProperty.call(e,"replace_flexible_domain")&&t.uint32(34).string(e.replace_flexible_domain),t},P.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.AppConfig;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.test_id=e.int32();break;case 2:r.domain=e.string();break;case 3:r.flexible_domain=e.string();break;case 4:r.replace_flexible_domain=e.string();break;default:e.skipType(7&i)}}return r},P),t.RoomConfig=(k.prototype.license_url=null,Object.defineProperty(k.prototype,"_license_url",{get:s.oneOfGetter(n=["license_url"]),set:s.oneOfSetter(n)}),k.encode=function(e,t){return t=t||i.create(),null!=e.license_url&&Object.hasOwnProperty.call(e,"license_url")&&t.uint32(10).string(e.license_url),t},k.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.RoomConfig;e.pos<n;){var i=e.uint32();i>>>3==1?r.license_url=e.string():e.skipType(7&i)}return r},k),t.VEConfig=(I.prototype.audio_session_protect=null,Object.defineProperty(I.prototype,"_audio_session_protect",{get:s.oneOfGetter(r=["audio_session_protect"]),set:s.oneOfSetter(r)}),I.encode=function(e,t){return t=t||i.create(),null!=e.audio_session_protect&&Object.hasOwnProperty.call(e,"audio_session_protect")&&t.uint32(8).int32(e.audio_session_protect),t},I.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.VEConfig;e.pos<n;){var i=e.uint32();i>>>3==1?r.audio_session_protect=e.int32():e.skipType(7&i)}return r},I),t.SpeedlogConfig=(w.prototype.report_count=null,w.prototype.report_retry_interval=null,w.prototype.push_quality_sample_count=null,w.prototype.pull_quality_sample_count=null,w.prototype.hardware_report_cycle=null,w.prototype.room_user_max_count=null,w.prototype.room_stream_max_count=null,w.prototype.charge_info_report_cycle=null,w.prototype.charge_info_report_mode=null,w.prototype.disable_report_pull=s.emptyArray,w.prototype.report_max_bytes=null,Object.defineProperty(w.prototype,"_report_count",{get:s.oneOfGetter(n=["report_count"]),set:s.oneOfSetter(n)}),Object.defineProperty(w.prototype,"_report_retry_interval",{get:s.oneOfGetter(n=["report_retry_interval"]),set:s.oneOfSetter(n)}),Object.defineProperty(w.prototype,"_push_quality_sample_count",{get:s.oneOfGetter(n=["push_quality_sample_count"]),set:s.oneOfSetter(n)}),Object.defineProperty(w.prototype,"_pull_quality_sample_count",{get:s.oneOfGetter(n=["pull_quality_sample_count"]),set:s.oneOfSetter(n)}),Object.defineProperty(w.prototype,"_hardware_report_cycle",{get:s.oneOfGetter(n=["hardware_report_cycle"]),set:s.oneOfSetter(n)}),Object.defineProperty(w.prototype,"_room_user_max_count",{get:s.oneOfGetter(n=["room_user_max_count"]),set:s.oneOfSetter(n)}),Object.defineProperty(w.prototype,"_room_stream_max_count",{get:s.oneOfGetter(n=["room_stream_max_count"]),set:s.oneOfSetter(n)}),Object.defineProperty(w.prototype,"_charge_info_report_cycle",{get:s.oneOfGetter(n=["charge_info_report_cycle"]),set:s.oneOfSetter(n)}),Object.defineProperty(w.prototype,"_charge_info_report_mode",{get:s.oneOfGetter(n=["charge_info_report_mode"]),set:s.oneOfSetter(n)}),Object.defineProperty(w.prototype,"_report_max_bytes",{get:s.oneOfGetter(n=["report_max_bytes"]),set:s.oneOfSetter(n)}),w.encode=function(e,t){if(t=t||i.create(),null!=e.report_count&&Object.hasOwnProperty.call(e,"report_count")&&t.uint32(8).int32(e.report_count),null!=e.report_retry_interval&&Object.hasOwnProperty.call(e,"report_retry_interval")&&t.uint32(16).int32(e.report_retry_interval),null!=e.push_quality_sample_count&&Object.hasOwnProperty.call(e,"push_quality_sample_count")&&t.uint32(24).int32(e.push_quality_sample_count),null!=e.pull_quality_sample_count&&Object.hasOwnProperty.call(e,"pull_quality_sample_count")&&t.uint32(32).int32(e.pull_quality_sample_count),null!=e.hardware_report_cycle&&Object.hasOwnProperty.call(e,"hardware_report_cycle")&&t.uint32(40).int32(e.hardware_report_cycle),null!=e.room_user_max_count&&Object.hasOwnProperty.call(e,"room_user_max_count")&&t.uint32(48).int32(e.room_user_max_count),null!=e.room_stream_max_count&&Object.hasOwnProperty.call(e,"room_stream_max_count")&&t.uint32(56).int32(e.room_stream_max_count),null!=e.charge_info_report_cycle&&Object.hasOwnProperty.call(e,"charge_info_report_cycle")&&t.uint32(64).int32(e.charge_info_report_cycle),null!=e.charge_info_report_mode&&Object.hasOwnProperty.call(e,"charge_info_report_mode")&&t.uint32(72).int32(e.charge_info_report_mode),null!=e.disable_report_pull&&e.disable_report_pull.length){t.uint32(82).fork();for(let n=0;n<e.disable_report_pull.length;++n)t.int32(e.disable_report_pull[n]);t.ldelim()}return null!=e.report_max_bytes&&Object.hasOwnProperty.call(e,"report_max_bytes")&&t.uint32(88).int32(e.report_max_bytes),t},w.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.SpeedlogConfig;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.report_count=e.int32();break;case 2:r.report_retry_interval=e.int32();break;case 3:r.push_quality_sample_count=e.int32();break;case 4:r.pull_quality_sample_count=e.int32();break;case 5:r.hardware_report_cycle=e.int32();break;case 6:r.room_user_max_count=e.int32();break;case 7:r.room_stream_max_count=e.int32();break;case 8:r.charge_info_report_cycle=e.int32();break;case 9:r.charge_info_report_mode=e.int32();break;case 10:if(r.disable_report_pull&&r.disable_report_pull.length||(r.disable_report_pull=[]),2==(7&i))for(var s=e.uint32()+e.pos;e.pos<s;)r.disable_report_pull.push(e.int32());else r.disable_report_pull.push(e.int32());break;case 11:r.report_max_bytes=e.int32();break;default:e.skipType(7&i)}}return r},w),t.MediaServiceProtocolInfo=(T.prototype.config_id=null,T.prototype.protocol=null,T.prototype.url_template=null,T.prototype.resolve_type=null,T.prototype.push_cdn_authentication=null,T.prototype.cdn_quic_version=s.emptyArray,Object.defineProperty(T.prototype,"_config_id",{get:s.oneOfGetter(r=["config_id"]),set:s.oneOfSetter(r)}),Object.defineProperty(T.prototype,"_protocol",{get:s.oneOfGetter(r=["protocol"]),set:s.oneOfSetter(r)}),Object.defineProperty(T.prototype,"_url_template",{get:s.oneOfGetter(r=["url_template"]),set:s.oneOfSetter(r)}),Object.defineProperty(T.prototype,"_resolve_type",{get:s.oneOfGetter(r=["resolve_type"]),set:s.oneOfSetter(r)}),Object.defineProperty(T.prototype,"_push_cdn_authentication",{get:s.oneOfGetter(r=["push_cdn_authentication"]),set:s.oneOfSetter(r)}),T.encode=function(e,t){if(t=t||i.create(),null!=e.config_id&&Object.hasOwnProperty.call(e,"config_id")&&t.uint32(10).string(e.config_id),null!=e.protocol&&Object.hasOwnProperty.call(e,"protocol")&&t.uint32(16).int32(e.protocol),null!=e.url_template&&Object.hasOwnProperty.call(e,"url_template")&&t.uint32(26).string(e.url_template),null!=e.resolve_type&&Object.hasOwnProperty.call(e,"resolve_type")&&t.uint32(32).int32(e.resolve_type),null!=e.push_cdn_authentication&&Object.hasOwnProperty.call(e,"push_cdn_authentication")&&t.uint32(40).int32(e.push_cdn_authentication),null!=e.cdn_quic_version&&e.cdn_quic_version.length){t.uint32(50).fork();for(let n=0;n<e.cdn_quic_version.length;++n)t.int32(e.cdn_quic_version[n]);t.ldelim()}return t},T.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.MediaServiceProtocolInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.config_id=e.string();break;case 2:r.protocol=e.int32();break;case 3:r.url_template=e.string();break;case 4:r.resolve_type=e.int32();break;case 5:r.push_cdn_authentication=e.int32();break;case 6:if(r.cdn_quic_version&&r.cdn_quic_version.length||(r.cdn_quic_version=[]),2==(7&i))for(var s=e.uint32()+e.pos;e.pos<s;)r.cdn_quic_version.push(e.int32());else r.cdn_quic_version.push(e.int32());break;default:e.skipType(7&i)}}return r},T),t.MediaResourceInfo=(C.prototype.resource_type=null,C.prototype.service_info=s.emptyArray,Object.defineProperty(C.prototype,"_resource_type",{get:s.oneOfGetter(n=["resource_type"]),set:s.oneOfSetter(n)}),C.encode=function(e,t){if(t=t||i.create(),null!=e.resource_type&&Object.hasOwnProperty.call(e,"resource_type")&&t.uint32(8).int32(e.resource_type),null!=e.service_info&&e.service_info.length)for(let n=0;n<e.service_info.length;++n)a.proto_initconfig.MediaServiceProtocolInfo.encode(e.service_info[n],t.uint32(18).fork()).ldelim();return t},C.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.MediaResourceInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.resource_type=e.int32();break;case 2:r.service_info&&r.service_info.length||(r.service_info=[]),r.service_info.push(a.proto_initconfig.MediaServiceProtocolInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},C),t.TrafficControl=(O.prototype.enable_traffic_control=null,O.prototype.traffic_properties=null,Object.defineProperty(O.prototype,"_enable_traffic_control",{get:s.oneOfGetter(r=["enable_traffic_control"]),set:s.oneOfSetter(r)}),Object.defineProperty(O.prototype,"_traffic_properties",{get:s.oneOfGetter(r=["traffic_properties"]),set:s.oneOfSetter(r)}),O.encode=function(e,t){return t=t||i.create(),null!=e.enable_traffic_control&&Object.hasOwnProperty.call(e,"enable_traffic_control")&&t.uint32(8).int32(e.enable_traffic_control),null!=e.traffic_properties&&Object.hasOwnProperty.call(e,"traffic_properties")&&t.uint32(16).int32(e.traffic_properties),t},O.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.TrafficControl;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.enable_traffic_control=e.int32();break;case 2:r.traffic_properties=e.int32();break;default:e.skipType(7&i)}}return r},O),t.SupplementFrameControl=(E.prototype.enable=null,E.prototype.threshold=null,E.prototype.probability=null,Object.defineProperty(E.prototype,"_enable",{get:s.oneOfGetter(n=["enable"]),set:s.oneOfSetter(n)}),Object.defineProperty(E.prototype,"_threshold",{get:s.oneOfGetter(n=["threshold"]),set:s.oneOfSetter(n)}),Object.defineProperty(E.prototype,"_probability",{get:s.oneOfGetter(n=["probability"]),set:s.oneOfSetter(n)}),E.encode=function(e,t){return t=t||i.create(),null!=e.enable&&Object.hasOwnProperty.call(e,"enable")&&t.uint32(8).int32(e.enable),null!=e.threshold&&Object.hasOwnProperty.call(e,"threshold")&&t.uint32(16).int32(e.threshold),null!=e.probability&&Object.hasOwnProperty.call(e,"probability")&&t.uint32(24).int32(e.probability),t},E.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.SupplementFrameControl;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.enable=e.int32();break;case 2:r.threshold=e.int32();break;case 3:r.probability=e.int32();break;default:e.skipType(7&i)}}return r},E),t.VideoParam=(S.prototype.video_width=null,S.prototype.video_height=null,S.prototype.video_codec_id=null,S.prototype.video_bitrate=null,Object.defineProperty(S.prototype,"_video_width",{get:s.oneOfGetter(r=["video_width"]),set:s.oneOfSetter(r)}),Object.defineProperty(S.prototype,"_video_height",{get:s.oneOfGetter(r=["video_height"]),set:s.oneOfSetter(r)}),Object.defineProperty(S.prototype,"_video_codec_id",{get:s.oneOfGetter(r=["video_codec_id"]),set:s.oneOfSetter(r)}),Object.defineProperty(S.prototype,"_video_bitrate",{get:s.oneOfGetter(r=["video_bitrate"]),set:s.oneOfSetter(r)}),S.encode=function(e,t){return t=t||i.create(),null!=e.video_width&&Object.hasOwnProperty.call(e,"video_width")&&t.uint32(8).int32(e.video_width),null!=e.video_height&&Object.hasOwnProperty.call(e,"video_height")&&t.uint32(16).int32(e.video_height),null!=e.video_codec_id&&Object.hasOwnProperty.call(e,"video_codec_id")&&t.uint32(24).int32(e.video_codec_id),null!=e.video_bitrate&&Object.hasOwnProperty.call(e,"video_bitrate")&&t.uint32(32).int32(e.video_bitrate),t},S.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.VideoParam;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.video_width=e.int32();break;case 2:r.video_height=e.int32();break;case 3:r.video_codec_id=e.int32();break;case 4:r.video_bitrate=e.int32();break;default:e.skipType(7&i)}}return r},S),t.PushConfig=(b.prototype.channel_idx=null,b.prototype.mode=null,b.prototype.traffic_control=null,b.prototype.resolution_rate=null,b.prototype.video_param=s.emptyArray,Object.defineProperty(b.prototype,"_channel_idx",{get:s.oneOfGetter(n=["channel_idx"]),set:s.oneOfSetter(n)}),Object.defineProperty(b.prototype,"_mode",{get:s.oneOfGetter(n=["mode"]),set:s.oneOfSetter(n)}),Object.defineProperty(b.prototype,"_traffic_control",{get:s.oneOfGetter(n=["traffic_control"]),set:s.oneOfSetter(n)}),Object.defineProperty(b.prototype,"_resolution_rate",{get:s.oneOfGetter(n=["resolution_rate"]),set:s.oneOfSetter(n)}),b.encode=function(e,t){if(t=t||i.create(),null!=e.channel_idx&&Object.hasOwnProperty.call(e,"channel_idx")&&t.uint32(8).int32(e.channel_idx),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(16).int32(e.mode),null!=e.traffic_control&&Object.hasOwnProperty.call(e,"traffic_control")&&a.proto_initconfig.TrafficControl.encode(e.traffic_control,t.uint32(42).fork()).ldelim(),null!=e.resolution_rate&&Object.hasOwnProperty.call(e,"resolution_rate")&&t.uint32(48).int32(e.resolution_rate),null!=e.video_param&&e.video_param.length)for(let n=0;n<e.video_param.length;++n)a.proto_initconfig.VideoParam.encode(e.video_param[n],t.uint32(58).fork()).ldelim();return t},b.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.PushConfig;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.channel_idx=e.int32();break;case 2:r.mode=e.int32();break;case 5:r.traffic_control=a.proto_initconfig.TrafficControl.decode(e,e.uint32());break;case 6:r.resolution_rate=e.int32();break;case 7:r.video_param&&r.video_param.length||(r.video_param=[]),r.video_param.push(a.proto_initconfig.VideoParam.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},b),t.MediaPublishConfig=(v.prototype.push_type=null,v.prototype.resource_info=s.emptyArray,v.prototype.push_config=s.emptyArray,Object.defineProperty(v.prototype,"_push_type",{get:s.oneOfGetter(r=["push_type"]),set:s.oneOfSetter(r)}),v.encode=function(e,t){if(t=t||i.create(),null!=e.push_type&&Object.hasOwnProperty.call(e,"push_type")&&t.uint32(8).int32(e.push_type),null!=e.resource_info&&e.resource_info.length)for(let n=0;n<e.resource_info.length;++n)a.proto_initconfig.MediaResourceInfo.encode(e.resource_info[n],t.uint32(18).fork()).ldelim();if(null!=e.push_config&&e.push_config.length)for(let n=0;n<e.push_config.length;++n)a.proto_initconfig.PushConfig.encode(e.push_config[n],t.uint32(26).fork()).ldelim();return t},v.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.MediaPublishConfig;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.push_type=e.int32();break;case 2:r.resource_info&&r.resource_info.length||(r.resource_info=[]),r.resource_info.push(a.proto_initconfig.MediaResourceInfo.decode(e,e.uint32()));break;case 3:r.push_config&&r.push_config.length||(r.push_config=[]),r.push_config.push(a.proto_initconfig.PushConfig.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},v),t.TranscodingConfig=(y.prototype.video_codec_h264=null,Object.defineProperty(y.prototype,"_video_codec_h264",{get:s.oneOfGetter(n=["video_codec_h264"]),set:s.oneOfSetter(n)}),y.encode=function(e,t){return t=t||i.create(),null!=e.video_codec_h264&&Object.hasOwnProperty.call(e,"video_codec_h264")&&t.uint32(10).string(e.video_codec_h264),t},y.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.TranscodingConfig;e.pos<n;){var i=e.uint32();i>>>3==1?r.video_codec_h264=e.string():e.skipType(7&i)}return r},y),t.MediaPlayConfig=(m.prototype.pull_type=null,m.prototype.l3_play_buffer_ms=null,m.prototype.allow_playing_specific_url=null,m.prototype.resource_order=s.emptyArray,m.prototype.resource_info=s.emptyArray,m.prototype.play_order_protocol_type=s.emptyArray,m.prototype.jitter_buffer_flag=null,m.prototype.min_jitter_buffer=null,m.prototype.max_jitter_buffer=null,m.prototype.supplement_frame_control=null,m.prototype.open_l3_play_resource_prefer=null,m.prototype.switch_to_l3_after_online=null,m.prototype.transcoding=null,Object.defineProperty(m.prototype,"_pull_type",{get:s.oneOfGetter(r=["pull_type"]),set:s.oneOfSetter(r)}),Object.defineProperty(m.prototype,"_l3_play_buffer_ms",{get:s.oneOfGetter(r=["l3_play_buffer_ms"]),set:s.oneOfSetter(r)}),Object.defineProperty(m.prototype,"_allow_playing_specific_url",{get:s.oneOfGetter(r=["allow_playing_specific_url"]),set:s.oneOfSetter(r)}),Object.defineProperty(m.prototype,"_jitter_buffer_flag",{get:s.oneOfGetter(r=["jitter_buffer_flag"]),set:s.oneOfSetter(r)}),Object.defineProperty(m.prototype,"_min_jitter_buffer",{get:s.oneOfGetter(r=["min_jitter_buffer"]),set:s.oneOfSetter(r)}),Object.defineProperty(m.prototype,"_max_jitter_buffer",{get:s.oneOfGetter(r=["max_jitter_buffer"]),set:s.oneOfSetter(r)}),Object.defineProperty(m.prototype,"_supplement_frame_control",{get:s.oneOfGetter(r=["supplement_frame_control"]),set:s.oneOfSetter(r)}),Object.defineProperty(m.prototype,"_open_l3_play_resource_prefer",{get:s.oneOfGetter(r=["open_l3_play_resource_prefer"]),set:s.oneOfSetter(r)}),Object.defineProperty(m.prototype,"_switch_to_l3_after_online",{get:s.oneOfGetter(r=["switch_to_l3_after_online"]),set:s.oneOfSetter(r)}),Object.defineProperty(m.prototype,"_transcoding",{get:s.oneOfGetter(r=["transcoding"]),set:s.oneOfSetter(r)}),m.encode=function(e,t){if(t=t||i.create(),null!=e.pull_type&&Object.hasOwnProperty.call(e,"pull_type")&&t.uint32(8).int32(e.pull_type),null!=e.l3_play_buffer_ms&&Object.hasOwnProperty.call(e,"l3_play_buffer_ms")&&t.uint32(16).int32(e.l3_play_buffer_ms),null!=e.allow_playing_specific_url&&Object.hasOwnProperty.call(e,"allow_playing_specific_url")&&t.uint32(24).int32(e.allow_playing_specific_url),null!=e.resource_order&&e.resource_order.length){t.uint32(34).fork();for(let n=0;n<e.resource_order.length;++n)t.int32(e.resource_order[n]);t.ldelim()}if(null!=e.resource_info&&e.resource_info.length)for(let n=0;n<e.resource_info.length;++n)a.proto_initconfig.MediaResourceInfo.encode(e.resource_info[n],t.uint32(42).fork()).ldelim();if(null!=e.play_order_protocol_type&&e.play_order_protocol_type.length){t.uint32(50).fork();for(let n=0;n<e.play_order_protocol_type.length;++n)t.int32(e.play_order_protocol_type[n]);t.ldelim()}return null!=e.jitter_buffer_flag&&Object.hasOwnProperty.call(e,"jitter_buffer_flag")&&t.uint32(80).int32(e.jitter_buffer_flag),null!=e.min_jitter_buffer&&Object.hasOwnProperty.call(e,"min_jitter_buffer")&&t.uint32(88).int32(e.min_jitter_buffer),null!=e.max_jitter_buffer&&Object.hasOwnProperty.call(e,"max_jitter_buffer")&&t.uint32(96).int32(e.max_jitter_buffer),null!=e.supplement_frame_control&&Object.hasOwnProperty.call(e,"supplement_frame_control")&&a.proto_initconfig.SupplementFrameControl.encode(e.supplement_frame_control,t.uint32(106).fork()).ldelim(),null!=e.open_l3_play_resource_prefer&&Object.hasOwnProperty.call(e,"open_l3_play_resource_prefer")&&t.uint32(112).int32(e.open_l3_play_resource_prefer),null!=e.switch_to_l3_after_online&&Object.hasOwnProperty.call(e,"switch_to_l3_after_online")&&t.uint32(120).int32(e.switch_to_l3_after_online),null!=e.transcoding&&Object.hasOwnProperty.call(e,"transcoding")&&a.proto_initconfig.TranscodingConfig.encode(e.transcoding,t.uint32(130).fork()).ldelim(),t},m.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.MediaPlayConfig;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.pull_type=e.int32();break;case 2:r.l3_play_buffer_ms=e.int32();break;case 3:r.allow_playing_specific_url=e.int32();break;case 4:if(r.resource_order&&r.resource_order.length||(r.resource_order=[]),2==(7&i))for(var s=e.uint32()+e.pos;e.pos<s;)r.resource_order.push(e.int32());else r.resource_order.push(e.int32());break;case 5:r.resource_info&&r.resource_info.length||(r.resource_info=[]),r.resource_info.push(a.proto_initconfig.MediaResourceInfo.decode(e,e.uint32()));break;case 6:if(r.play_order_protocol_type&&r.play_order_protocol_type.length||(r.play_order_protocol_type=[]),2==(7&i))for(var c=e.uint32()+e.pos;e.pos<c;)r.play_order_protocol_type.push(e.int32());else r.play_order_protocol_type.push(e.int32());break;case 10:r.jitter_buffer_flag=e.int32();break;case 11:r.min_jitter_buffer=e.int32();break;case 12:r.max_jitter_buffer=e.int32();break;case 13:r.supplement_frame_control=a.proto_initconfig.SupplementFrameControl.decode(e,e.uint32());break;case 14:r.open_l3_play_resource_prefer=e.int32();break;case 15:r.switch_to_l3_after_online=e.int32();break;case 16:r.transcoding=a.proto_initconfig.TranscodingConfig.decode(e,e.uint32());break;default:e.skipType(7&i)}}return r},m),t.MediaDispatchProtocolInfo=(g.prototype.protocol=null,g.prototype.url_template=null,g.prototype.reusable=null,Object.defineProperty(g.prototype,"_protocol",{get:s.oneOfGetter(n=["protocol"]),set:s.oneOfSetter(n)}),Object.defineProperty(g.prototype,"_url_template",{get:s.oneOfGetter(n=["url_template"]),set:s.oneOfSetter(n)}),Object.defineProperty(g.prototype,"_reusable",{get:s.oneOfGetter(n=["reusable"]),set:s.oneOfSetter(n)}),g.encode=function(e,t){return t=t||i.create(),null!=e.protocol&&Object.hasOwnProperty.call(e,"protocol")&&t.uint32(8).int32(e.protocol),null!=e.url_template&&Object.hasOwnProperty.call(e,"url_template")&&t.uint32(18).string(e.url_template),null!=e.reusable&&Object.hasOwnProperty.call(e,"reusable")&&t.uint32(24).int32(e.reusable),t},g.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.MediaDispatchProtocolInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.protocol=e.int32();break;case 2:r.url_template=e.string();break;case 3:r.reusable=e.int32();break;default:e.skipType(7&i)}}return r},g),t.MediaDispatchResourceInfo=(_.prototype.resource_type=null,_.prototype.dispatch_protocol_info=s.emptyArray,Object.defineProperty(_.prototype,"_resource_type",{get:s.oneOfGetter(r=["resource_type"]),set:s.oneOfSetter(r)}),_.encode=function(e,t){if(t=t||i.create(),null!=e.resource_type&&Object.hasOwnProperty.call(e,"resource_type")&&t.uint32(8).int32(e.resource_type),null!=e.dispatch_protocol_info&&e.dispatch_protocol_info.length)for(let n=0;n<e.dispatch_protocol_info.length;++n)a.proto_initconfig.MediaDispatchProtocolInfo.encode(e.dispatch_protocol_info[n],t.uint32(18).fork()).ldelim();return t},_.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.MediaDispatchResourceInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.resource_type=e.int32();break;case 2:r.dispatch_protocol_info&&r.dispatch_protocol_info.length||(r.dispatch_protocol_info=[]),r.dispatch_protocol_info.push(a.proto_initconfig.MediaDispatchProtocolInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},_),t.MediaDispatchConfig=(d.prototype.dispatch_resource_info=s.emptyArray,d.encode=function(e,t){if(t=t||i.create(),null!=e.dispatch_resource_info&&e.dispatch_resource_info.length)for(let n=0;n<e.dispatch_resource_info.length;++n)a.proto_initconfig.MediaDispatchResourceInfo.encode(e.dispatch_resource_info[n],t.uint32(10).fork()).ldelim();return t},d.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.MediaDispatchConfig;e.pos<n;){var i=e.uint32();i>>>3==1?(r.dispatch_resource_info&&r.dispatch_resource_info.length||(r.dispatch_resource_info=[]),r.dispatch_resource_info.push(a.proto_initconfig.MediaDispatchResourceInfo.decode(e,e.uint32()))):e.skipType(7&i)}return r},d),t.MediaServiceUrlList=(f.prototype.base_url=null,f.prototype.push_status_url=null,Object.defineProperty(f.prototype,"_base_url",{get:s.oneOfGetter(n=["base_url"]),set:s.oneOfSetter(n)}),Object.defineProperty(f.prototype,"_push_status_url",{get:s.oneOfGetter(n=["push_status_url"]),set:s.oneOfSetter(n)}),f.encode=function(e,t){return t=t||i.create(),null!=e.base_url&&Object.hasOwnProperty.call(e,"base_url")&&t.uint32(10).string(e.base_url),null!=e.push_status_url&&Object.hasOwnProperty.call(e,"push_status_url")&&t.uint32(18).string(e.push_status_url),t},f.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.MediaServiceUrlList;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.base_url=e.string();break;case 2:r.push_status_url=e.string();break;default:e.skipType(7&i)}}return r},f),t.ZeusMediaConfig=(p.prototype.push_dispatch_type=null,p.prototype.pull_dispatch_type=null,p.prototype.open_auth=null,p.prototype.send_anchor_login_after_push_cdn=null,Object.defineProperty(p.prototype,"_push_dispatch_type",{get:s.oneOfGetter(r=["push_dispatch_type"]),set:s.oneOfSetter(r)}),Object.defineProperty(p.prototype,"_pull_dispatch_type",{get:s.oneOfGetter(r=["pull_dispatch_type"]),set:s.oneOfSetter(r)}),Object.defineProperty(p.prototype,"_open_auth",{get:s.oneOfGetter(r=["open_auth"]),set:s.oneOfSetter(r)}),Object.defineProperty(p.prototype,"_send_anchor_login_after_push_cdn",{get:s.oneOfGetter(r=["send_anchor_login_after_push_cdn"]),set:s.oneOfSetter(r)}),p.encode=function(e,t){return t=t||i.create(),null!=e.push_dispatch_type&&Object.hasOwnProperty.call(e,"push_dispatch_type")&&t.uint32(8).int32(e.push_dispatch_type),null!=e.pull_dispatch_type&&Object.hasOwnProperty.call(e,"pull_dispatch_type")&&t.uint32(16).int32(e.pull_dispatch_type),null!=e.open_auth&&Object.hasOwnProperty.call(e,"open_auth")&&t.uint32(24).int32(e.open_auth),null!=e.send_anchor_login_after_push_cdn&&Object.hasOwnProperty.call(e,"send_anchor_login_after_push_cdn")&&t.uint32(32).int32(e.send_anchor_login_after_push_cdn),t},p.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.ZeusMediaConfig;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.push_dispatch_type=e.int32();break;case 2:r.pull_dispatch_type=e.int32();break;case 3:r.open_auth=e.int32();break;case 4:r.send_anchor_login_after_push_cdn=e.int32();break;default:e.skipType(7&i)}}return r},p),t.MediaConfig=(h.prototype.play_config=null,h.prototype.publish_config=null,h.prototype.dispatch_config=null,h.prototype.service_url_list=null,h.prototype.zeus_config=null,Object.defineProperty(h.prototype,"_play_config",{get:s.oneOfGetter(n=["play_config"]),set:s.oneOfSetter(n)}),Object.defineProperty(h.prototype,"_publish_config",{get:s.oneOfGetter(n=["publish_config"]),set:s.oneOfSetter(n)}),Object.defineProperty(h.prototype,"_dispatch_config",{get:s.oneOfGetter(n=["dispatch_config"]),set:s.oneOfSetter(n)}),Object.defineProperty(h.prototype,"_service_url_list",{get:s.oneOfGetter(n=["service_url_list"]),set:s.oneOfSetter(n)}),Object.defineProperty(h.prototype,"_zeus_config",{get:s.oneOfGetter(n=["zeus_config"]),set:s.oneOfSetter(n)}),h.encode=function(e,t){return t=t||i.create(),null!=e.play_config&&Object.hasOwnProperty.call(e,"play_config")&&a.proto_initconfig.MediaPlayConfig.encode(e.play_config,t.uint32(10).fork()).ldelim(),null!=e.publish_config&&Object.hasOwnProperty.call(e,"publish_config")&&a.proto_initconfig.MediaPublishConfig.encode(e.publish_config,t.uint32(18).fork()).ldelim(),null!=e.dispatch_config&&Object.hasOwnProperty.call(e,"dispatch_config")&&a.proto_initconfig.MediaDispatchConfig.encode(e.dispatch_config,t.uint32(26).fork()).ldelim(),null!=e.service_url_list&&Object.hasOwnProperty.call(e,"service_url_list")&&a.proto_initconfig.MediaServiceUrlList.encode(e.service_url_list,t.uint32(34).fork()).ldelim(),null!=e.zeus_config&&Object.hasOwnProperty.call(e,"zeus_config")&&a.proto_initconfig.ZeusMediaConfig.encode(e.zeus_config,t.uint32(42).fork()).ldelim(),t},h.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.MediaConfig;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.play_config=a.proto_initconfig.MediaPlayConfig.decode(e,e.uint32());break;case 2:r.publish_config=a.proto_initconfig.MediaPublishConfig.decode(e,e.uint32());break;case 3:r.dispatch_config=a.proto_initconfig.MediaDispatchConfig.decode(e,e.uint32());break;case 4:r.service_url_list=a.proto_initconfig.MediaServiceUrlList.decode(e,e.uint32());break;case 5:r.zeus_config=a.proto_initconfig.ZeusMediaConfig.decode(e,e.uint32());break;default:e.skipType(7&i)}}return r},h),t.InitConfig=(l.prototype.app_config=null,l.prototype.room_config=null,l.prototype.ve_config=null,l.prototype.speedlog_config=null,l.prototype.media_config=null,l.prototype.proto_version=null,Object.defineProperty(l.prototype,"_app_config",{get:s.oneOfGetter(r=["app_config"]),set:s.oneOfSetter(r)}),Object.defineProperty(l.prototype,"_room_config",{get:s.oneOfGetter(r=["room_config"]),set:s.oneOfSetter(r)}),Object.defineProperty(l.prototype,"_ve_config",{get:s.oneOfGetter(r=["ve_config"]),set:s.oneOfSetter(r)}),Object.defineProperty(l.prototype,"_speedlog_config",{get:s.oneOfGetter(r=["speedlog_config"]),set:s.oneOfSetter(r)}),Object.defineProperty(l.prototype,"_media_config",{get:s.oneOfGetter(r=["media_config"]),set:s.oneOfSetter(r)}),Object.defineProperty(l.prototype,"_proto_version",{get:s.oneOfGetter(r=["proto_version"]),set:s.oneOfSetter(r)}),l.encode=function(e,t){return t=t||i.create(),null!=e.app_config&&Object.hasOwnProperty.call(e,"app_config")&&a.proto_initconfig.AppConfig.encode(e.app_config,t.uint32(10).fork()).ldelim(),null!=e.room_config&&Object.hasOwnProperty.call(e,"room_config")&&a.proto_initconfig.RoomConfig.encode(e.room_config,t.uint32(18).fork()).ldelim(),null!=e.ve_config&&Object.hasOwnProperty.call(e,"ve_config")&&a.proto_initconfig.VEConfig.encode(e.ve_config,t.uint32(26).fork()).ldelim(),null!=e.speedlog_config&&Object.hasOwnProperty.call(e,"speedlog_config")&&a.proto_initconfig.SpeedlogConfig.encode(e.speedlog_config,t.uint32(34).fork()).ldelim(),null!=e.media_config&&Object.hasOwnProperty.call(e,"media_config")&&a.proto_initconfig.MediaConfig.encode(e.media_config,t.uint32(42).fork()).ldelim(),null!=e.proto_version&&Object.hasOwnProperty.call(e,"proto_version")&&t.uint32(48).int32(e.proto_version),t},l.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.proto_initconfig.InitConfig;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.app_config=a.proto_initconfig.AppConfig.decode(e,e.uint32());break;case 2:r.room_config=a.proto_initconfig.RoomConfig.decode(e,e.uint32());break;case 3:r.ve_config=a.proto_initconfig.VEConfig.decode(e,e.uint32());break;case 4:r.speedlog_config=a.proto_initconfig.SpeedlogConfig.decode(e,e.uint32());break;case 5:r.media_config=a.proto_initconfig.MediaConfig.decode(e,e.uint32());break;case 6:r.proto_version=e.int32();break;default:e.skipType(7&i)}}return r},l),t);function l(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function h(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function p(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function f(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function d(e){if(this.dispatch_resource_info=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function _(e){if(this.dispatch_protocol_info=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function g(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function m(e){if(this.resource_order=[],this.resource_info=[],this.play_order_protocol_type=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function y(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function v(e){if(this.resource_info=[],this.push_config=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function b(e){if(this.video_param=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function S(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function E(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function O(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function C(e){if(this.service_info=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function T(e){if(this.cdn_quic_version=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function w(e){if(this.disable_report_pull=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function I(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function k(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function P(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function A(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function M(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function N(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function R(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function D(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function G(e){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function L(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function x(e){if(this.quic_nodes=[],this.mtcp_nodes=[],this.wss_nodes=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function j(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function U(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function B(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function z(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function H(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function F(e){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function q(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function V(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Y(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function W(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Z(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function K(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Q(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function X(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function J(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function $(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function ee(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function te(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function ne(e){if(this.headers=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function re(e){if(this.headers=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function oe(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function ie(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function se(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function ae(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}},function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},c=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWssLink=void 0,n(32)),u=n(0),l=n(33),h=n(34),p=n(4),f=n(2);function d(e,t,n,r,i){var s=o.call(this)||this;return s.appID=e,s.env=t,s.protobuf=n,s.logger=r,s.stateCenter=i,s.socketService=new h.NetSocketService(s.env),s.urlIndex=0,s.updatedMsgTime=0,s.unUpdateMsgTimeTypes=[u.AccessHubMessageType.MSG_TYPE_HB_REQUEST,u.AccessHubMessageType.MSG_TYPE_HB_RESPONSE,u.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST,u.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE],s.netLinkState=u.ENUM_CONNECT_STATE.disconnect,s.sendCommandList=new c.LinkedList,s.unSendCommandList=new c.LinkedList,s.sendCommandMap={},s.unSendCommandMap={},s.sendDataCheckOnceCount=100,s.sendDataDropTimeout=1e4,s.sendDataCheckInterval=2e3,s.timeout=5e3,s.connectInterval=1e4,s.connectTimer=null,s.connectRsp={},s.unlogTypes=[12,13],s.tryServers=[],s.updatedMsgTime=Date.now(),s}i(d,o=l.ZegoLink),d.prototype.initEvent=function(e,t,n,r){this.onConnectedEvent=e,this.onDisConnectedEvent=t,this.onConnectingEvent=n,this.onPushEvent=r},d.prototype.createSocket=function(e){this.servers=e,this.urlIndex=0},d.prototype.destroySocket=function(){this.logger.info("zn.wl.ds.0 call"),this.socketService.closeSocket(),this.netLinkState=u.ENUM_CONNECT_STATE.disconnect,this.resetConnect()},d.prototype.refreshServers=function(e){this.servers=a(a([],e,!0),this.servers,!0)},d.prototype.connectSocket=function(e,t,n){var r=this;return void 0===e&&(e=!0),this.logger.info("zn.wl.cs.0 call"),this.connectRsp.suc=t,this.connectRsp.fail=n,this.stateCenter.networkState===u.ENUM_NETWORK_STATE.online&&(e&&(this.urlIndex=(this.urlIndex+1)%this.servers.length),t=this.servers[this.urlIndex],this.connectServer=t,this.logger.info("zn.wl.cs.0 server "+t),this.tryServers.push(t),this.closeSocket(),this.netLinkState=u.ENUM_CONNECT_STATE.connecting,this.socketService.createSocket(t),this.onConnectingEvent&&this.onConnectingEvent(!0),this.bindSocketEvent(),this.connectTimer=setTimeout((function(){r.logger.info("zn.wl.cs.0 timeout"),r.connectRsp.fail&&r.connectRsp.fail()}),this.connectInterval),!0)},d.prototype.bindSocketEvent=function(){var e=this;this.openHandler((function(){e.logger.info("zn.wl.bse open"),e.resetConnect(),e.connectRsp.suc&&e.connectRsp.suc(),e.netLinkState=u.ENUM_CONNECT_STATE.connected,e.onConnectedEvent&&e.onConnectedEvent(e.tryServers),e.checkUnSendMsgs(e.unSendCommandList),e.startCheck()})),this.closeHandler((function(t){e.logger.warn("zn.wl.bse close "+JSON.stringify(t)),e.resetConnect(),e.connectRsp.fail&&e.connectRsp.fail(),e.onDisConnectedEvent&&e.onDisConnectedEvent(!0),e.netLinkState=u.ENUM_CONNECT_STATE.disconnect})),this.errorHandler((function(t){e.logger.warn("zn.wl.bse error "+JSON.stringify(t)),e.resetConnect(),e.connectRsp.fail&&e.connectRsp.fail(),e.onDisConnectedEvent&&e.onDisConnectedEvent(!0),e.netLinkState=u.ENUM_CONNECT_STATE.disconnect})),this.onMessage()},d.prototype.closeSocket=function(){this.logger.info("zn.wl.cs.1 call"),this.socketService.closeSocket(),this.netLinkState=u.ENUM_CONNECT_STATE.disconnect},d.prototype.resetConnect=function(){this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=null),this.stopCheck()},d.prototype.isConnect=function(){return this.netLinkState===u.ENUM_CONNECT_STATE.connected},d.prototype.isDisConnect=function(){return!this.socketService||this.socketService.isDisConnect()},d.prototype.isConnecting=function(){return this.netLinkState===u.ENUM_CONNECT_STATE.connecting},d.prototype.setState=function(e){this.netLinkState=e},d.prototype.closeHandler=function(e){this.socketService.closeHandler(e)},d.prototype.openHandler=function(e){this.socketService.openHandler(e)},d.prototype.errorHandler=function(e){this.socketService.errorHandler(e)},d.prototype.updateMsgTime=function(){this.updatedMsgTime=Date.now()},d.prototype.sendMessage=function(e,t,n,r,o,i,a,c){void 0===r&&(r=!0),void 0===o&&(o=null),void 0===i&&(i=null),void 0===a&&(a=null),void 0===(c=void 0===c?{}:c).timeout&&(c.timeout=5e3),void 0===c.isInSendMap&&(c.isInSendMap=!0),this.txid++,r={appid:this.appID,biz_type:0,mode_no:(null==(r=this.stateCenter.appInfo)?void 0:r.mode)||f.NET_ACCESS_CONFIG.modeNo,id_name:this.stateCenter.userId,sdk_type:f.NET_ACCESS_CONFIG.sdkType,zegoconn_run_env:0===this.env?u.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_BROWSER:u.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_APPLET},n={data:r=s(s({txid:this.txid},r),n),txid:this.txid,sendTime:Date.now(),streamID:t,type:e,timeOut:c.timeout||this.timeout,ack:n.ack,success:o,error:i,ackFunc:a,isSend:!0,isCheck:e!==u.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE},c.isInSendMap&&(o=this.sendCommandList.push(n),this.sendCommandMap[this.txid]=o),this.unUpdateMsgTimeTypes.includes(e)||(this.updatedMsgTime=Date.now()),-1===this.unlogTypes.indexOf(e)&&this.logger.info("zn.wl.sm type: "+e+"-"+u.typeMap[e]+" streamID: "+t+" txid: "+this.txid),this.isConnect()?this.sendUint8Data(e,r,t):(n.isSend=!1,i=this.unSendCommandList.push(n),this.unSendCommandMap[this.txid]=i)},d.prototype.checkUnSendMsgs=function(e){for(var t,n=e.getFirst();null!=n;)e.remove(n),n._data&&!1===(null==(t=n._data)?void 0:t.isSend)&&n._data.type&&n._data.streamID&&n._data.data&&(this.sendUint8Data(n._data.type,n._data.data,n._data.streamID),n._data.isSend=!0),n=e.getFirst()},d.prototype.sendUint8Data=function(e,t,n){e=this.protobuf.encodeRequest(e,t,n),this.socketService.sendMessage(e)},d.prototype.onMessage=function(){var e=this;this.socketService.onMessage=function(t){t=new Uint8Array(t);var n,r=(t=e.protobuf.decodeResponse(t))[0],o=t[1];t=t[2],e.unUpdateMsgTimeTypes.includes(o)||(e.updatedMsgTime=Date.now()),-1===e.unlogTypes.indexOf(o)&&e.logger.info("zn.wl.om"+" streamID: ".concat(r,", msgType: ").concat(o,"-").concat(u.typeMap[o])),(null!=t&&t.txid||null!=(n=null==t?void 0:t.data)&&n.txid)&&e.isRspMsg((null==t?void 0:t.txid)||(null==(n=null==t?void 0:t.data)?void 0:n.txid))?e.handleSendCommandMsgRsp(r,o,(null==t?void 0:t.txid)||(null==(n=null==t?void 0:t.data)?void 0:n.txid),t):e.onPushEvent(r,o,t)}},d.prototype.isRspMsg=function(e){return void 0!==this.sendCommandMap[e]},d.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},d.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},d.prototype.checkMessageListTimeout=function(e,t){for(var n,r=e.getFirst(),o=Date.now(),i=0,s=this;null!=r&&"break"!==function(){var a,c,u;return r._data&&r._data.sendTime+r._data.timeOut>o||(r._data&&delete t[r._data.data.txid],e.remove(r),r._data&&null==r._data.error||r._data&&r._data.sendTime+s.sendDataDropTimeout<o||(a=r&&r._data&&r._data.error,c=r&&r._data&&r._data.txid,u=r&&r._data&&(null==(n=r._data)?void 0:n.isCheck),setTimeout((function(){u&&a&&a({},c,p.errorCodeList.TIMEOUT)}),0)),++i>=s.sendDataCheckOnceCount)?"break":void(r=e.getFirst())}(););},d.prototype.checkSendMessageList=function(e){for(var t,n=e.getFirst();null!=n&&n._data;)!function(){var r,o,i;e.remove(n),n._data.isSend&&n._data.error&&(r=n&&n._data&&n._data.error,o=n&&n._data&&n._data.txid,i=n&&n._data&&(null==(t=n._data)?void 0:t.isCheck),setTimeout((function(){i&&r&&r({},o,p.errorCodeList.TIMEOUT)}),0)),n=e.getFirst()}()},d.prototype.handleSendCommandMsgRsp=function(e,t,n,r){var o,i=this.sendCommandMap[n];null!=i&&(null!=(o=i._data)&&o.ack||(delete this.sendCommandMap[n],this.sendCommandList.remove(i)),r.code&&0!==r.code?o&&null!=o.error&&o.error(r,n):t===u.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION?(r.code=r.reason,r.message=r.msg,o&&null!=o.error&&o.error(r,n)):t===u.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK?o&&null!=o.ackFunc&&o.ackFunc(r,n):o&&null!=o.success&&o.success(r,n))},n=d,t.ZegoWssLink=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedList=t.ListNode=void 0,Object.defineProperty(o.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),o.prototype.hasNext=function(){return this.next&&this.next.id},o.prototype.hasPrev=function(){return this.prev&&this.prev.id};var r=o;function o(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}function i(){this.start=new r,this.end=new r,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}t.ListNode=r,i.prototype.insertBefore=function(e,t){return(t=new r(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},i.prototype.addLast=function(e){return this.insertBefore(this.end,e)},i.prototype.add=function(e){return this.addLast(e)},i.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},i.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},i.prototype.size=function(){return this._numNodes},i.prototype.getFromFirst=function(e){var t=0,n=this.start.next;if(0<=e)for(;t<e&&null!==n;)n=n.next,++t;else n=null;if(null===n)throw"Index out of bounds.";return n},i.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},i.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},i.prototype.removeFirst=function(){var e=null;return 0<this._numNodes&&this.start.next?this.remove(this.start.next):e},i.prototype.removeLast=function(){var e=null;return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):e},i.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},i.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},i.prototype.find=function(e){for(var t=this.start,n=!1,r=null;t.hasNext()&&!n;)e(t=t.next)&&(r=t,n=!0);return r},i.prototype.map=function(e){for(var t=this.start,n=[];t.hasNext();)e(t=t.next)&&n.push(t);return n},i.prototype.push=function(e){return this.addLast(e)},i.prototype.unshift=function(e){0<this._numNodes?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},i.prototype.pop=function(){return this.removeLast()},i.prototype.shift=function(){return this.removeFirst()},t.LinkedList=i},function(e,t,n){"use strict";function r(){this.txid=0,this.linkRetryTime=60,this.updatedMsgTime=0,this.connectServer=""}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLink=void 0,r.prototype.createSocket=function(e){},r.prototype.setState=function(e){},r.prototype.initEvent=function(e,t,n,r){},r.prototype.sendMessage=function(e,t,n,r,o,i,s,a){void 0===r&&(r=!0),void 0===o&&(o=null),void 0===i&&(i=null),void 0===s&&(s=null)},t.ZegoLink=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetSocketService=void 0;var r=n(35);function o(e){this.socket=null,this.ENV=e}o.prototype.createSocket=function(e){this.socket=(0,r.createZegoWebSocket)(e,this.ENV%2)},o.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(n){t.socket.binaryType="arraybuffer",t.responseHandler(),e(n)})},o.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):t.data,e.onMessage(t)})},o.prototype.onMessage=function(e){},o.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},o.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},o.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},o.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},o.prototype.sendMessage=function(e){this.isDisConnect()||this.socket&&this.ENV%2!=1&&this.socket.send(e)},t.NetSocketService=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=t.ZEGO_ENV=void 0,(o=r=t.ZEGO_ENV||(t.ZEGO_ENV={}))[o.BROWSER=0]="BROWSER",o[o.WEIXINMINI=1]="WEIXINMINI",s.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},s.prototype.onopen=function(e){},s.prototype.onerror=function(e){},s.prototype.onclose=function(e){},s.prototype.onmessage=function(e){},s.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},s.prototype.close=function(){this._websocket&&this._websocket.close()};var r,o,i=s;function s(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}t.ZegoWeiXinMiniWebSocket=i,t.createZegoWebSocket=function(e,t){return new(t%2===r.BROWSER?WebSocket:i)(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentBusinessRequestMgr=void 0;var r=n(0),o=n(2);function i(e,t,n,r){this.streamManager=e,this.protobuf=t,this.logger=n,this.stateCenter=r}i.prototype.getConfig=function(e,t){this.logger.info("zn.nab.gc call"),this.streamManager.createStream(r.StreamType.OTHER).sendMessage(r.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST,{zegoconn_version:o.NET_ACCESS_CONFIG.connectVer},e,t)},i.prototype.dispatchURL=function(e,t){var n=this;this.logger.info("zn.nab.du call"),this.streamManager.createStream(r.StreamType.OTHER).sendMessage(r.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST,{},(function(t){n.logger.info("zn.nab.du suc "),e&&e(t)}),(function(e,r,o){n.logger.info("zn.nab.du fail"),t&&t(o||e)}))},i.prototype.getAppConfig=function(e,t,n,i){var s=this;return new Promise((function(a,c){function u(e,t,n){n?(s.logger.error("zn.nab.gac fail "+JSON.stringify(n)),c(n)):0===e.code?(s.logger.info("zn.nab.gac suc"),n=s.decodeConfigMessage(e.data.data),a({code:0,data:n})):(s.logger.error("zn.nab.gac fail "+e.code),c({code:e.code}))}s.logger.info("zn.nab.gac call");var l={id_name:t,config_key:e,token:n,mode_no:(null==(l=s.stateCenter.appInfo)?void 0:l.mode)||o.NET_ACCESS_CONFIG.modeNo};s.streamManager.createStream(r.StreamType.OTHER).sendMessage(r.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST,l,u,u,null,{timeout:i})}))},i.prototype.decodeConfigMessage=function(e){return this.protobuf.decodeConfigMessage(e)},t.NetAgentBusinessRequestMgr=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetHeartBeatHandler=void 0;var r=n(4),o=n(0);function i(e,t){this.streamManager=e,this.logger=t,this.hbTimer=null,this.hbInterval=5,this.hbTimeout=10,this.hbTimeoutMaxCount=0,this.tryHbCount=0}i.prototype.init=function(e){var t=this;this.logger.info("zn.nhb.ii call"),this.hbStream||(this.hbStream=this.streamManager.createStream(o.StreamType.OTHER)),1<=e.data.logic_hb_interval&&e.data.logic_hb_interval<=10&&(this.hbInterval=e.data.logic_hb_interval),3<=e.data.logic_hb_timeout&&e.data.logic_hb_timeout<=30&&(this.hbTimeout=e.data.logic_hb_timeout),this.hbTimeoutMaxCount=this.hbTimeout/this.hbInterval,this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout((function(){t.start()}),1e3*this.hbInterval)},i.prototype.start=function(){var e,t,n,i=this;this.logger.debug("zn.nhb.s call "),this.tryHbCount++>this.hbTimeoutMaxCount?(this.logger.error("zn.nhb.s come to try limit"),this.reset(),this.netHbLogout(r.errorCodeList.NET_HB_TIMEOUT)):(e=(new Date).getTime(),t=function(t,n,r){i.logger.debug("zn.nhb.s hb callback "+((new Date).getTime()-e)),r&&0!==(null==r?void 0:r.code)?i.logger.info("zn.nhb.s fail "+JSON.stringify(r)):i.tryHbCount=0},n={ts:Date.now()},this.hbStream.sendMessage(o.AccessHubMessageType.MSG_TYPE_HB_REQUEST,n,t,t,null),this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout((function(){i.start()}),1e3*this.hbInterval))},i.prototype.netHbLogout=function(e){},i.prototype.reset=function(){this.hbTimer&&(clearTimeout(this.hbTimer),this.hbTimer=null),this.tryHbCount=0},t.NetHeartBeatHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentPCRequestMgr=void 0;var r=n(0),o=n(2),i=n(8);function s(e,t){this.streamManager=e,this.logger=t,this.pcStreamRequests=[],this.pcEstablishTimeout=o.NET_ACCESS_CONFIG.pcEstablishTimeout}s.prototype.getRequest=function(e,t){return e=new i.NetAgentPCRequest(this.logger,e,this.streamManager,this.pcEstablishTimeout,t),this.pcStreamRequests.push(e),e},s.prototype.updateConnectState=function(e,t,n){this.pcStreamRequests.forEach((function(o){e===r.PcConnectState.BROKEN?o.eventManager.emit("broken"):e===r.PcConnectState.DISCONNECT&&o.eventManager.emit("disconnected",t,n)}))},s.prototype.closePCs=function(){this.pcStreamRequests.forEach((function(e){e.closePc()}))},s.prototype.setEstablishTimeout=function(e){this.pcEstablishTimeout=e},t.NetAgentPCRequestMgr=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetRetryLinkHandler=void 0;var r=n(4),o=n(0);function i(e,t){this.logger=e,this.stateCenter=t,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryStartTime=0,this.retryActiveCount=1,this.isOverTime=!1,this.RETRY_MAX_TIME=90}i.prototype.initLink=function(e){this.link=e},i.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.maxTimer=setTimeout((function(){e.logger.warn("zn.rlh.sm"+" over max time ".concat(e.RETRY_MAX_TIME,"s, stop retry")),e.isOverTime=!0,e.link.destroySocket(),e.stopMaxTime(),e.invalid(),e.onactive(!1,r.errorCodeList.NET_SOCKET_TIMEOUT)}),1e3*this.RETRY_MAX_TIME))},i.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},i.prototype.active=function(e,t){var n,r=this;return this.logger.info("zn.rlh.at call "+e+" "+t),this.stateCenter.networkState==o.ENUM_NETWORK_STATE.offline?(this.logger.info("zn.rlh.at network is broken, stop retry"),!1):this.retryTimer?(this.logger.info("zn.rlh.at has actived, ignore"),!1):this.isOverTime?(this.logger.info("zn.rlh.at retry over time, stop retry"),!1):(1==this.retryActiveCount?this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL):(n=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)),this.retryActiveInterval=n>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:n),this.logger.info("zn.rlh.at interval "+this.retryActiveInterval),this.retryTimer=setTimeout((function(){r.link.destroySocket(),r.link.connectSocket(e,(function(){r.logger.info("zn.rlh.at suc"),r.stopMaxTime(),r.invalid(),r.onactive(!0)}),(function(){r.logger.info("zn.rlh.at fail"),r.maxTimer||r.startMaxTime(),r.active(!0)})),r.retryTimer&&clearTimeout(r.retryTimer),r.retryTimer=null,r.retryActiveCount++}),t?0:1e3*this.retryActiveInterval),!0)},i.prototype.onactive=function(){for(var e=0;e<arguments.length;e++);},i.prototype.init=function(e,t,n,r){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof n&&(this.RETRY_CONTINUE_COUNT=n),"number"==typeof r&&(this.RETRY_MAX_TIME_INTERVAL=r)},i.prototype.invalid=function(){this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryStartTime=0,this.retryActiveCount=1},t.NetRetryLinkHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0;var r=n(0);t.StateCenter=function(){this.networkState=r.ENUM_NETWORK_STATE.offline,this.useNetAgent=!0}},function(e,t,n){"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLogger=void 0,r.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.log(n)},r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.debug(n)},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.info(n)},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.warn(n)},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.error(n)},t.ZegoLogger=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamManager=void 0;var r=n(0),o=n(43);function i(e){this.zegoLink=e,this.streamID=1,this.httpStreams=[],this.pcStreams=[]}i.prototype.createStream=function(e){var t;return e!==r.StreamType.HTTP&&e===r.StreamType.PC?(t=new o.ZegoLinkStream(e,this.streamID++,this.zegoLink),this.pcStreams.push(t),t):this.getStream(e,this.httpStreams)},i.prototype.getStream=function(e,t){return(t=t.find((function(e){return!0===e.isFree})))?(t.isFree=!1,t.isFirst=!1):(t=new o.ZegoLinkStream(e,this.streamID++,this.zegoLink),this.httpStreams.push(t)),t},i.prototype.onPushEvent=function(e,t,n){var r=this.pcStreams.find((function(t){return t.StreamID===e}));r&&r.onPushEvent(t,n)},i.prototype.getStreamID=function(){return this.streamID++},t.StreamManager=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLinkStream=void 0;var r=n(0);function o(e,t,n){this.type=e,this.streamID=t,this.zegoLink=n,this.isFree=!1,this.isFirst=!0}Object.defineProperty(o.prototype,"StreamID",{get:function(){return this.streamID},enumerable:!1,configurable:!0}),o.prototype.refresh=function(e){this.streamID=e},o.prototype.sendMessage=function(e,t,n,o,i,s){var a=this;void 0===n&&(n=null),void 0===o&&(o=null),this.zegoLink.sendMessage(e,this.streamID,t,this.isFirst,(function(e){a.type!==r.StreamType.PC&&(a.isFree=!0),n&&n(e)}),(function(e,t,n){a.type!==r.StreamType.PC&&(a.isFree=!0),o&&o(e,t,n)}),i=void 0===i?null:i,s=void 0===s?{timeout:5e3,isInSendMap:!0}:s)},o.prototype.onPushEvent=function(e,t){},o.prototype.closeStream=function(e,t){this.zegoLink.sendMessage(r.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED,this.streamID,{code:e,msg:t})},o.prototype.isConnect=function(){return this.zegoLink.isConnect()},t.ZegoLinkStream=o}])},module.exports=e()},function(e,t,n){"use strict";var r=n(7);n.d(t,"a",(function(){return r.a})),n(10),n(11)},function(e,t,n){"use strict";n(7)},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r,o;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),(n=r=r||{})[n.Player=0]="Player",n[n.Audience=1]="Audience",(t=o=o||{})[t.ZegoGamePlayerStartPlay=0]="ZegoGamePlayerStartPlay",t[t.ZegoGamePlayerStopPlay=1]="ZegoGamePlayerStopPlay"},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),(n=r=r||{}).af="af",n.am="am",n.ar="ar",n.as="as",n.az="az",n.ba="ba",n.be="be",n.bem="bem",n.bg="bg",n.bi="bi",n.bn="bn",n.bo="bo",n.bs="bs",n.ca="ca",n.ceb="ceb",n.co="co",n.crs="crs",n.cs="cs",n.cy="cy",n.da="da",n.de="de",n.ee="ee",n.dv="dv",n.el="el",n.en="en",n.eo="eo",n.es="es",n.et="et",n.eu="eu",n.fa="fa",n.fi="fi",n.fil="fil",n.fj="fj",n.fo="fo",n.fr="fr",n.fy="fy",n.ga="ga",n.gd="gd",n.gl="gl",n.gu="gu",n.ha="ha",n.haw="haw",n.he="he",n.hi="hi",n.hr="hr",n.hsb="hsb",n.ht="ht",n.hu="hu",n.hy="hy",n.id="id",n.ig="ig",n.ikt="ikt",n.is="is",n.it="it",n.iu="iu",n.ja="ja",n.jv="jv",n.ka="ka",n.kek="kek",n.kg="kg",n.kk="kk",n.km="km",n.kmr="kmr",n.kn="kn",n.ko="ko",n.ku="ku",n.ky="ky",n.la="la",n.lb="lb",n.lg="lg",n.ln="ln",n.lo="lo",n.lt="lt",n.lv="lv",n.mg="mg",n.mhr="mhr",n.mi="mi",n.mk="mk",n.ml="ml",n.mn="mn",n.mr="mr",n.mrj="mrj",n.ms="ms",n.mt="mt",n.my="my",n.nb="nb",n.ne="ne",n.nl="nl",n.no="no",n.ny="ny",n.om="om",n.or="or",n.os="os",n.otq="otq",n.pa="pa",n.pap="pap",n.pl="pl",n.prs="prs",n.ps="ps",n.pt="pt",n.rn="rn",n.ro="ro",n.ru="ru",n.rw="rw",n.sd="sd",n.sg="sg",n.si="si",n.sk="sk",n.sl="sl",n.sm="sm",n.sn="sn",n.so="so",n.sq="sq",n.sr="sr",n.st="st",n.su="su",n.sv="sv",n.sw="sw",n.ta="ta",n.te="te",n.tg="tg",n.tn="tn",n.th="th",n.ti="ti",n.tig="tig",n.tk="tk",n.tlh="tlh",n.to="to",n.tpi="tpi",n.tr="tr",n.ts="ts",n.tt="tt",n.tw="tw",n.ty="ty",n.udm="udm",n.uk="uk",n.ur="ur",n.uz="uz",n.vi="vi",n.war="war",n.xh="xh",n.yi="yi",n.yo="yo",n.yua="yua",n.yue="yue",n.zh_CN="zh_CN",n.zh_TW="zh_TW",n.zu="zu"},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),(n=r=r||{})[n.Success=0]="Success",n[n.ErrorNetwork=7000001]="ErrorNetwork",n[n.ErrorInvalidUserInfo=7000002]="ErrorInvalidUserInfo",n[n.ErrorInvalidParams=7000003]="ErrorInvalidParams",n[n.ErrorInvalidToken=7000004]="ErrorInvalidToken",n[n.ErrorInvalidRoomId=7000005]="ErrorInvalidRoomId",n[n.ErrorInvalidGameId=7000006]="ErrorInvalidGameId",n[n.ErrorTimeout=7000007]="ErrorTimeout",n[n.ErrorAlreadyInit=7000008]="ErrorAlreadyInit",n[n.ErrorNotInit=7000009]="ErrorNotInit",n[n.ErrorNotSetGameContainer=7000010]="ErrorNotSetGameContainer",n[n.ErrorGameInfoIsNull=7000011]="ErrorGameInfoIsNull",n[n.ErrorGameIsNotRunning=7000012]="ErrorGameIsNotRunning",n[n.ErrorGameNotSupportThisMode=7000013]="ErrorGameNotSupportThisMode",n[n.SystemModuleJSONParseError=71e5]="SystemModuleJSONParseError",n[n.SystemModuleSeqNotFounded=7100001]="SystemModuleSeqNotFounded",n[n.SystemModuleCurrentGameIsNotFounded=7100002]="SystemModuleCurrentGameIsNotFounded",n[n.ErrorIframeIsNotFound=7100003]="ErrorIframeIsNotFound",n[n.ErrorUndefinedCode=7999999]="ErrorUndefinedCode",n[n.ErrorToken04Invalid=7200401]="ErrorToken04Invalid"},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),(n=r=r||{}).TokenWillExpire="tokenWillExpire",n.Unloaded="unloaded",n.ChargeRequire="chargeRequire",n.PlayerStateUpdate="playerStateUpdate",n.GameStateUpdate="gameStateUpdate",n.GameLoadStateUpdate="gameLoadStateUpdate",n.ActionEventUpdate="actionEventUpdate",n.GameResult="gameResult",n.GameError="gameError",n.GameSoundPlay="gameSoundPlay",n.GameSoundVolumeChange="gameSoundVolumeChange",n.RobotConfigRequire="robotConfigRequire",n.MicStateChange="micStateChange",n.SpeakerStatusChange="speakerStatusChange",n.CloudGameFirstFrame="cloudGameFirstFrame"},function(e,t,n){"use strict";var r,o,i,s,a;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return a})),(n=r=r||{})[n.GameModeHostsGame=1]="GameModeHostsGame",n[n.GameModeShowGame=2]="GameModeShowGame",n[n.GameModeMallGame=3]="GameModeMallGame",n[n.GameModeIMGame=4]="GameModeIMGame",n[n.GameModeDesignateMatchGame=5]="GameModeDesignateMatchGame",(t=o=o||{})[t.OrientationBoth=0]="OrientationBoth",t[t.OrientationPortrait=1]="OrientationPortrait",t[t.OrientationLandscape=2]="OrientationLandscape",(n=i=i||{}).BGMState="000100",n.BGMRange="000101",n.SoundEffectsState="000200",n.SoundEffectsRange="000201",n.VibrateState="000300",(t=s=s||{}).Close="0",t.Open="1",(n=a=a||{})[n.Loading=1]="Loading",n[n.Loaded=2]="Loaded"},function(e,t,n){},function(e,t,n){"use strict";var r,o,i,s,a;n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a})),(n=r=r||{}).Init="zego_game_common_init",n.GameLoaded="zego_game_common_loaded",n.ActionEvents="zego_game_common_button_events",n.GameLoading="zego_game_common_loading",n.GameOverDetail="zego_game_common_game_over_detail",n.UserMicChange="zego_game_user_mic_change",n.UserSpeakerChange="zego_game_user_speaker_change",(t=o=o||{}).Destroy="zego_game_destroy",t.GameOrientation="zego_game_common_game_orientation",t.Language="zego_game_language",t.PlayGameSound="zego_game_common_play_game_sound",t.ChangeGameSoundVolume="zego_game_common_change_game_sound_volume",t.GameRecharge="zego_game_recharge",t.GameIntroduction="zego_engine_game_introduction",t.GetConfig="zego_game_common_get_config",t.PlayerPlaying="zego_game_common_player_playing",t.GameState="zego_game_common_game_state",t.GameUploadError="zego_game_common_upload_error",t.GetRobotSetting="zego_engine_robot_setting",(n=i=i||{}).WalletUpdate="zego_engine_common_money_update",n.SetGameSetting="zego_engine_set_game_setting",n.UpdateCode="zego_engine_common_update_code",n.BeforeDestroy="zego_engine_before_destroy",(t=s=s||{}).GetGameSetting="zego_engine_get_game_setting",t.GetCustomComponents="zego_engine_get_custom_webviews",t.RunCustomComponent="zego_engine_run_custom_webview",t.GetCustomFunctions="zego_engine_get_custom_functions",t.RunCustomFunction="zego_engine_run_custom_function",(a=a||{}).CloudGameFirstFrame="zego_cloud_game_first_frame"},function(e,t,n){"use strict";function r(e){return e instanceof Array?e.forEach((function(e,t){r(e)})):e instanceof Object&&Object.keys(e).forEach((function(t){var n=t.replace(/_(\w)/g,(function(e,t){return t.toUpperCase()}));n!==t&&(e[n]=e[t],delete e[t]),r(e[n])})),e}function o(e,t){return e instanceof Array?e.forEach((function(e,t){o(e)})):e instanceof Object&&Object.keys(e).forEach((function(n){var r=n.replace(/([A-Z])/g,"_$1").toLowerCase();if(r!==n&&(e[r]=e[n],delete e[n]),null!=t&&t.filter((function(e){return e===r})).length)return!1;o(e[r])})),e}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var r=function(e){var t=(new Date).getTime();return"4xxx-yxxx-".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(36)}))+e},o=function(e){return!!(e=document.querySelector(e))&&"iframe"===(null==(e=e.tagName)?void 0:e.toLowerCase())}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));t=n(0);var r=function(e,t){return{errorCode:e,message:t=t||o[e]}},o=((n={})[t.d.Success]="Success.",n[t.d.ErrorNetwork]="Network exception.",n[t.d.ErrorInvalidUserInfo]="Invalid user information.",n[t.d.ErrorInvalidParams]="Invalid parameter.",n[t.d.ErrorInvalidToken]="Invalid token.",n[t.d.ErrorInvalidRoomId]="Invalid roomId.",n[t.d.ErrorInvalidGameId]="Invalid GameId.",n[t.d.ErrorTimeout]="Timeout.",n[t.d.ErrorAlreadyInit]="The SDK has been initialized.",n[t.d.ErrorNotSetGameContainer]="The SDK has not setted container of The game.",n[t.d.ErrorGameInfoIsNull]="The information of game is null.",n[t.d.ErrorGameIsNotRunning]="The game is not running.",n[t.d.ErrorGameNotSupportThisMode]="The mode of game is not supported.",n[t.d.SystemModuleJSONParseError]="Json format error.",n[t.d.SystemModuleSeqNotFounded]="seq not founded.",n[t.d.SystemModuleCurrentGameIsNotFounded]="The Game is not founded.",n[t.d.ErrorIframeIsNotFound]="Cannot find dom node or dom node is not iframe.",n[t.d.ErrorUndefinedCode]="The Error has not been defined.",n)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),o.prototype.testUa=function(e){return e.test(this.ua)},o.prototype.testVs=function(e){return null==(e=this.ua.match(e))?void 0:e.toString().replace(/[^0-9|_.]/g,"").replace(/_/g,".")},o.prototype.getSystem=function(){return this.testUa(/windows|win32|win64|wow32|wow64/g)?this.system="windows":this.testUa(/macintosh|macintel/g)?this.system="macOS":this.testUa(/x11/g)?this.system="linux":this.testUa(/android|adr/g)?this.system="android":this.testUa(/ios|iphone|ipad|ipod|iwatch/g)&&(this.system="iOS"),this.system},o.prototype.getSystemVersion=function(){return"windows"===this.system?this.testUa(/windows nt 5.0|windows 2000/g)?this.systemVs="2000":this.testUa(/windows nt 5.1|windows xp/g)?this.systemVs="xp":this.testUa(/windows nt 5.2|windows 2003/g)?this.systemVs="2003":this.testUa(/windows nt 6.0|windows vista/g)?this.systemVs="vista":this.testUa(/windows nt 6.1|windows 7/g)?this.systemVs="7":this.testUa(/windows nt 6.2|windows 8/g)?this.systemVs="8":this.testUa(/windows nt 6.3|windows 8.1/g)?this.systemVs="8.1":this.testUa(/windows nt 10.0|windows 10/g)&&(this.systemVs="10"):"macOS"===this.system?this.systemVs=this.testVs(/os x [\d._]+/g):"android"===this.system?this.systemVs=this.testVs(/android [\d._]+/g):"iOS"===this.system&&(this.systemVs=this.testVs(/os [\d._]+/g)),this.systemVs},o.prototype.getBrowser=function(){return this.testUa(/applewebkit/g)?this.testUa(/edg/g)?this.browser="edge":this.testUa(/opr/g)?this.browser="opera":this.testUa(/chrome/g)?this.browser="chrome":this.testUa(/safari/g)&&(this.browser="safari"):this.testUa(/gecko/g)&&this.testUa(/firefox/g)?this.browser="firefox":this.testUa(/presto/g)?this.browser="opera":this.testUa(/trident|compatible|msie/g)&&(this.browser="ie"),this.browser},o.prototype.getBrowserVersion=function(){return"chrome"===this.browser?this.browserVs=this.testVs(/chrome\/[\d._]+/g):"safari"===this.browser?this.browserVs=this.testVs(/version\/[\d._]+/g):"firefox"===this.browser?this.browserVs=this.testVs(/firefox\/[\d._]+/g):"opera"===this.browser?this.browserVs=this.testVs(/opr\/[\d._]+/g):"iexplore"===this.browser?this.browserVs=this.testVs(/(msie [\d._]+)|(rv:[\d._]+)/g):"edge"===this.browser&&(this.browserVs=this.testVs(/edg\/[\d._]+/g)),this.browserVs},o.prototype.getInfo=function(){return{ua:this.ua,system:"".concat(this.getSystem()||""," ").concat(this.getSystemVersion()||""),browser:"".concat(this.getBrowser()||""," ").concat(this.getBrowserVersion()||"")}};var r=o;function o(){this.ua=navigator.userAgent.toLowerCase(),this.system="",this.systemVs="",this.browser="",this.browserVs=""}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(27),o=(i.getUint64=function(e,t,n){var r=n.getUint32(e,t);n=n.getUint32(e+4,t),e=t?r+Math.pow(2,32)*n:Math.pow(2,32)*r+n;return Number.isSafeInteger(e)||console.warn(e,"exceeds MAX_SAFE_INTEGER. Precision may be lost"),e},i.decodeTokenExpire=function(e){try{var t,n=Uint8Array.from(r.a.base64decode(e),(function(e){return e.charCodeAt(0)})),o=new DataView(n.buffer);return 0<(t="function"==typeof o.getBigInt64?o.getBigUint64(0):i.getUint64(0,!1,o))?Number(t):Number(o.getBigUint64(0,!0))}catch(e){console.error("token error")}return-1},i);function i(){}},function(e,t,n){function r(e){var t;return(i[e]||(t=i[e]={i:e,l:!1,exports:{}},o[e].call(t.exports,t,t.exports,r),t.l=!0,t)).exports}var o,i;e.exports=(i={},r.m=o=[function(e,t,n){(function(t){e.exports=function(e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),!(r=!(r=!(r="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:r)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:r)&&void 0!==t&&t.crypto?t.crypto:r))try{r=n(44)}catch(s){}var o=Object.create||function(e){return i.prototype=e,e=new i,i.prototype=null,e};function i(){}var s={},a=s.lib={},c=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=a.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var s=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=s<<24-(r+i)%4*8}else for(var a=0;a<o;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new u.init(t,e)}}),l=s.enc={},h=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},p=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},f=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},d=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,o=r.words,i=r.sigBytes,s=this.blockSize,a=i/(4*s),c=(t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s;i=e.min(4*c,i);if(c){for(var l=0;l<c;l+=s)this._doProcessBlock(o,l);n=o.splice(0,c),r.sigBytes-=i}return new u.init(n,i)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),_=(a.Hasher=d.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new _.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math)}).call(this,n(6))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedList=t.ListNode=t.ENUM_CONNECT_STATE=t.ENUM_NETWORK_STATE=t.SOCKET_DISCONNECT=t.errorList=t.Queue=t.getSeq=t.E_CLIENT_TYPE=t.ENUM_LOG_LEVEL=t.ENUM_REMOTE_TYPE=t.ZEGO_BROWSER_TYPE=t.ZEGO_ENV=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.0.1",(o=t.ZEGO_ENV||(t.ZEGO_ENV={}))[o.BROWSER=0]="BROWSER",o[o.WEIXINMINI=1]="WEIXINMINI",(o=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[o.IE=0]="IE",o[o.FIREFOX=1]="FIREFOX",o[o.CHROME=2]="CHROME",o[o.SAFARI=3]="SAFARI",o[o.OPERA=4]="OPERA",o[o.WEIXIN=5]="WEIXIN",o[o.WEIXINMINI=6]="WEIXINMINI",o[o.UNKOWN=7]="UNKOWN",(o=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[o.DISABLE=0]="DISABLE",o[o.WEBSOCKET=1]="WEBSOCKET",o[o.HTTPS=2]="HTTPS",t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},(o=t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}))[o.ClientType_None=0]="ClientType_None",o[o.ClientType_H5=1]="ClientType_H5",o[o.ClientType_SmallPragram=2]="ClientType_SmallPragram",o[o.ClientType_Webrtc=3]="ClientType_Webrtc",t.getSeq=(r=1,function(){return r++}),i.prototype.isEmpty=function(){return 0==this.items.length},i.prototype.enqueue=function(e){this.items.push(e)},i.prototype.dequeue=function(){return this.isEmpty()?"Underflow":this.items.shift()},i.prototype.front=function(){return this.isEmpty()?"No elements in Queue":this.items[0]},i.prototype.size=function(){return this.items.length},i.prototype.clear=function(){this.items=[]},i.prototype.all=function(){return this.items};var r,o=i;function i(){this.items=[],this.items=[]}t.Queue=o,t.errorList={TIMEOUT:{code:100001,msg:"network timeout"},DATAEXIST:{code:100002,msg:"data exist"},BROKEN:{code:100003,msg:"network broken"}},t.SOCKET_DISCONNECT=-1,(o=t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={}))[o.offline=0]="offline",o[o.online=1]="online",(o=t.ENUM_CONNECT_STATE||(t.ENUM_CONNECT_STATE={}))[o.disconnected=0]="disconnected",o[o.connecting=1]="connecting",o[o.connected=2]="connected",Object.defineProperty(a.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),a.prototype.hasNext=function(){return this.next&&this.next.id},a.prototype.hasPrev=function(){return this.prev&&this.prev.id};var s=a;function a(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}function c(){this.start=new s,this.end=new s,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}t.ListNode=s,c.prototype.insertBefore=function(e,t){return(t=new s(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},c.prototype.addLast=function(e){return this.insertBefore(this.end,e)},c.prototype.add=function(e){return this.addLast(e)},c.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},c.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},c.prototype.size=function(){return this._numNodes},c.prototype.getFromFirst=function(e){var t=0,n=this.start.next;if(0<=e)for(;t<e&&null!==n;)n=n.next,++t;else n=null;if(null===n)throw"Index out of bounds.";return n},c.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},c.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},c.prototype.removeFirst=function(){return 0<this._numNodes&&this.start.next?this.remove(this.start.next):null},c.prototype.removeLast=function(){return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):null},c.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},c.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},c.prototype.find=function(e){for(var t=this.start,n=!1,r=null;t.hasNext()&&!n;)e(t=t.next)&&(r=t,n=!0);return r},c.prototype.map=function(e){for(var t=this.start,n=[];t.hasNext();)e(t=t.next)&&n.push(t);return n},c.prototype.push=function(e){return this.addLast(e)},c.prototype.unshift=function(e){0<this._numNodes?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},c.prototype.pop=function(){return this.removeLast()},c.prototype.shift=function(){return this.removeFirst()},t.LinkedList=o=c},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=t.suppressInstrumentation=t.ROOT_CONTEXT=t.BaseContext=t.setSpan=t.getSpanContext=t.getSpan=t.createContextKey=void 0,n(20));function s(e){return Symbol.for(e)}var a=(t.createContextKey=s)("OpenTelemetry Context Key SUPPRESS_INSTRUMENTATION"),c=s("OpenTelemetry Context Key SPAN");function u(e){return e.getValue(c)||void 0}function l(e){this.name=e,this.contextManager=new i.StackContextManager}t.getSpan=u,t.getSpanContext=function(e){return null==(e=u(e))?void 0:e.context()},t.setSpan=function(e,t){return e.setValue(c,t)},t.BaseContext=n=function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var o=new e(n._currentContext);return o._currentContext.set(t,r),o},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}},t.ROOT_CONTEXT=new n,t.suppressInstrumentation=function(e){return e.setValue(a,!0)},l.getInstance=function(e){return void 0===e&&(e="context"),this._instance||(this._instance=new l(e)),this._instance},l.prototype.active=function(){return this.contextManager.active()},l.prototype.with=function(e,t,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(r=this._getContextManager()).with.apply(r,o([e,t,n],i))},l.prototype._getContextManager=function(){return this.contextManager},t.ContextAPI=n=l},function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=t.TraceFlags=t.SpanKind=t.SpanStatusCode=void 0,(r=t.SpanStatusCode||(t.SpanStatusCode={}))[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR",(o=t.SpanKind||(t.SpanKind={}))[o.INTERNAL=0]="INTERNAL",o[o.SERVER=1]="SERVER",o[o.CLIENT=2]="CLIENT",o[o.PRODUCER=3]="PRODUCER",o[o.CONSUMER=4]="CONSUMER",(o=r=t.TraceFlags||(t.TraceFlags={}))[o.NONE=0]="NONE",o[o.SAMPLED=1]="SAMPLED",t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:r.NONE}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.ZegoLog=void 0,o.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join("");console.log(n)},o.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join("");console.debug(n)},o.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join("");console.info(n)},o.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join("");console.warn(n)},o.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join("");console.error(n)};var r=o;function o(){}r=new(t.ZegoLog=r),t.log=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FAIL_TIME=t.FAIL_MAX_COUNT=t.FAIL_COUNT=t.STORE_SIZE=t.CACHE_SIZE=t.BUCKET_CONFIG=t.DEFAULT_CONFIG=void 0,t.DEFAULT_CONFIG={importantLevel:0,reportSize:3e3,reportNum:10,bps:16e3,netTimeout:10},t.BUCKET_CONFIG={bucketSize:1e4,tokensPerInterval:1600},t.CACHE_SIZE={totalAvailCache:102400,cacheMaxSize:2e4,cacheDelPer:.2},t.STORE_SIZE={totalDBSize:2048e3,storeDelPer:.2},t.FAIL_COUNT=5,t.FAIL_MAX_COUNT=10,t.FAIL_TIME=30},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=t.calculateMemSize=t.analyzeKey=t.getCurrentTime=t.getCurrentEnv=t.getBrowser=void 0,n(1)),i=r(n(35)),s=(t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),n=-1!=e.indexOf("Firefox"),r=null!=window.opr,i=e.indexOf("Chrome")&&window.chrome,s=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0];return t?o.ZEGO_BROWSER_TYPE.IE:n?o.ZEGO_BROWSER_TYPE.FIREFOX:r?o.ZEGO_BROWSER_TYPE.OPERA:i?o.ZEGO_BROWSER_TYPE.CHROME:s?o.ZEGO_BROWSER_TYPE.SAFARI:e?o.ZEGO_BROWSER_TYPE.WEIXIN:o.ZEGO_BROWSER_TYPE.UNKOWN},t.getCurrentEnv=function(){var e=window.navigator.userAgent;return new Promise((function(t){-1==e.indexOf("MicroMessage")?t(o.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv((function(e){e.miniprogram}))}))},["00","01","02","03","04","05","06","07","08","09"]);t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(s[e.getMonth()+1]||e.getMonth()+1)+"/",(s[e.getDate()]||e.getDate())+" ",(s[e.getHours()]||e.getHours())+":",(s[e.getMinutes()]||e.getMinutes())+":",s[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")},t.analyzeKey=function(e){return e=e.split("_"),{level:Number(e[0]),timestamp:e[1],seq:e[2]}},t.calculateMemSize=function(e){return i.default(e)},t.uuid=function(e,t){var n,r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||o.length,e)for(n=0;n<e;n++)i[n]=o[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",n=0;n<36;n++)i[n]||(r=0|16*Math.random(),i[n]=o[19==n?3&r|8:r]);return i.join("")}},function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};function i(e){return null==e||!Array.isArray(e)||function(e){var t,n,o;try{for(var i=r(e),s=i.next();!s.done;s=i.next()){var a=s.value;if(null!=a)if(o){if(typeof a!==o)return!1}else o=typeof a}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0}(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeAttributes=t.isAttributeValue=void 0,t.isAttributeValue=i,t.sanitizeAttributes=function(e){var t,n,s={};if(null!=e&&"object"==typeof e)try{for(var a=r(Object.entries(e)),c=a.next();!c.done;c=a.next()){var u=o(c.value,2),l=u[0],h=u[1];i(h)&&(Array.isArray(h)?s[l]=h.slice():s[l]=h)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdGenerator=void 0;var r=Array(32);function o(e){return function(){for(var t=0;t<2*e;t++)r[t]=Math.floor(16*Math.random())+48,58<=r[t]&&(r[t]+=39);return String.fromCharCode.apply(null,r.slice(0,2*e))}}t.IdGenerator=function(){this.generateTraceId=o(16),this.generateSpanId=o(8),this.generateEventId=o(4)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resource=t.SDK_INFO=t.SemanticResourceAttributes=void 0,t.SemanticResourceAttributes={PROCESS_RUNTIME_NAME:"process.runtime.name",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version"},t.SDK_INFO=((r={})[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME]="opentelemetry",r[t.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]="browser",r[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]="webjs",r[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=t.VERSION,r),o.empty=function(){return o.EMPTY},o.createTelemetrySDKResource=function(){var e;return new o(((e={})[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]=t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],e[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME]=t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME],e[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION],e))},o.prototype.merge=function(e){return e&&Object.keys(e.attributes).length?new o(Object.assign({},this.attributes,e.attributes)):this},o.EMPTY=new o({});var r=o;function o(e){this.attributes=e}t.Resource=r},function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.Span=void 0,n(8)),s=n(2),a=n(3),c=n(9),u=n(21);function l(e,t,n,r,o,i,s,u){void 0===u&&(u=[]),this.attributes={},this.links=[],this.events=[],this.status={code:a.SpanStatusCode.UNSET},this.endTime=0,this._ended=!1,this._duration=0,this.exported=!0,this.contextAPI=e.context,this.reporter=e.reporter,this.spanProcessor=e.spanProcessor,this.parentTracer=e,this.name=n,this.level=r,this.spanContext=o,this.parentSpanId=s,this.kind=i,this.links=u,this.startTime=Date.now(),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._traceParams=e.getActiveTraceParams(),this._idGenerator=new c.IdGenerator}l.prototype.context=function(){return this.spanContext},l.prototype.setAttribute=function(e,t){return null!=t&&0!==e.length&&(!i.isAttributeValue(t)||Object.keys(this.attributes).length>=this._traceParams.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]=t)),this},l.prototype.appendAttribute=function(e,t){return null!=t&&0!==e.length&&(!i.isAttributeValue(t)||Object.keys(this.attributes).length>=this._traceParams.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]&&Array.isArray(this.attributes[e])?this.attributes[e].push(t):this.attributes[e]=[t])),this},l.prototype.setAttributes=function(e){var t,n;try{for(var i=r(Object.entries(e)),s=i.next();!s.done;s=i.next()){var a=o(s.value,2),c=a[0],u=a[1];this.setAttribute(c,u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},l.prototype.addEvent=function(e,t,n){this.events.length>=this._traceParams.numberOfEventsPerSpan&&this.events.shift();var r=this._idGenerator.generateEventId();return u.isTimeInput(t)&&(void 0===n&&(n=t),t=void 0),void 0===n&&(n=u.hrTime()),this.events.push({name:e,attributes:t,time:u.timeInputToHrTime(n),event_id:r}),this},l.prototype.setStatus=function(e){return this.status=e,this},l.prototype.updateName=function(e){return this.name=e,this},l.prototype.end=function(e){var t,n=this;this._isSpanEnded()||(this._ended=!0,this.resource=this.parentTracer.resource,this.spanProcessor.spanBeforeEnd&&this.spanProcessor.spanBeforeEnd(this),t=u.getCurrentTime(),this.setAttribute("e_time_s",t),this.endTime=Date.now(),this._duration=this.endTime-this.startTime,this.contextAPI.with(s.suppressInstrumentation(this.contextAPI.active()),(function(){var t=n.toReporterSpan(n);n.spanProcessor.spanEnd&&n.spanProcessor.spanEnd(t,n.level),t.droped||!1===e||(delete t.droped,n.reporter.report(JSON.stringify(t),n.level))})))},l.prototype.spanReport=function(){var e=this.toReporterSpan(this);this.reporter.report(JSON.stringify(e),this.level)},l.prototype.isRecording=function(){return!1===this._ended},Object.defineProperty(l.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),l.prototype._isSpanEnded=function(){return this._ended,this._ended},l.prototype.toReporterSpan=function(e){var t=[],n=(e.events.forEach((function(e){var n={};Object.keys(e).forEach((function(t){"name"===t&&(n[t]=e[t]),"time"===t&&(n.timestamp=u.hrTimeToMilliseconds(e[t])),"attributes"===t&&(n.tags=e[t])})),t.push(n)})),[]);return e.links.forEach((function(e){n.push({span_id:e.context.spanId,trace_id:e.context.traceId})})),{trace_id:e.spanContext.traceId,parent_span_id:e.parentSpanId,name:e.name,span_id:e.spanContext.spanId,kind:e.kind,start_time:e.startTime,end_time:e.endTime,duration:e.duration,logs:t,tags:e.attributes,links:n}},t.Span=n=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSpan=void 0;var r=n(4),o=n(11);function i(e,t){this.spanId=e,this.span=t}i.prototype.setAttribute=function(e,t){var n=this;return this.span?this.span.setAttribute(e,t):this._activeSpan().then((function(){n.span&&n.span.setAttribute(e,t)})),this},i.prototype.setAttributes=function(e){var t=this;return this.span?this.span.setAttributes(e):this._activeSpan().then((function(){t.span&&t.span.setAttributes(e)})),this},i.prototype.appendAttribute=function(e,t){var n=this;return this.span?this.span.appendAttribute(e,t):this._activeSpan().then((function(){n.span&&n.span.appendAttribute(e,t)})),this},i.prototype.addEvent=function(e,t,n){var r=this;return this.span?this.span.addEvent(e,t,n):this._activeSpan().then((function(){r.span&&r.span.addEvent(e,t,n)})),this},i.prototype.setStatus=function(e){var t=this;return this.span?this.span.setStatus(e):this._activeSpan().then((function(){t.span&&t.span.setStatus(e)})),this},i.prototype.updateName=function(e){var t=this;return this.span?this.span.updateName(e):this._activeSpan().then((function(){t.span&&t.span.updateName(e)})),this},i.prototype.end=function(e){var t=this;void 0===e&&(e=!0),this.span?this.span.end(e):this._activeSpan(!0).then((function(){t.span&&t.span.end(e),t._spanEnd()}))},i.prototype.setSpanActive=function(e){this.activeCallback=e},i.prototype.setSpanEnd=function(e){this.endCallback=e},i.prototype.spanReport=function(){var e;null!=(e=this.span)&&e.spanReport()},i.prototype._spanEnd=function(){this._isSpanNoop()||(this.removeStoreItem(this.spanId),this.endCallback&&this.endCallback(this.spanInfo))},i.prototype._isSpanNoop=function(){return"noop"===this.spanId},i.prototype._activeSpan=function(e){var t=this;return void 0===e&&(e=!1),new Promise((function(n,r){t.store.getItem(t.spanId).then((function(r){var s=new o.Span(i.tracer,i.tracer.context.active(),r.name,r.level,r.spanContext,r.kind,r.parentSpanId,r.links);s.setStatus(r.status),s.setAttributes(r.attributes),t.span=s,t.activeCallback&&t.activeCallback(t.spanId,e),n()})).catch((function(e){r(e)}))}))},i.prototype.removeStoreItem=function(e){var t=this;this.store.getItem(e).then((function(n){n&&t.store.removeItem(e).then((function(){r.log.log("remove suc")})).catch((function(e){r.log.warn("remove fail")}))}))},t.ZegoSpan=n=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoStore=t.ZegoWechatMiniStore=t.ZEGO_ENV=void 0;var r,o,i=n(14),s=((o=r=t.ZEGO_ENV||(t.ZEGO_ENV={}))[o.BROWSER=0]="BROWSER",o[o.WEIXINMINI=1]="WEIXINMINI",n(4)),a=(c.prototype.getItem=function(e){var t=this;return new Promise((function(n,r){try{n(wx.getStorageSync(t.keyPrefix+e))}catch(n){r(n)}}))},c.prototype.setItem=function(e,t){var n=this;return new Promise((function(r,o){try{wx.setStorageSync(n.keyPrefix+e,t),r()}catch(r){o(r)}}))},c.prototype.removeItem=function(e){var t=this;return new Promise((function(n,r){try{n(wx.removeStorageSync(t.keyPrefix+e))}catch(n){r(n)}}))},c.prototype.clear=function(){return new Promise((function(e,t){try{wx.clearStorageSync(),e()}catch(e){t(e)}}))},c.prototype.keys=function(){var e=this;return new Promise((function(t,n){try{var r=wx.getStorageInfoSync().keys,o=(s.log.warn("keys",r),[]);r.forEach((function(t){0==t.indexOf(e.keyPrefix)&&o.push(t.replace(e.keyPrefix,""))})),s.log.warn("keyArr",JSON.stringify(o)),o.sort(),t(o)}catch(t){n(t)}}))},c);function c(e){this.storeName=e,this.keyPrefix=e+"/",this.storeName}t.ZegoWechatMiniStore=a,t.createZegoStore=function(e,t,n){return t===r.BROWSER?i.createInstance({name:e+":"+(n||"store")}):new a(e)}},function(e,t,n){(function(t){e.exports=function e(t,n,r){function o(i,s){if(!n[i]){var a;if(!t[i])throw(a=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",a;a=n[i]={exports:{}},t[i][0].call(a.exports,(function(e){return o(t[i][1][e]||e)}),a,a.exports,e,t,n,r)}return n[i].exports}for(var i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,n,r){(function(e){"use strict";var t,r,o,i,s=e.MutationObserver||e.WebKitMutationObserver,a=s?(t=0,s=new s(u),r=e.document.createTextNode(""),s.observe(r,{characterData:!0}),function(){r.data=t=++t%2}):e.setImmediate||void 0===e.MessageChannel?"document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)}:((o=new e.MessageChannel).port1.onmessage=u,function(){o.port2.postMessage(0)}),c=[];function u(){var e,t;i=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}i=!1}n.exports=function(e){1!==c.push(e)||i||a()}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function o(){}var i={},s=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&f(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return i.reject(e,r)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}var s=d((function(){t(o,r)}));"error"===s.status&&r(s.value)}function d(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=u).prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){var n;return"function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s?this:(n=new this.constructor(o),this.state!==c?h(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t)),n)},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=d(p,t);if("error"===n.status)return i.reject(e,n.value);if(n=n.value)f(e,n);else{e.state=a,e.outcome=t;for(var r=-1,o=e.queue.length;++r<o;)e.queue[r].callFulfilled(t)}return e},i.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:i.resolve(new this(o),e)},u.reject=function(e){var t=new this(o);return i.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,c=-1,u=new this(o);++c<n;)!function(e,o){t.resolve(e).then((function(e){s[o]=e,++a!==n||r||(r=!0,i.resolve(u,s))}),(function(e){r||(r=!0,i.reject(u,e))}))}(e[c],c);return u},u.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r,s=-1,a=new this(o);++s<t;)r=e[s],this.resolve(r).then((function(e){n||(n=!0,i.resolve(a,e))}),(function(e){n||(n=!0,i.reject(a,e))}));return a}},{1:1}],3:[function(e,n,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){try{return"undefined"!=typeof indexedDB?indexedDB:"undefined"!=typeof webkitIndexedDB?webkitIndexedDB:"undefined"!=typeof mozIndexedDB?mozIndexedDB:"undefined"!=typeof OIndexedDB?OIndexedDB:"undefined"!=typeof msIndexedDB?msIndexedDB:void 0}catch(e){}}();function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var s=Promise;function a(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function u(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",p=void 0,f={},d=Object.prototype.toString,_="readonly",g="readwrite";function m(e){e=f[e.name];var t={};t.promise=new s((function(e,n){t.resolve=e,t.reject=n})),e.deferredOperations.push(t),e.dbReady?e.dbReady=e.dbReady.then((function(){return t.promise})):e.dbReady=t.promise}function y(e){(e=f[e.name].deferredOperations.pop())&&(e.resolve(),e.promise)}function v(e,t){if(e=f[e.name].deferredOperations.pop())return e.reject(t),e.promise}function b(e,t){return new s((function(n,r){if(f[e.name]=f[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);m(e),e.db.close()}var i=[e.name],s=(t&&i.push(e.version),o.open.apply(o,i));t&&(s.onupgradeneeded=function(t){var n=s.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(h)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),r(s.error)},s.onsuccess=function(){var t=s.result;t.onversionchange=function(e){e.target.close()},n(t),y(e)}}))}function S(e){return b(e,!1)}function E(e){return b(e,!0)}function O(e,t){var n,r,o;return!e.db||(n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version,r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),(o||n)&&(n&&(n=e.db.version+1)>e.version&&(e.version=n),1))}function C(e){return i([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}(atob(e.data))],{type:e.type})}function T(e){return e&&e.__local_forage_encoded_blob}function w(e){var t=this,n=t._initReady().then((function(){var e=f[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(n,e,e),n}function I(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(0<r&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return s.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),E(e)})).then((function(){return function(e){m(e);for(var t=f[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,S(e).then((function(t){return e.db=t,O(e)?E(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw v(e,t),t}))}(e).then((function(){I(e,t,n,r-1)}))})).catch(n);n(o)}}var k={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=f[n.name],i=(o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},f[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=w),[]);function a(){return s.resolve()}for(var c=0;c<o.forages.length;c++){var u=o.forages[c];u!==t&&i.push(u._initReady().catch(a))}var l=o.forages.slice(0);return s.all(i).then((function(){return n.db=o.db,S(n)})).then((function(e){return n.db=e,O(n,t._defaultConfig.version)?E(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<l.length;r++){var i=l[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))},_support:function(){try{var e,t;return!(!o||!o.open)&&(e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code"),(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange)}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=new s((function(t,r){n.ready().then((function(){I(n._dbInfo,_,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var n,r=s.result;r?(T(n=r.value)&&(n=C(n)),void 0!==(n=e(n,r.key,a++))?t(n):r.continue()):t()},s.onerror=function(){r(s.error)}}catch(o){r(o)}}))})).catch(r)}));return a(r,t),r},getItem:function(e,t){var n=this,r=(e=u(e),new s((function(t,r){n.ready().then((function(){I(n._dbInfo,_,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;T(e=void 0===e?null:e)&&(e=C(e)),t(e)},s.onerror=function(){r(s.error)}}catch(o){r(o)}}))})).catch(r)})));return a(r,t),r},setItem:function(e,t,n){var r=this,o=(e=u(e),new s((function(n,o){var a;r.ready().then((function(){return a=r._dbInfo,"[object Blob]"===d.call(t)?(e=a.db,("boolean"==typeof p?s.resolve(p):(n=e,new s((function(e){var t=n.transaction(h,g),r=i([""]);t.objectStore(h).put(r,"key"),t.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},t.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||43<=parseInt(t[1],10))}})).catch((function(){return!1})).then((function(e){return p=e})))).then((function(e){return e?t:(n=t,new s((function(e,t){var r=new FileReader;r.onerror=t,r.onloadend=function(t){t=btoa(t.target.result||""),e({__local_forage_encoded_blob:!0,data:t,type:n.type})},r.readAsBinaryString(n)})));var n}))):t;var e,n})).then((function(t){I(r._dbInfo,g,(function(i,s){if(i)return o(i);try{var a=s.objectStore(r._dbInfo.storeName),c=(null===t&&(t=void 0),a.put(t,e));s.oncomplete=function(){n(t=void 0===t?null:t)},s.onabort=s.onerror=function(){var e=c.error||c.transaction.error;o(e)}}catch(i){o(i)}}))})).catch(o)})));return a(o,n),o},removeItem:function(e,t){var n=this,r=(e=u(e),new s((function(t,r){n.ready().then((function(){I(n._dbInfo,g,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(s.error)},i.onabort=function(){var e=s.error||s.transaction.error;r(e)}}catch(o){r(o)}}))})).catch(r)})));return a(r,t),r},clear:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){I(t._dbInfo,g,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error||i.transaction.error;n(e)}}catch(r){n(r)}}))})).catch(n)}));return a(n,e),n},length:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){I(t._dbInfo,_,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(r){n(r)}}))})).catch(n)}));return a(n,e),n},key:function(e,t){var n=this,r=new s((function(t,r){e<0?t(null):n.ready().then((function(){I(n._dbInfo,_,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName),a=!1,c=s.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||a?t(n.key):(a=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(o){r(o)}}))})).catch(r)}));return a(r,t),r},keys:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){I(t._dbInfo,_,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),s=[];i.onsuccess=function(){var t=i.result;t?(s.push(t.key),t.continue()):e(s)},i.onerror=function(){n(i.error)}}catch(r){n(r)}}))})).catch(n)}));return a(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n,r=this.config();return(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),a(n=e.name?(n=e.name===r.name&&this._dbInfo.db?s.resolve(this._dbInfo.db):S(e).then((function(t){var n=f[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t})),e.storeName?n.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1,r=(m(e),f[e.name]),i=r.forages;t.close();for(var a=0;a<i.length;a++){var c=i[a];c._dbInfo.db=null,c._dbInfo.version=n}return new s((function(t,r){var i=o.open(e.name,n);i.onerror=function(e){i.result.close(),r(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=e,y(n._dbInfo)}})).catch((function(t){throw(v(e,t)||s.resolve()).catch((function(){})),t}))}})):n.then((function(t){m(e);var n=f[e.name],r=n.forages;t.close();for(var i=0;i<r.length;i++)r[i]._dbInfo.db=null;return new s((function(t,n){var r=o.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)y(r[t]._dbInfo)})).catch((function(t){throw(v(e,t)||s.resolve()).catch((function(){})),t}))}))):s.reject("Invalid arguments"),t),n}},P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=/^~~local_forage_type~([^~]+)~/,M="__lfsc__:",N=M.length,R="arbf",D="blob",G=N+R.length,L=Object.prototype.toString;function x(e){var t,n,r,o,i=.75*e.length,s=e.length,a=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2])&&i--;i=new ArrayBuffer(i);for(var c=new Uint8Array(i),u=0;u<s;u+=4)t=P.indexOf(e[u]),n=P.indexOf(e[u+1]),r=P.indexOf(e[u+2]),o=P.indexOf(e[u+3]),c[a++]=t<<2|n>>4,c[a++]=(15&n)<<4|r>>2,c[a++]=(3&r)<<6|63&o;return i}function j(e){for(var t=new Uint8Array(e),n="",r=0;r<t.length;r+=3)n=(n=(n=(n+=P[t[r]>>2])+P[(3&t[r])<<4|t[r+1]>>4])+P[(15&t[r+1])<<2|t[r+2]>>6])+P[63&t[r+2]];return t.length%3==2?n=n.substring(0,n.length-1)+"=":t.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var U={serialize:function(e,t){var n="";if(e&&(n=L.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===L.call(e.buffer))){var r,o=M;e instanceof ArrayBuffer?(r=e,o+=R):(r=e.buffer,"[object Int8Array]"===n?o+="si08":"[object Uint8Array]"===n?o+="ui08":"[object Uint8ClampedArray]"===n?o+="uic8":"[object Int16Array]"===n?o+="si16":"[object Uint16Array]"===n?o+="ur16":"[object Int32Array]"===n?o+="si32":"[object Uint32Array]"===n?o+="ui32":"[object Float32Array]"===n?o+="fl32":"[object Float64Array]"===n?o+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(o+j(r))}else if("[object Blob]"===n)(n=new FileReader).onload=function(){var n="~~local_forage_type~"+e.type+"~"+j(this.result);t(M+D+n)},n.readAsArrayBuffer(e);else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if(e.substring(0,N)!==M)return JSON.parse(e);var t,n=e.substring(G),r=e.substring(N,G),o=(r===D&&A.test(n)&&(t=(e=n.match(A))[1],n=n.substring(e[0].length)),x(n));switch(r){case R:return o;case D:return i([o],{type:t});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw new Error("Unkown type: "+r)}},stringToBuffer:x,bufferToString:j};function B(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function z(e,t,n,r,o,i){e.executeSql(n,r,o,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?i(e,s):B(e,t,(function(){e.executeSql(n,r,o,i)}),i)}),i):i(e,s)}),i)}function H(e,t,n,r){var o=this,i=(e=u(e),new s((function(i,s){o.ready().then((function(){var a=t=void 0===t?null:t,c=o._dbInfo;c.serializer.serialize(t,(function(t,u){u?s(u):c.db.transaction((function(n){z(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(a)}),(function(e,t){s(t)}))}),(function(t){t.code===t.QUOTA_ERR&&(0<r?i(H.apply(o,[e,a,n,r-1])):s(t))}))}))})).catch(s)})));return a(i,n),i}var F={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new s((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(o){B(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=U,o},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new s((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){z(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,s=i.length,a=0;a<s;a++){var c=i.item(a),u=(u=c.value)&&o.serializer.deserialize(u);if(void 0!==(u=e(u,c.key,a+1)))return void t(u)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},getItem:function(e,t){var n=this,r=(e=u(e),new s((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){z(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){n=(n=n.rows.length?n.rows.item(0).value:null)&&o.serializer.deserialize(n),t(n)}),(function(e,t){r(t)}))}))})).catch(r)})));return a(r,t),r},setItem:function(e,t,n){return H.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this,r=(e=u(e),new s((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){z(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)})));return a(r,t),r},clear:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){z(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},length:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){z(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){n=n.rows.item(0).c,e(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},key:function(e,t){var n=this,r=new s((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){z(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){n=n.rows.length?n.rows.item(0).key:null,t(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},keys:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){z(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n=this.config(),r=((e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName),this),o=e.name?new s((function(t){var o,i=e.name===n.name?r._dbInfo.db:openDatabase(e.name,"","",0);e.storeName?t({db:i,storeNames:[e.storeName]}):t((o=i,new s((function(e,t){o.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).name);e({db:o,storeNames:r})}),(function(e,n){t(n)}))}),(function(e){t(e)}))}))))})).then((function(e){return new s((function(t,n){e.db.transaction((function(r){for(var o=[],i=0,a=e.storeNames.length;i<a;i++)o.push(function(e){return new s((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}(e.storeNames[i]));s.all(o).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):s.reject("Invalid arguments");return a(o,t),o}};function q(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}e={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=q(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),0}catch(e){return 1}}()||0<localStorage.length?((this._dbInfo=t).serializer=U,s.resolve()):s.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,s=1,a=0;a<i;a++){var c=localStorage.key(a);if(0===c.indexOf(r)){var u=(u=localStorage.getItem(c))&&t.serializer.deserialize(u);if(void 0!==(u=e(u,c.substring(o),s++)))return u}}}));return a(r,t),r},getItem:function(e,t){var n=this,r=(e=u(e),n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&t.serializer.deserialize(r)})));return a(r,t),r},setItem:function(e,t,n){var r=this,o=(e=u(e),r.ready().then((function(){var n=t=void 0===t?null:t;return new s((function(o,i){var s=r._dbInfo;s.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(s.keyPrefix+e,t),o(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||i(t),i(t)}}))}))})));return a(o,n),o},removeItem:function(e,t){var n=this,r=(e=u(e),n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)})));return a(r,t),r},clear:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;0<=n;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return a(n,e),n},length:function(e){var t=this.keys().then((function(e){return e.length}));return a(t,e),t},key:function(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(r){t=null}return t&&t.substring(r.keyPrefix.length)}));return a(r,t),r},keys:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return a(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments),(e="function"!=typeof e&&e||{}).name||(r=this.config(),e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n=this,r=e.name?new s((function(t){e.storeName?t(q(e,n._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):s.reject("Invalid arguments");return a(r,t),r}};var V=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Y={},W={},Z={INDEXEDDB:k,WEBSQL:F,LOCALSTORAGE:e},K=(e=[Z.INDEXEDDB._driver,Z.WEBSQL._driver,Z.LOCALSTORAGE._driver],["dropInstance"]),Q=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(K),X={description:"",driver:e.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function J(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var r in n)n.hasOwnProperty(r)&&(V(n[r])?e[r]=n[r].slice():e[r]=n[r])}return e}function $(e){var t,n,r;if(!(this instanceof $))throw new TypeError("Cannot call a class as a function");for(t in Z)Z.hasOwnProperty(t)&&(r=(n=Z[t])._driver,this[t]=r,Y[r]||this.defineDriver(n));this._defaultConfig=J({},X),this._config=J({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}$.prototype.config=function(e){if("object"!==(void 0===e?"undefined":r(e)))return"string"==typeof e?this._config[e]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)},$.prototype.defineDriver=function(e,t,n){var r=new s((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(e._driver){for(var i=Q.concat("_initStorage"),c=0,u=i.length;c<u;c++){var l=i[c];if((!function(e,t){for(var n,r,o=e.length,i=0;i<o;){if((n=e[i])===(r=t)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return 1;i++}}(K,l)||e[l])&&"function"!=typeof e[l])return void n(o)}for(var h=0,p=K.length;h<p;h++){var f=K[h];e[f]||(e[f]=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver");return a(t=s.reject(t),arguments[arguments.length-1]),t}}(f))}var d=function(n){Y[r]&&console.info("Redefining LocalForage driver: "+r),Y[r]=e,W[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,n):d(!!e._support):d(!0)}else n(o)}catch(o){n(o)}}));return c(r,t,n),r},$.prototype.driver=function(){return this._driver||null},$.prototype.getDriver=function(e,t,n){return c(e=Y[e]?s.resolve(Y[e]):s.reject(new Error("Driver not found.")),t,n),e},$.prototype.getSerializer=function(e){var t=s.resolve(U);return c(t,e),t},$.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(n,e,e),n},$.prototype.setDriver=function(e,t,n){var r=this,o=(V(e)||(e=[e]),this._getSupportedDrivers(e));function i(){r._config.driver=r.driver()}function a(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}return e=null!==this._driverSet?this._driverSet.catch((function(){return s.resolve()})):s.resolve(),this._driverSet=e.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){var t;r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=(t=o,function(){var e=0;return function n(){for(;e<t.length;){var o=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(a).catch(n)}i();var c=new Error("No available storage method found.");return r._driverSet=s.reject(c),r._driverSet}()})}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=s.reject(e),r._driverSet})),c(this._driverSet,t,n),this._driverSet},$.prototype.supports=function(e){return!!W[e]},$.prototype._extend=function(e){J(this,e)},$.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},$.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=Q.length;e<t;e++)!function(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}(this,Q[e])},$.prototype.createInstance=function(e){return new $(e)},e=new $,t.exports=e},{3:3}]},{},[4])(4)}).call(this,n(6))},function(e,t,n){var r;e.exports=(r=n(0),function(e){var t=r,n=(i=t.lib).WordArray,o=i.Hasher,i=t.algo,s=[];function a(e,t,n,r,o,i,s){return((s=e+(t&n|~t&r)+o+s)<<i|s>>>32-i)+t}function c(e,t,n,r,o,i,s){return((s=e+(t&r|n&~r)+o+s)<<i|s>>>32-i)+t}function u(e,t,n,r,o,i,s){return((s=e+(t^n^r)+o+s)<<i|s>>>32-i)+t}function l(e,t,n,r,o,i,s){return((s=e+(n^(t|~r))+o+s)<<i|s>>>32-i)+t}for(var h=0;h<64;h++)s[h]=4294967296*e.abs(e.sin(h+1))|0;i=i.MD5=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,o=e[r];e[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,h=e[t+0],p=e[t+1],f=e[t+2],d=e[t+3],_=e[t+4],g=e[t+5],m=e[t+6],y=e[t+7],v=e[t+8],b=e[t+9],S=e[t+10],E=e[t+11],O=e[t+12],C=e[t+13],T=e[t+14],w=e[t+15],I=a(i[0],A=i[1],P=i[2],k=i[3],h,7,s[0]),k=a(k,I,A,P,p,12,s[1]),P=a(P,k,I,A,f,17,s[2]),A=a(A,P,k,I,d,22,s[3]);I=a(I,A,P,k,_,7,s[4]),k=a(k,I,A,P,g,12,s[5]),P=a(P,k,I,A,m,17,s[6]),A=a(A,P,k,I,y,22,s[7]);I=a(I,A,P,k,v,7,s[8]),k=a(k,I,A,P,b,12,s[9]),P=a(P,k,I,A,S,17,s[10]),A=a(A,P,k,I,E,22,s[11]),I=a(I,A,P,k,O,7,s[12]),k=a(k,I,A,P,C,12,s[13]),P=a(P,k,I,A,T,17,s[14]),I=c(I,A=a(A,P,k,I,w,22,s[15]),P,k,p,5,s[16]),k=c(k,I,A,P,m,9,s[17]),P=c(P,k,I,A,E,14,s[18]),A=c(A,P,k,I,h,20,s[19]),I=c(I,A,P,k,g,5,s[20]),k=c(k,I,A,P,S,9,s[21]),P=c(P,k,I,A,w,14,s[22]),A=c(A,P,k,I,_,20,s[23]),I=c(I,A,P,k,b,5,s[24]),k=c(k,I,A,P,T,9,s[25]),P=c(P,k,I,A,d,14,s[26]),A=c(A,P,k,I,v,20,s[27]),I=c(I,A,P,k,C,5,s[28]),k=c(k,I,A,P,f,9,s[29]),P=c(P,k,I,A,y,14,s[30]),I=u(I,A=c(A,P,k,I,O,20,s[31]),P,k,g,4,s[32]),k=u(k,I,A,P,v,11,s[33]),P=u(P,k,I,A,E,16,s[34]),A=u(A,P,k,I,T,23,s[35]),I=u(I,A,P,k,p,4,s[36]),k=u(k,I,A,P,_,11,s[37]),P=u(P,k,I,A,y,16,s[38]),A=u(A,P,k,I,S,23,s[39]),I=u(I,A,P,k,C,4,s[40]),k=u(k,I,A,P,h,11,s[41]),P=u(P,k,I,A,d,16,s[42]),A=u(A,P,k,I,m,23,s[43]),I=u(I,A,P,k,b,4,s[44]),k=u(k,I,A,P,O,11,s[45]),P=u(P,k,I,A,w,16,s[46]),I=l(I,A=u(A,P,k,I,f,23,s[47]),P,k,h,6,s[48]),k=l(k,I,A,P,y,10,s[49]),P=l(P,k,I,A,T,15,s[50]),A=l(A,P,k,I,g,21,s[51]),I=l(I,A,P,k,O,6,s[52]),k=l(k,I,A,P,d,10,s[53]),P=l(P,k,I,A,S,15,s[54]),A=l(A,P,k,I,p,21,s[55]),I=l(I,A,P,k,v,6,s[56]),k=l(k,I,A,P,w,10,s[57]),P=l(P,k,I,A,m,15,s[58]),A=l(A,P,k,I,C,21,s[59]),I=l(I,A,P,k,_,6,s[60]),k=l(k,I,A,P,E,10,s[61]),P=l(P,k,I,A,f,15,s[62]),A=l(A,P,k,I,b,21,s[63]),i[0]=i[0]+I|0,i[1]=i[1]+A|0,i[2]=i[2]+P|0,i[3]=i[3]+k|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes,i=(n[o>>>5]|=128<<24-o%32,e.floor(r/4294967296));n[15+(64+o>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(64+o>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=(n=this._hash).words,a=0;a<4;a++){var c=s[a];s[a]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return n},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),t.MD5=o._createHelper(i),t.HmacMD5=o._createHmacHelper(i)}(Math),r.MD5)},function(e,t,n){var r,o,i,s,a;e.exports=(e=n(0),n(47),n(48),r=(s=(n=e).lib).Base,o=s.WordArray,s=(i=n.algo).MD5,a=i.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),s=o.create(),a=s.words,c=r.keySize,u=r.iterations;a.length<c;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var l=1;l<u;l++)n=i.finalize(n),i.reset();s.concat(n)}return s.sigBytes=4*c,s}}),n.EvpKDF=function(e,t,n){return a.create(n).compute(e,t)},e.EvpKDF)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicCode=t.ZegoTracer=t.ZegoSpan=void 0;var r=n(18),o=(Object.defineProperty(t,"ZegoTracer",{enumerable:!0,get:function(){return r.ZegoTracer}}),n(53)),i=(Object.defineProperty(t,"DynamicCode",{enumerable:!0,get:function(){return o.DynamicCode}}),n(12));Object.defineProperty(t,"ZegoSpan",{enumerable:!0,get:function(){return i.ZegoSpan}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoTracer=void 0;var r=n(19),o=n(25),i=n(12),s=n(26),a=n(4),c=n(2),u=n(10),l=n(27),h=n(42),p=n(13),f=n(51),d=n(52);function _(){this.tracingSpans=[],this._maxTracingSpanSize=s.DEFAULT_MAX_SPAN_SIZE,this.level=0,this.log=new f.ZegoLog,this.stateCenter=new d.StateCenter(this.log)}_.prototype.init=function(e){this.options=e,this.name=e.product,this.reporter=new l.ZegoDataReport(this.name,this.stateCenter),this.reporter.init({appID:e.appID,env:e.env||0,importantLevel:e.importantLevel,levels:e.levels,deviceID:e.deviceID,bps:e.bps,serverUrl:e.serverUrl}),this.tracer=new r.Tracer({name:this.name,version:e.version},{resource:new u.Resource(e.resources)},this.reporter,{spanStart:e.spanStart,spanBeforeEnd:e.spanBeforeEnd,spanEnd:e.spanEnd}),this.reporter.setProcessData(this.tracer.resource.attributes),this.initRoot(this.options),this.dyStore=p.createZegoStore(e.product+"_"+e.appID+"_dy",e.env||0)},_.prototype.initRoot=function(e){this.rootSpan=this.tracer.startSpan("root",0);var t=c.setSpan(this.tracer.context.active(),this.rootSpan);this.tracer.context._getContextManager()._currentContext=t,this.rootSpan.end()},_.prototype.createSpan=function(e,t,n){var r,u;return e<=this.level?(r=void 0,r=n&&n.parent?c.setSpan(this.tracer.context.active(),n.parent.span):c.setSpan(this.tracer.context.active(),this.rootSpan),u=[],n&&n.linkSpans&&(n.linkSpans.forEach((function(e){u.push({context:e.span.context()})})),delete n.linkSpans),r=this.tracer.startSpan(t,e,Object.assign({},n,{links:u}),r),this.tracingSpans.length>=this._maxTracingSpanSize&&a.log.warn("max to limit"),r=new i.ZegoSpan(r.spanContext.spanId,r),i.ZegoSpan.tracer=this.tracer,this.tracingSpans.push(r),r):(a.log.warn("createSpan level not fix"),new i.ZegoSpan(s.NOOP_SPAN_ID,new o.NoopSpan))},_.prototype.setLogger=function(e){this.stateCenter.logger=e},_.prototype.setTimeOffset=function(e){this.reporter.setTimeOffset(e)},_.prototype.setWaitNtpTimeout=function(e){this.reporter.setWaitNtpTimeout(e)},_.prototype.setLogLevel=function(e){return this.stateCenter._log.setLogLevel(e)},_.prototype.startReport=function(e){return this.reporter.startReport(e)},_.prototype.setConfig=function(e){this.reporter.setConfig(e)},_.prototype.loadJs=function(e,t,n,r,o,i){return h.loadJS(e,this.dyStore,t,n,r,o,i)},_.prototype.flush=function(e){this.reporter.flush(e)},_.prototype.setUnloadState=function(e){this.reporter.setUnloadState(e)},_.prototype.shutdown=function(){this.reporter.saveDataBeforeUnload()},_.prototype.setProcessorCallBack=function(e,t){},_.prototype.setSampleConfig=function(e){this.level=e.level||this.level},_.prototype.setResource=function(e){this.tracer.setResource(e),this.reporter.setProcessData(this.tracer.resource.attributes)},_.prototype.setNetStateCheck=function(){this.reporter.setNetStateCheck()},t.ZegoTracer=n=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tracer=void 0;var r=n(8),o=n(2),i=n(3),s=n(9),a=n(10),c=n(11),u=n(22),l=n(23);function h(e,t,n,r){var i=l.mergeConfig(t);this._traceParams=i.traceParams,this._idGenerator=new s.IdGenerator,this.resource=null!=(t=t.resource)?t:a.Resource.createTelemetrySDKResource(),this.instrumentationLibrary=e,e=Math.random().toString(36).slice(-6),this.context=new o.ContextAPI(e),this.reporter=n,this.spanProcessor=r||{}}h.prototype.startSpan=function(e,t,n,s){var a,l,h,p=function(e,t){if(!e.root)return o.getSpanContext(t)}(n=void 0===n?{}:n,s=void 0===s?this.context.active():s),f=this._idGenerator.generateSpanId(),d=(p&&u.isSpanContextValid(p)?(a=p.traceId,l=p.traceState,h=p.spanId):a=this._idGenerator.generateTraceId(),null!=(_=n.kind)?_:i.SpanKind.INTERNAL),_=null!=(p=n.links)?p:[];p=r.sanitizeAttributes(n.attributes);return n=i.TraceFlags.NONE,(_=new c.Span(this,s,e,t,{traceId:a,spanId:f,traceFlags:n,traceState:l},d,h,_)).setAttributes(p),this.spanProcessor.spanStart&&this.spanProcessor.spanStart(_),_},h.prototype.setResource=function(e){this.resource=this.resource.merge(new a.Resource(e))},h.prototype.getActiveTraceParams=function(){return this._traceParams},t.Tracer=n=h},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.StackContextManager=void 0,n(2));function s(){this._enabled=!1,this._currentContext=i.ROOT_CONTEXT}s.prototype._bindFunction=function(e,t){function n(){for(var n=this,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return r.with(t,(function(){return e.apply(n,o)}))}void 0===t&&(t=i.ROOT_CONTEXT);var r=this;return Object.defineProperty(n,"length",{enumerable:!1,configurable:!0,writable:!1,value:e.length}),n},s.prototype.active=function(){return this._currentContext},s.prototype.bind=function(e,t){return void 0===(t=void 0===t?i.ROOT_CONTEXT:t)&&(t=this.active()),"function"==typeof e?this._bindFunction(e,t):e},s.prototype.disable=function(){return this._currentContext=i.ROOT_CONTEXT,this._enabled=!1,this},s.prototype.enable=function(){return this._enabled||(this._enabled=!0,this._currentContext=i.ROOT_CONTEXT),this},s.prototype.with=function(e,t,n){for(var r=[],s=3;s<arguments.length;s++)r[s-3]=arguments[s];var a=this._currentContext;this._currentContext=e||i.ROOT_CONTEXT;try{return t.call.apply(t,o([n],r))}finally{this._currentContext=a}},t.StackContextManager=n=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTime=t.isTimeInput=t.hrTimeToMilliseconds=t.hrTimeDuration=t.timeInputToHrTime=t.isTimeInputHrTime=t.hrTime=void 0;var r=Math.pow(10,9),o=["00","01","02","03","04","05","06","07","08","09"];function i(e){var t=e/1e3;return[e=Math.trunc(t),Number((t-e).toFixed(9))*r]}function s(){var e,t=performance.timeOrigin;return"number"!=typeof t?(e=performance).timing&&e.timing.fetchStart:t}function a(e){var t=i(s()),n=i("number"==typeof e?e:performance.now());return e=t[0]+n[0],n=t[1]+n[1],r<n&&(n-=r,e+=1),[e,n]}function c(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}t.hrTime=a,t.isTimeInputHrTime=c,t.timeInputToHrTime=function(e){if(c(e))return e;if("number"==typeof e)return(e<s()?a:i)(e);if(e instanceof Date)return i(e.getTime());throw TypeError("Invalid input type")},t.hrTimeDuration=function(e,t){var n=t[0]-e[0];return(e=t[1]-e[1])<0&&(--n,e+=r),[n,e]},t.hrTimeToMilliseconds=function(e){return Math.round(1e3*e[0]+e[1]/1e6)},t.isTimeInput=function(e){return c(e)||"number"==typeof e||e instanceof Date},t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(o[e.getMonth()+1]||e.getMonth()+1)+"/",(o[e.getDate()]||e.getDate())+" ",(o[e.getHours()]||e.getHours())+":",(o[e.getMinutes()]||e.getMinutes())+":",o[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0,n=n(3);var r=/^([0-9a-f]{32})$/i,o=/^[0-9a-f]{16}$/i;function i(e){return r.test(e)&&e!==t.INVALID_TRACEID}function s(e){return o.test(e)&&e!==t.INVALID_SPANID}t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE},t.isValidTraceId=i,t.isValidSpanId=s,t.isSpanContextValid=function(e){return i(e.traceId)&&s(e.spanId)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeConfig=void 0;var r=n(24);t.mergeConfig=function(e){var t=Object.assign({},r.DEFAULT_CONFIG,e);return t.traceParams=Object.assign({},r.DEFAULT_CONFIG.traceParams,e.traceParams||{}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG=void 0,t.DEFAULT_CONFIG={traceParams:{numberOfAttributesPerSpan:128,numberOfLinksPerSpan:128,numberOfEventsPerSpan:128}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopSpan=void 0;var r=n(3);function o(e){void 0===e&&(e=r.INVALID_SPAN_CONTEXT),this._spanContext=e}o.prototype.context=function(){return this._spanContext},o.prototype.setAttribute=function(e,t){return this},o.prototype.appendAttribute=function(e,t){return this},o.prototype.setAttributes=function(e){return this},o.prototype.addEvent=function(e,t,n){return this},o.prototype.setStatus=function(e){return this},o.prototype.updateName=function(e){return this},o.prototype.end=function(e){},o.prototype.isRecording=function(){return!1},o.prototype.spanReport=function(){},o.prototype.recordException=function(e,t){},t.NoopSpan=n=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_SPAN_ID=t.SCHEDULED_DELAY_MILLIS=t.DEFAULT_MAX_SPAN_SIZE=t.readSpanKeys=void 0,t.readSpanKeys=["name","level","kind","spanContext","parentSpanId","startTime","endTime","status","attributes","links","events","duration","ended","resource","instrumentationLibrary"],t.DEFAULT_MAX_SPAN_SIZE=1e3,t.SCHEDULED_DELAY_MILLIS=3e3,t.NOOP_SPAN_ID="noop"},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,(c=o?[2&c[0],o.value]:c)[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3]))i.label=c[1];else if(6===c[0]&&i.label<o[1])i.label=o[1],o=c;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(c)}}c=t.call(e,i)}catch(a){c=[6,a],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoDataReport=void 0,n(1)),l=n(28),h=n(34),p=n(41),f=n(7),d=n(5);function _(e,t){this.stateCenter=t,this.QUEUE_MAX=100,this.cacheMaxSize=d.CACHE_SIZE.cacheMaxSize,this.cacheDelPer=d.CACHE_SIZE.cacheDelPer,this.state="normal",this.forceDataTotalLen=0,this.reportPackagesSize=0,this.staticConfig={totalAvailCache:d.CACHE_SIZE.totalAvailCache,totalDBSize:d.STORE_SIZE.totalDBSize,bps:1600},this.dataInDb=[],this.listenerList={progressUpdate:[],forceResult:[],postFail:[],dataDroped:[]},this.tempBuffer=[],this.traceType={MEM_I_API:0,MEM_O_DONE:0,MEM_O_DUMP:0,MEM_I_LOAD:0,DB_O_DROP:0,DB_O_DONE:0,DB_I_BACKUP:0},this.isPaused=!1,this.pro="json",this.isLoadReportData=!1,this.dropCount=0,this.timeInterval=!1,this.isWaitNtpTimeout=!1,this.waitNtpTimeout=2e3,this.postDataState="",this.product=e,this.reporterCommonField=new Map,this.reportMap=new Map}_.prototype.init=function(e){return o(this,void 0,void 0,(function(){var t=this;return i(this,(function(n){switch(n.label){case 0:return this.config=r(r({},d.DEFAULT_CONFIG),e),this.config.env%2!=1&&this.bindWindowListener(),this.zegoService=new l.ZegoService(this.config.env||u.ZEGO_ENV.BROWSER,this.config.bps||d.DEFAULT_CONFIG.bps,this.product,this.pro,this.stateCenter),this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token||"",appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.config.serverUrl&&this.zegoService.setLogServer(this.config.serverUrl),this.zegoService.setPostSucCallback(this.product,this.postSucHandler.bind(this)),this.zegoService.setPostFailCallback(this.product,(function(e){return o(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.stateCenter.logger.warn("zt.zd.i fail"),this.postDataState="fail",this.dropCount++,this.storePackagesDataToDB(e),[4,this.storePendingDataToDB(1)];case 1:return t.sent(),this._actionListener("postFail"),[2]}}))}))})),this.initPendingQueue(),this.storeHandler=new h.ZegoStoreHandler(this.product+"_"+this.config.appID+"_datareporter",f.uuid(6),this.config,this.traceType,this.staticConfig,this.stateCenter),this.storeHandler.setDropCallBack((function(e){t.traceType.DB_O_DROP+=f.calculateMemSize(e),t._actionListener("dataDroped",e)})),[4,this.storeHandler.loadPendingData()];case 1:return n.sent(),this.storeHandler.init().then((function(){t.loadReportData()})).catch((function(e){console.warn(e)})),this.startReportTimer(),this.setWaitNtpTimer(),this.checkCacheDataTimer(),[2]}}))}))},_.prototype.uninit=function(){this.isWaitNtpTimeout=!1,this.ntpTimer&&(clearTimeout(this.ntpTimer),this.ntpTimer=null)},_.prototype.setConfig=function(e){"object"==typeof e&&"number"==typeof e.bps&&(this.config.bps=e.bps,this.zegoService.setBps(this.config.bps)),"object"==typeof e&&"number"==typeof e.totalDBSize&&(this.staticConfig.totalDBSize=e.totalDBSize),"object"==typeof e&&"string"==typeof e.serverUrl&&""!==e.serverUrl&&(this.config.serverUrl=e.serverUrl,this.zegoService.setLogServer(this.config.serverUrl))},_.prototype.pause=function(){this.isPaused=!0},_.prototype.resume=function(){this.isPaused=!1;var e=(t=this.pendingQueue.getPendingDataInfo()).pendingDataSize,t=t.size;this.checkPendingQueue(e,t)},_.prototype.startReport=function(e){var t=e.get("userID"),n=e.get("token");return!(!t||"string"!=typeof t||!n||"string"!=typeof n||(this.startCommonField=e,this.config.userID=t,this.config.token=n,this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token,appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.isWithNtp()&&this.bufferDump(),(n=e.get("serverUrl"))&&(this.config.serverUrl=n,this.zegoService.setLogServer(this.config.serverUrl)),this.isConfigOK(this.config)&&(n=(e=this.pendingQueue.getPendingDataInfo()).pendingDataSize,e=e.size,this.checkPendingQueue(n,e)),0))},_.prototype.setTimeOffset=function(e){var t=this;this.clientTimeOffset=e,this.tempBuffer.forEach((function(e){(e=e.data).tags.time_offset||(e.tags.time_offset=t.clientTimeOffset)})),this.config.userID&&this.bufferDump()},_.prototype.setProcessData=function(e){this.stateCenter.processData=e},_.prototype.on=function(e,t){return this._bindListener(e,t)},_.prototype.off=function(e,t){return this._deleteListener(e,t)},_.prototype.report=function(e,t){var n,r;if(15e3<e.length)return!1;try{r=JSON.parse(e)}catch(e){return!1}return this.stateCenter._log.debug(e+" "+t),(null!=r&&r.id_name||null!=(n=null==r?void 0:r.tags)&&n.id_name||this.config.userID)&&this.isWithNtp()?(null!=r&&r.id_name||null!=(n=null==r?void 0:r.tags)&&n.id_name?this.clientTimeOffset&&(r.tags.time_offset=this.clientTimeOffset):(this.clientTimeOffset&&(r.tags.time_offset=this.clientTimeOffset),r.tags.id_name=this.config.userID),this.dumpData(JSON.stringify(r),t)):this.tempBuffer.push({data:r,level:t}),!0},_.prototype.setUnloadState=function(e){this.unloadLevel=e,this.state="unload"},_.prototype.dumpData=function(e,t){var n=this,r=f.calculateMemSize(e),o=(this.traceType.MEM_I_API+=r,u.getSeq()),i=(new Date).getTime(),s={seq:o,content:e,level:t,timestamp:i,packagedContent:""};"unload"===this.state?void 0!==this.unloadLevel&&t<=this.unloadLevel?(this.storeHandler.saveDataToStorage(s),this.pendingQueue.enqueue(s,t)):this.stateCenter._log.debug("level is low"):t<=this.config.importantLevel?(s.key=t+"_"+i+"_"+o,this.dataInDb.push(s.key),this.storeHandler.storeData(s).then((function(e){n.pendingQueue.enqueue(s,t),n.traceType.DB_I_BACKUP+=r})).catch((function(e){var r=n.dataInDb.findIndex((function(e){return e===s.key}));-1<r&&n.dataInDb.splice(r,1),n.pendingQueue.enqueue(s,t)}))):this.pendingQueue.enqueue(s,t),"force"===this.state&&(e=f.calculateMemSize(e),this.forceDataTotalLen+=e)},_.prototype.isWithNtp=function(){return this.isWaitNtpTimeout||void 0!==this.clientTimeOffset},_.prototype.bufferDump=function(){var e,t=this.tempBuffer.shift();t&&(e=t.data,t=t.level,e.tags.id_name=this.config.userID,this.dumpData(JSON.stringify(e),t),this.bufferDump())},_.prototype.isConfigOK=function(e){return""!==e.userID&&""!==e.token&&""!==e.server},_.prototype.testSize=function(e){},_.prototype.flush=function(e){var t;"force"!==this.state&&(this.state="force",t=16e6,"object"==typeof e&&"number"==typeof e.bps&&(t=e.bps),this.zegoService.setBps(t),this.forceDataTotalLen=this.storeHandler.storeSize+this.pendingQueue.pendingDataSize+this.reportPackagesSize,t=(e=this.pendingQueue.getPendingDataInfo()).pendingDataSize,e=e.size,0<t?this.checkPendingQueue(t,e):this.loadReportData())},_.prototype.setWaitNtpTimeout=function(e){this.waitNtpTimeout=e},_.prototype.setWaitNtpTimer=function(){var e=this;this.ntpTimer=setTimeout((function(){e.isWaitNtpTimeout=!0,e.config.userID&&e.bufferDump()}),this.waitNtpTimeout)},_.prototype.startReportTimer=function(){var e=this,t=(this.stateCenter._log.debug("startReportTimer "+new Date),this.timeInterval=!0,(n=this.pendingQueue.getPendingDataInfo()).pendingDataSize),n=n.size;this.checkPendingQueue(t,n),this.reportTimer=window.setTimeout((function(){e.startReportTimer()}),3e4)},_.prototype.checkCacheDataTimer=function(){return o(this,void 0,void 0,(function(){var e,t,n=this;return i(this,(function(r){switch(r.label){case 0:return t=this.pendingQueue.getPendingDataInfo(),e=t.pendingDataSize,t=t.size,e>this.config.reportSize||t>this.config.reportNum?[4,this.checkPendingQueue(e,t)]:[3,2];case 1:return r.sent(),[3,3];case 2:this.loadReportData(),r.label=3;case 3:return this.checkDataTimer=window.setTimeout((function(){n.checkCacheDataTimer()}),15e3),[2]}}))}))},_.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i);navigator.userAgent.indexOf("Firefox"),window.addEventListener(t?"pagehide":"beforeunload",(function(){window.event&&(window.event.cancelBubble=!0),e.saveDataBeforeUnload()}))},_.prototype.saveDataBeforeUnload=function(){var e=this.pendingQueue.readStoreData(1),t=(e.totalLen,e.storeArr);this.storeHandler.resetCommonStore(),(e=[]).push.apply(e,a(t)),t=this.zegoService.readReportQueueData(),e.push.apply(e,a(t)),0<e.length&&this.storeHandler.storePendingData(e)},_.prototype.setNetStateCheck=function(){"fail"===this.postDataState&&this.zegoService.handleNetConnect()},_.prototype.postSucHandler=function(e,t,n){return o(this,void 0,void 0,(function(){var n,r,o,s,a,c=this;return i(this,(function(i){switch(i.label){case 0:for(this.stateCenter._log.debug("post suc"),this.postDataState="suc",e.forEach((function(e){c.traceType.MEM_O_DONE+=f.calculateMemSize(e.content)})),n=function(t){var n=e[t];r.storeHandler.removeDataItem(n).then((function(e){n.key&&c.reportMap.delete(n.key)})).catch((function(e){}))},r=this,o=0;o<e.length;o++)n(o);return this.reportPackagesSize-=t,a=this.pendingQueue.getPendingDataInfo(),s=a.pendingDataSize,a=a.size,s>this.config.reportSize||a>this.config.reportNum?[4,this.checkPendingQueue(s,a)]:[3,2];case 1:return i.sent(),[3,3];case 2:this.loadReportData(),i.label=3;case 3:return"force"===this.state&&0==this.reportPackagesSize&&(a=this.reportPackagesSize+this.pendingQueue.pendingDataSize+this.storeHandler.storeSize,a=1-Number((a/this.forceDataTotalLen).toFixed(2)),this.listenerList.progressUpdate&&this._actionListener("progressUpdate",a),0<this.storeHandler.storeSize)&&this.loadReportData((function(e){0===e&&(c.state="normal",c.zegoService.setBps(c.config.bps||d.DEFAULT_CONFIG.bps),c.listenerList.forceSuccessCallback)&&c._actionListener("forceResult","SUCCESS")})),[2]}}))}))},_.prototype.checkPendingQueue=function(e,t){return o(this,void 0,void 0,(function(){var n,r,o,s,a;return i(this,(function(i){switch(i.label){case 0:return e>this.config.reportSize||t>this.config.reportNum||["force","unload"].includes(this.state)||this.timeInterval?(this.timeInterval=!1,!this.isPaused&&this.config.userID&&this.config.token&&this.config.serverUrl?[3,3]:(this.stateCenter._log.debug("isPaused "+this.isPaused+" "+this.userID+" "+this.config.token+" "+this.config.serverUrl),e>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.storePendingDataToDB(this.cacheDelPer)]:[3,2])):[3,7];case 1:i.sent(),i.label=2;case 2:return[2];case 3:return this.zegoService.reportAllowed()?[3,6]:(this.zegoService.resumeReport(),e>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.storePendingDataToDB(this.cacheDelPer)]:[3,5]);case 4:i.sent(),i.label=5;case 5:return[2];case 6:if(o=this.pendingQueue.readReportData(this.config.reportSize),n=o.totalLen,o=o.reportDataArr,n<=0)return[2];for(o=this.setCommonField(o),r=o.packageArr,o=o.packageLen,this.zegoService.report(r,o,this.product,"unload"===this.state),s=0;s<r.length;s++)a=r[s],this.reportMap.set(a.key,a);this.reportPackagesSize+=o,this.pendingQueue.refresh(n),i.label=7;case 7:return[2]}}))}))},_.prototype.initPendingQueue=function(){var e=this;this.pendingQueue=new p.PendingQueue(this.config.levels,this.product,this.staticConfig,this.stateCenter),this.pendingQueue.setListener({enCallback:function(t,n,r){return o(e,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.checkPendingQueue(r,n)];case 1:return e.sent(),[2]}}))}))}})},_.prototype.loadDBDataToMem=function(){var e=this;this.storeHandler.readStoreDataItem().then((function(t){var n=f.calculateMemSize(t.content);e.traceType.MEM_I_LOAD+=n,e.pendingQueue.enqueue(t,t.level)})).catch((function(e){}))},_.prototype.storePendingDataToDB=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o,s,a,u,l;return i(this,(function(h){switch(h.label){case 0:n=this.pendingQueue.readStoreData(e),t=n.totalLen,a=n.storeArr,n=function(e){var n,o;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,r.storeDataItem(e,t)];case 1:return i.sent(),n=e.level+"_"+e.timestamp+"_"+e.seq,-1<(o=r.dataInDb.findIndex((function(e){return e===n})))&&r.dataInDb.splice(o,1),[3,3];case 2:return i.sent(),[3,3];case 3:return[2]}}))},r=this,h.label=1;case 1:h.trys.push([1,6,7,8]),o=c(a),s=o.next(),h.label=2;case 2:return s.done?[3,5]:(a=s.value,[5,n(a)]);case 3:h.sent(),h.label=4;case 4:return s=o.next(),[3,2];case 5:return[3,8];case 6:return u={error:u=h.sent()},[3,8];case 7:try{s&&!s.done&&(l=o.return)&&l.call(o)}finally{if(u)throw u.error}return[7];case 8:return[2]}}))}))},_.prototype.storePackagesDataToDB=function(e){var t=this;e.length&&e.forEach((function(e){t.storeHandler.storeData(e).then((function(n){var r=f.calculateMemSize(e.content);t.traceType.MEM_O_DUMP+=r})).catch((function(e){}))}))},_.prototype.storeDataItem=function(e,t){var n=this;return new Promise((function(t,r){return o(n,void 0,void 0,(function(){var n;return i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.storeHandler.storeData(e)];case 1:return o.sent(),n=f.calculateMemSize(e.content),this.traceType.MEM_O_DUMP+=n,t(),[3,3];case 2:return n=o.sent(),r(n),[3,3];case 3:return[2]}}))}))}))},_.prototype.loadReportData=function(e){var t=this;this.storeHandler.storeSize<=0||this.isLoadReportData||(this.isLoadReportData=!0,this.storeHandler.loadDBData(this.config.reportSize,5,Math.floor(this.cacheMaxSize/3),(function(e){return-1<t.dataInDb.indexOf(e)})).then((function(n){t.isLoadReportData=!1,n.datas.forEach((function(e){var n;t.reportMap.has(e.key)||t.pendingQueue.findInQueue(e)||(n=f.calculateMemSize(e.content),t.traceType.MEM_I_LOAD+=n,t.pendingQueue.enqueue(e,e.level),t.dataInDb.push(e.key))})),e&&e(n.len)})).catch((function(e){t.isLoadReportData=!1})))},_.prototype.setCommonField=function(e){var t=this,n=0;return e.forEach((function(e){var r,o,i,a,u,l;if(e.packagedContent=JSON.parse(e.content),t.config.initCommonField)try{for(var h=c(t.config.initCommonField),p=h.next();!p.done;p=h.next()){var d=s(p.value,2),_=d[0],g=d[1];(E=JSON.parse(e.content))[_]=g,e.packagedContent=E}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}if(t.startCommonField)try{for(var m=c(t.startCommonField),y=m.next();!y.done;y=m.next()){var v=s(y.value,2);_=v[0],g=v[1];"userID"!==_&&"token"!==_&&"serverUrl"!==_&&((E=JSON.parse(e.content))[_]=g,e.packagedContent=E)}}catch(e){i={error:e}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}if(t.reporterCommonField)try{for(var b=c(t.reporterCommonField),S=b.next();!S.done;S=b.next()){var E,O=s(S.value,2);_=O[0],g=O[1],(E=JSON.parse(e.content))[_]=g,e.packagedContent=E}}catch(e){u={error:e}}finally{try{S&&!S.done&&(l=b.return)&&l.call(b)}finally{if(u)throw u.error}}n+=f.calculateMemSize(JSON.stringify(e.packagedContent))})),{packageArr:e,packageLen:n}},_.prototype._bindListener=function(e,t){return!!this.listenerList[e]&&"function"==typeof t&&(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0)},_.prototype._deleteListener=function(e,t){var n;return!!this.listenerList[e]&&(n=this.listenerList[e],t?n.splice(n.indexOf(t),1):this.listenerList[e]=[],!0)},_.prototype._actionListener=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.listenerList[e]&&this.listenerList[e].forEach((function(e){try{e.apply(void 0,a(t))}catch(e){}}))},t.ZegoDataReport=n=_},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoService=void 0,n(1)),s=n(29),a=n(33),c=n(5);function u(e,t,n,r,o){this.env=e,this.product=n,this.pro=r,this.stateCenter=o,this.websocket=null,this.packageLen=0,this.packagesDataSize=0,this.PACKAGE_MAX_LEN=5,this.msgID=0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCacheSend=[],this.logCacheMax=100,this.reportDataCheckInterval=1e3,this.postSucCallbackList={},this.postFailCallbackList={},this.failCount=0,this.failStartTime=0,this.netWorkFail=!1,this.networkState=i.ENUM_NETWORK_STATE.online,this.state=i.ENUM_CONNECT_STATE.disconnected,this.bindWindowListener(),this.networkState=i.ENUM_NETWORK_STATE.online,this.service=new s.LogService(e,n,r,o),this.setBps(t),this.reportQueue=new i.Queue}u.prototype.bindWindowListener=function(){var e=this;window.addEventListener("offline",(function(){e.networkState=i.ENUM_NETWORK_STATE.offline})),window.addEventListener("online",(function(t){e.handleNetConnect()}))},u.prototype.handleNetConnect=function(){this.networkState=i.ENUM_NETWORK_STATE.online;var e=this.url;this.url="",this.setLogServer(e),this.netWorkFail=!1},u.prototype.setLogServer=function(e){try{return e.startsWith("wss:")||e.startsWith("ws:")?(this.logType=i.ENUM_REMOTE_TYPE.WEBSOCKET,this.openWebSocketLogServer(e)):e.startsWith("https:")||e.startsWith("http:")?(this.logType=i.ENUM_REMOTE_TYPE.HTTPS,this.openHttpsLogServer(e)):this.logType=i.ENUM_REMOTE_TYPE.DISABLE,!0}catch(e){return!1}},u.prototype.setLogUrlParams=function(e){this.logParams=e},u.prototype.openWebSocketLogServer=function(e){var t=this;this.url!=e&&(this.url=e)&&(this.stopWebSocketServer(),this.logParams.id_name)&&(this.state=i.ENUM_CONNECT_STATE.connecting,e=e+"?product="+this.logParams.product+"&appid="+this.logParams.appid+"&token="+encodeURIComponent(this.logParams.signature)+"&deviceid="+this.logParams.deviceid+"&id_name="+this.logParams.id_name,this.service.createSocket(e),this.service.openHandler((function(){t.service.onPush(),t.service.startCheck(),t.stateCenter.logger.info("zt.rzs.owsls socket open"),t.openHandler()})),this.service.closeHandler((function(e){t.stateCenter.logger.warn("zt.rzs.owsls socket close "+JSON.stringify(e.code||e)),t.state=i.ENUM_CONNECT_STATE.disconnected,t.service.closeSocket()})),this.service.errorHandler((function(e){t.stateCenter.logger.warn("zt.rzs.owsls socket error "+JSON.stringify(e.code||e)),t.state=i.ENUM_CONNECT_STATE.disconnected,t.service.closeSocket()})))},u.prototype.stopWebSocketServer=function(){this.service.closeSocket()},u.prototype.openHttpsLogServer=function(e){(this.url=e)&&this.stopHttpsServer()},u.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},u.prototype.SendHttpsLog=function(e,t,n,r){this.env===i.ZEGO_ENV.BROWSER?this.SendHttpsLogWeb(e,t,n,r):this.SendHttpsLogWeChatMini(e,t,n,r)},u.prototype.SendHttpsLogWeb=function(e,t,n,r){var o=this,i=(e=JSON.stringify({body:{data:e}}),new XMLHttpRequest);i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){if(0!=i.responseText.length)try{var e=JSON.parse(i.responseText).interval;"number"==typeof e&&o.logUploadInterval!==e&&o.openHttpsLogServer(o.url),n&&n()}catch(e){r&&r()}}else r&&r()},i.open("POST",this.url,!0),i.send(e)},u.prototype.SendHttpsLogWeChatMini=function(e,t,n,r){var o=this;e={appid:this.logParams.appid+"",timestamp:(new Date).getTime()+"",token:this.logParams.signature,id_name:this.logParams.id_name,product:this.logParams.product,message_id:++this.msgID,req_sdk:1,s:JSON.stringify({speed_detail:e})},wx.request({url:this.url,data:JSON.stringify(e),method:"POST",success:function(e){0!=e.data.length&&("number"==typeof(e=e&&e.data&&e.data.interval)&&o.logUploadInterval!==e&&o.openHttpsLogServer(o.url),n)&&n()},fail:function(e){r&&r()}})},u.prototype.openHandler=function(){this.state=i.ENUM_CONNECT_STATE.connected,this.startReport()},u.prototype.setPostSucCallback=function(e,t){this.postSucCallbackList[e]=t},u.prototype.setPostFailCallback=function(e,t){this.postFailCallbackList[e]=t},u.prototype.reportAllowed=function(){return this.packageLen<this.PACKAGE_MAX_LEN},u.prototype.report=function(e,t,n,r){this.packageLen++,this.packagesDataSize+=t,this.reportQueue.enqueue({reportDatas:e,dataLen:t,product:n}),this.netWorkFail=!1,this.failCount=0,this.failStartTime=0,this.startReport(r)},u.prototype.setBps=function(e){this.tokenBucket=new a.TokenBucket(c.BUCKET_CONFIG.bucketSize,e/8,"sec")},u.prototype.startReport=function(e){var t,n,r,o,s=this;this.logType===i.ENUM_REMOTE_TYPE.WEBSOCKET&&this.state===i.ENUM_CONNECT_STATE.disconnected?(o=this.url,this.url="",this.setLogServer(o)):0<this.reportQueue.size()&&(o=this.reportQueue.dequeue(),t=o.reportDatas,n=o.dataLen,r=o.product,o=new Date,console.log("last",o,e),e?this.sendReport(t,n,r):this.tokenBucket.removeTokens(n,(function(){s.sendReport(t,n,r)})))},u.prototype.sendReport=function(e,t,n){var r=this;this.reportData(e,t,n,(function(){r.failCount=0,r.failStartTime=0,r.packageLen--,r.packagesDataSize-=t,r.postSucCallbackList[n]&&r.postSucCallbackList[n](e,t,n)}),(function(o){r.reportQueue.enqueue({reportDatas:e,dataLen:t,product:n}),r.failCount++,1==r.failCount&&(r.failStartTime=Date.now());var i,s=(Date.now()-r.failStartTime)/1e3;r.failCount>=c.FAIL_COUNT&&s>c.FAIL_TIME||r.failCount>=c.FAIL_MAX_COUNT?(r.netWorkFail=!0,i=r.decodeReportQueue(),Object.keys(r.postFailCallbackList).forEach((function(e){r.postFailCallbackList[n](i[e])}))):r.startReport()}))},u.prototype.resumeReport=function(){!0===this.netWorkFail&&this.networkState===i.ENUM_NETWORK_STATE.online&&(this.netWorkFail=!1,this.startReport())},u.prototype.reportData=function(e,t,n,r,o){var s=this,a=[];e.forEach((function(e){a.push(e.packagedContent)})),this.logType==i.ENUM_REMOTE_TYPE.WEBSOCKET?this.networkState!==i.ENUM_NETWORK_STATE.offline?this.service.sendMessage("report",a,r,(function(e){var t;s.state===i.ENUM_CONNECT_STATE.disconnected&&e===i.SOCKET_DISCONNECT&&(t=s.url,s.url="",s.setLogServer(t)),o&&o(e)})):o&&o(i.errorList.BROKEN):this.logType==i.ENUM_REMOTE_TYPE.HTTPS&&this.SendHttpsLog(a,t,r,(function(){o&&o()}))},u.prototype.unsigned2signed=function(e){var t=parseInt(e,10);if(256<t)return t%256;for(var n=[];0<t;)t%2!=0?n.push(1):n.push(0),t=Number(t/2);for(n.reverse();n.length<8;)n.unshift(0);var r="";if(1==(n=n.join("")).substr(0,1)){for(var o=1;o<n.length;o++)1==n.substr(o,1)?r+=0:r+=1;return"-"+(parseInt(r,2)+1)}for(o=0;o<n.length;o++)r+=n.substr(o,1);return parseInt(r,2)},u.prototype.decodeReportQueue=function(){for(var e={},t=this.reportQueue.size(),n=0;n<t;n++){var r,i=(r=this.reportQueue.dequeue()).reportDatas,s=r.dataLen;e[r=r.product]||(e[r]=[]),e[r]=o(e[r],i),this.reportQueue.enqueue({reportDatas:i,dataLen:s,product:r})}return e},u.prototype.readReportQueueData=function(){for(var e=[],t=this.reportQueue.size(),n=0;n<t;n++){var r=this.reportQueue.dequeue(),i=r.reportDatas;r.dataLen,r.product,e.push.apply(e,o(i))}return e},t.ZegoService=n=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogService=void 0;var r=n(30),o=n(5),i=n(1);function s(e,t,n,o){this.env=e,this.product=t,this.pro=n,this.stateCenter=o,this.service=new r.ZegoSocketService(this.env,this.product,this.pro,this.stateCenter),this.cmdSeq=0,this.responseRouters={}}s.prototype.handleSendCommandMsgRsp=function(e){var t,n,r=this,o=this.service.sendCommandMap[e.messageId||(null==(t=null==e?void 0:e.data)?void 0:t.message_id)];null!=o&&(n=o._data,delete this.service.sendCommandMap[e.messageId||(null==(t=null==e?void 0:e.data)?void 0:t.message_id)],this.service.sendCommandList.remove(o),0===e.code?setTimeout((function(){n&&null!=n.success&&n.success(e,r.cmdSeq)}),0):setTimeout((function(){n&&null!=n.error&&n.error(e,r.cmdSeq)}),0))},s.prototype.onPush=function(){var e=this;this.service.onMessage=function(t){e.handleSendCommandMsgRsp(t)}},s.prototype.closeHandler=function(e){this.service.closeHandler(e)},s.prototype.openHandler=function(e){this.service.openHandler(e)},s.prototype.errorHandler=function(e){this.service.errorHandler(e)},s.prototype.getHeader=function(e){return{Protocol:"req",cmd:e,appid:123,seq:++this.cmdSeq,session_id:""}},s.prototype.startCheck=function(){this.service.startCheck()},s.prototype.stopCheck=function(){this.service.stopCheck()},s.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},s.prototype.createSocket=function(e){this.service.createSocket(e),this.responseRouters={}},s.prototype.closeSocket=function(){this.service.closeSocket()},s.prototype.sendMessage=function(e,t,n,r,s,a){return this.service.isDisConnect()?(r&&r(i.SOCKET_DISCONNECT),0):(e=s||this.getHeader(e),this.service.sendMessage(e,t,n,r,{timeOut:1e3*o.DEFAULT_CONFIG.netTimeout}))},s.prototype.on=function(e,t){this.responseRouters[e]=t},t.LogService=n=s},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSocketService=void 0,n(31)),i=n(1),s=n(32);function a(e,t,n,r){this.product=t,this.pro=n,this.stateCenter=r,this.socket=null,this.sendCommandList=new i.LinkedList,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=3e4,this.sendDataCheckInterval=2e3,this.ENV=e}a.prototype.createSocket=function(e){this.socket=o.createZegoWebSocket(e,this.ENV),this.socket.binaryType="arraybuffer"},a.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},a.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},a.prototype.sendMessage=function(e,t,n,o,i){void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i={timeOut:6e3});var a=r(r({},this.stateCenter.processData),{time_upload:Date.now()});return n={data:a={message_id:e.seq,product:this.product,s:JSON.stringify({speed_detail:t,process:a})},seq:e.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:i.timeOut,success:n,error:o},o=this.sendCommandList.push(n),this.sendCommandMap[n.seq]=o,this.socket&&"pb"!==this.pro&&(this.stateCenter._log.debug("upload data",JSON.stringify(a)),a=s.deflate(JSON.stringify(a),{to:"string"}),this.socket.send(a)),e.seq},a.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)e.remove(t),t._data&&t._data.error&&setTimeout((function(){t&&t._data&&t._data.error&&t._data.error(i.errorList.TIMEOUT,t._data.data.message_id,t._data.data.s)}),0),t=e.getFirst()},a.prototype.checkMessageListTimeout=function(e,t){for(var n=e.getFirst(),r=Date.parse(new Date+""),o=0;!(null==n||n._data&&n._data.sendTime+n._data.timeOut>r||(n._data&&delete t[n._data.data.message_id],e.remove(n),n._data&&null==n._data.error||n._data&&n._data.sendTime+this.sendDataDropTimeout<r||n&&n._data&&n._data.error&&n._data.error(i.errorList.TIMEOUT,n._data.data.message_id,n._data.data.s),++o>=this.sendDataCheckOnceCount));)n=e.getFirst()},a.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},a.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},a.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(n){t.responseHandler(),e(n)})},a.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t.data))),e.onMessage(t)})},a.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},a.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},a.prototype.onMessage=function(e){},t.ZegoSocketService=n=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=void 0;var r=n(1),o=(i.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},i.prototype.onopen=function(e){},i.prototype.onerror=function(e){},i.prototype.onclose=function(e){},i.prototype.onmessage=function(e){},i.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},i.prototype.close=function(){this._websocket&&this._websocket.close()},i);function i(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}t.ZegoWeiXinMiniWebSocket=o,t.createZegoWebSocket=function(e,t){return new(t===r.ZEGO_ENV.BROWSER?WebSocket:o)(e)}},function(e,t,n){!function(e){"use strict";function t(e){for(var t=e.length;0<=--t;)e[t]=0}var n=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),r=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),i=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576),a=(t(s),new Array(60)),c=(t(a),new Array(512)),u=(t(c),new Array(256)),l=(t(u),new Array(29));t(l);var h,p,f,d=new Array(30);function _(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}function g(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function m(e){for(var t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function y(e){8<e.bi_valid?L(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function v(e,t,n,r){var o=2*t,i=2*n;return e[o]<e[i]||e[o]===e[i]&&r[t]<=r[n]}function b(e,t,o){var i,s,a,c,h=0;if(0!==e.last_lit)for(;i=e.pending_buf[e.d_buf+2*h]<<8|e.pending_buf[e.d_buf+2*h+1],s=e.pending_buf[e.l_buf+h],h++,0==i?j(e,s,t):(a=u[s],j(e,a+256+1,t),0!==(c=n[a])&&(s-=l[a],x(e,s,c)),a=G(--i),j(e,a,o),0!==(c=r[a])&&(i-=d[a],x(e,i,c))),h<e.last_lit;);j(e,256,t)}function S(e,t){var n,r,o,i=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==i[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(o=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[o]=0,e.opt_len--,a&&(e.static_len-=s[2*o+1]);for(t.max_code=u,n=e.heap_len>>1;1<=n;n--)z(e,i,n);for(o=c;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],z(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*o]=i[2*n]+i[2*r],e.depth[o]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=o,e.heap[1]=o++,z(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1];for(var l,h,p,f,d,_=e,g=t.dyn_tree,m=t.max_code,y=t.stat_desc.static_tree,v=t.stat_desc.has_stree,b=t.stat_desc.extra_bits,S=t.stat_desc.extra_base,E=t.stat_desc.max_length,O=0,C=0;C<=15;C++)_.bl_count[C]=0;for(g[2*_.heap[_.heap_max]+1]=0,l=_.heap_max+1;l<573;l++)(C=g[2*g[2*(h=_.heap[l])+1]+1]+1)>E&&(C=E,O++),g[2*h+1]=C,m<h||(_.bl_count[C]++,f=0,S<=h&&(f=b[h-S]),d=g[2*h],_.opt_len+=d*(C+f),v&&(_.static_len+=d*(y[2*h+1]+f)));if(0!==O){do{for(C=E-1;0===_.bl_count[C];)C--}while(_.bl_count[C]--,_.bl_count[C+1]+=2,_.bl_count[E]--,0<(O-=2));for(C=E;0!==C;C--)for(h=_.bl_count[C];0!==h;)(p=_.heap[--l])>m||(g[2*p+1]!==C&&(_.opt_len+=(C-g[2*p+1])*g[2*p],g[2*p+1]=C),h--)}B(i,u,e.bl_count)}function E(e,t,n){var r,o,i=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=s,s=t[2*(r+1)+1],++a<c&&o===s||(a<u?e.bl_tree[2*o]+=a:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,i=o,u=(a=0)===s?(c=138,3):o===s?(c=6,3):(c=7,4))}function O(e,t,n){var r,o,i=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),r=0;r<=n;r++)if(o=s,s=t[2*(r+1)+1],!(++a<c&&o===s)){if(a<u)for(;j(e,o,e.bl_tree),0!=--a;);else 0!==o?(o!==i&&(j(e,o,e.bl_tree),a--),j(e,16,e.bl_tree),x(e,a-3,2)):a<=10?(j(e,17,e.bl_tree),x(e,a-3,3)):(j(e,18,e.bl_tree),x(e,a-11,7));i=o,u=(a=0)===s?(c=138,3):o===s?(c=6,3):(c=7,4)}}function C(e,t,n,r){x(e,0+(r?1:0),3),r=t,t=n,y(n=e),L(n,t),L(n,~t),n.pending_buf.set(n.window.subarray(r,r+t),n.pending),n.pending+=t}function T(e,t,n,r){var o=V,i=r+n;e^=-1;for(var s=r;s<i;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}function w(e,t){return e.msg=Y[t],t}function I(e){return(e<<1)-(4<e?9:0)}function k(e){var t=e.state,n=t.pending;0!==(n=n>e.avail_out?e.avail_out:n)&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending)&&(t.pending_out=0)}function P(e,t){K(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,k(e.strm)}function A(e,t){e.pending_buf[e.pending++]=t}function M(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function N(e,t){var n,r,o=e.max_chain_length,i=e.strstart,s=e.prev_length,a=e.nice_match,c=e.strstart>e.w_size-_e?e.strstart-(e.w_size-_e):0,u=e.window,l=e.w_mask,h=e.prev,p=e.strstart+258,f=u[i+s-1],d=u[i+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(u[(n=t)+s]===d&&u[n+s-1]===f&&u[n]===u[i]&&u[++n]===u[i+1]){for(i+=2,n++;u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<p;);if(r=258-(p-i),i=p-258,s<r){if(e.match_start=t,a<=(s=r))break;f=u[i+s-1],d=u[i+s]}}}while((t=h[t&l])>c&&0!=--o);return s<=e.lookahead?s:e.lookahead}function R(e,t){for(var n,r;;){if(e.lookahead<_e){if(ye(e),e.lookahead<_e&&t===J)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=me(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-_e&&(e.match_length=N(e,n)),3<=e.match_length)if(r=Q(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&3<=e.lookahead){for(e.match_length--;e.strstart++,e.ins_h=me(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=me(e,e.ins_h,e.window[e.strstart+1]);else r=Q(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(P(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===te?(P(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(P(e,!1),0===e.strm.avail_out)?1:2}function D(e,t){for(var n,r,o;;){if(e.lookahead<_e){if(ye(e),e.lookahead<_e&&t===J)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=me(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-_e&&(e.match_length=N(e,n),e.match_length<=5)&&(e.strategy===ue||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2),3<=e.prev_length&&e.match_length<=e.prev_length){for(o=e.strstart+e.lookahead-3,r=Q(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=o&&(e.ins_h=me(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(P(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=Q(e,0,e.window[e.strstart-1]))&&P(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Q(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===te?(P(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(P(e,!1),0===e.strm.avail_out)?1:2}t(d);var G=function(e){return e<256?c[e]:c[256+(e>>>7)]},L=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},x=function(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,L(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},j=function(e,t,n){x(e,n[2*t],n[2*t+1])},U=function(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1},B=function(e,t,n){for(var r,o=new Array(16),i=0,s=1;s<=15;s++)o[s]=i=i+n[s-1]<<1;for(r=0;r<=t;r++){var a=e[2*r+1];0!==a&&(e[2*r]=U(o[a]++,a))}},z=function(e,t,n){for(var r=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&v(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!v(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r},H=!1,F=C,q=function(e,t,n,r){for(var o=65535&e|0,i=e>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;i=i+(o=o+t[r++]|0)|0,--s;);o%=65521,i%=65521}return o|i<<16|0},V=new Uint32Array(function(){for(var e=[],t=0;t<256;t++){for(var n=t,r=0;r<8;r++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}()),Y={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},W={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Z=F,K=function(e,t,n,r){var o,c,u,l=0;if(0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(n=32;n<256;n++)if(0!==e.dyn_ltree[2*n])return 1;return 0}(e)),S(e,e.l_desc),S(e,e.d_desc),l=function(e){var t;for(E(e,e.dyn_ltree,e.l_desc.max_code),E(e,e.dyn_dtree,e.d_desc.max_code),S(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*i[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(c=e.static_len+3+7>>>3)<=o&&(o=c)):o=c=n+5,n+4<=o&&-1!==t)C(e,t,n,r);else if(4===e.strategy||c===o)x(e,2+(r?1:0),3),b(e,s,a);else{x(e,4+(r?1:0),3);var h=e,p=(t=e.l_desc.max_code+1,n=e.d_desc.max_code+1,l+1);for(x(h,t-257,5),x(h,n-1,5),x(h,p-4,4),u=0;u<p;u++)x(h,h.bl_tree[2*i[u]+1],3);O(h,h.dyn_ltree,t-1),O(h,h.dyn_dtree,n-1),b(e,e.dyn_ltree,e.dyn_dtree)}m(e),r&&y(e)},Q=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(u[n]+256+1)]++,e.dyn_dtree[2*G(t)]++),e.last_lit===e.lit_bufsize-1},X=function(e){x(e,2,3),j(e,256,s),16===(e=e).bi_valid?(L(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},J=W.Z_NO_FLUSH,$=W.Z_PARTIAL_FLUSH,ee=W.Z_FULL_FLUSH,te=W.Z_FINISH,ne=W.Z_BLOCK,re=W.Z_OK,oe=W.Z_STREAM_END,ie=W.Z_STREAM_ERROR,se=W.Z_DATA_ERROR,ae=W.Z_BUF_ERROR,ce=W.Z_DEFAULT_COMPRESSION,ue=W.Z_FILTERED,le=W.Z_HUFFMAN_ONLY,he=W.Z_RLE,pe=W.Z_FIXED,fe=W.Z_UNKNOWN,de=W.Z_DEFLATED,_e=262,ge=function(e){for(var t=e.length;0<=--t;)e[t]=0},me=function(e,t,n){return(t<<e.hash_shift^n)&e.hash_mask},ye=function(e){var t,n,r,o,i,s,a,c,u,l=e.w_size;do{if(c=e.window_size-e.lookahead-e.strstart,e.strstart>=l+(l-_e)){for(e.window.set(e.window.subarray(l,l+l),0),e.match_start-=l,e.strstart-=l,e.block_start-=l,t=n=e.hash_size;r=e.head[--t],e.head[t]=l<=r?r-l:0,--n;);for(t=n=l;r=e.prev[--t],e.prev[t]=l<=r?r-l:0,--n;);c+=l}if(0===e.strm.avail_in)break;if(i=e.strm,s=e.window,a=e.strstart+e.lookahead,c=c,u=void 0,n=0===(u=(u=i.avail_in)>c?c:u)?0:(i.avail_in-=u,s.set(i.input.subarray(i.next_in,i.next_in+u),a),1===i.state.wrap?i.adler=q(i.adler,s,u,a):2===i.state.wrap&&(i.adler=T(i.adler,s,u,a)),i.next_in+=u,i.total_in+=u,u),e.lookahead+=n,3<=e.lookahead+e.insert)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=me(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=me(e,e.ins_h,e.window[o+3-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<_e&&0!==e.strm.avail_in)};function ve(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}var be=[new ve(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ye(e),0===e.lookahead&&t===J)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,P(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-_e&&(P(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(P(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(P(e,!1),e.strm.avail_out),1)})),new ve(4,4,8,4,R),new ve(4,5,16,8,R),new ve(4,6,32,32,R),new ve(4,4,16,16,D),new ve(8,16,32,32,D),new ve(8,16,128,128,D),new ve(8,32,128,256,D),new ve(32,128,258,1024,D),new ve(32,258,258,4096,D)];function Se(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=de,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ge(this.dyn_ltree),ge(this.dyn_dtree),ge(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ge(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ge(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ee=function(e){if(!e||!e.state)return w(e,ie);e.total_in=e.total_out=0,e.data_type=fe;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=J,function(e){if(!H){for(var t,i,y,v=new Array(16),b=0,S=0;S<28;S++)for(l[S]=b,t=0;t<1<<n[S];t++)u[b++]=S;for(u[b-1]=S,S=y=0;S<16;S++)for(d[S]=y,t=0;t<1<<r[S];t++)c[y++]=S;for(y>>=7;S<30;S++)for(d[S]=y<<7,t=0;t<1<<r[S]-7;t++)c[256+y++]=S;for(i=0;i<=15;i++)v[i]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,v[8]++;for(;t<=255;)s[2*t+1]=9,t++,v[9]++;for(;t<=279;)s[2*t+1]=7,t++,v[7]++;for(;t<=287;)s[2*t+1]=8,t++,v[8]++;for(B(s,287,v),t=0;t<30;t++)a[2*t+1]=5,a[2*t]=U(t,5);h=new _(s,n,257,286,15),p=new _(a,r,0,30,15),f=new _(new Array(0),o,0,19,7),H=!0}e.l_desc=new g(e.dyn_ltree,h),e.d_desc=new g(e.dyn_dtree,p),e.bl_desc=new g(e.bl_tree,f),e.bi_buf=0,e.bi_valid=0,m(e)}(t),re};function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){}for(var Ce=new Uint8Array(256),Te=0;Te<256;Te++)Ce[Te]=252<=Te?6:248<=Te?5:240<=Te?4:224<=Te?3:192<=Te?2:1;function we(e){for(var t,n,r,o,i=e.length,s=0,a=0;a<i;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<i&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=o=0;o<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<i&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t}function Ie(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}Ce[254]=Ce[254]=1;var ke=Object.prototype.toString,Pe=W.Z_NO_FLUSH,Ae=W.Z_SYNC_FLUSH,Me=W.Z_FULL_FLUSH,Ne=W.Z_FINISH,Re=W.Z_OK,De=W.Z_STREAM_END,Ge=W.Z_DEFAULT_COMPRESSION,Le=W.Z_DEFAULT_STRATEGY,xe=W.Z_DEFLATED;function je(e){this.options=function(e){for(var t,n,r=Array.prototype.slice.call(arguments,1);r.length;){var o=r.shift();if(o){if("object"!==Oe(o))throw new TypeError(o+"must be non-object");for(var i in o)t=o,n=i,Object.prototype.hasOwnProperty.call(t,n)&&(e[i]=o[i])}}return e}({level:Ge,method:xe,chunkSize:16384,windowBits:15,memLevel:8,strategy:Le},e||{});var t,n=((e=this.options).raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ie,this.strm.avail_out=0,function(e,t,n,r,o,i){if(!e)return ie;var s=1;if(t===ce&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),o<1||9<o||n!==de||r<8||15<r||t<0||9<t||i<0||pe<i)return w(e,ie);8===r&&(r=9);var a=new Se;return(e.state=a).strm=e,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=+a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=i,a.method=n,(r=Ee(s=e))===re&&((s=s.state).window_size=2*s.w_size,ge(s.head),s.max_lazy_match=be[s.level].max_lazy,s.good_match=be[s.level].good_length,s.nice_match=be[s.level].nice_length,s.max_chain_length=be[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=2,s.match_available=0,s.ins_h=0),r}(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy));if(n!==Re)throw new Error(Y[n]);if(e.header&&(r=this.strm,t=e.header,r&&r.state&&2===r.state.wrap&&(r.state.gzhead=t)),e.dictionary){var r="string"==typeof e.dictionary?we(e.dictionary):"[object ArrayBuffer]"===ke.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary;if((n=function(e,t){var n=t.length;if(!e||!e.state)return ie;var r=e.state,o=r.wrap;if(2===o||1===o&&42!==r.status||r.lookahead)return ie;1===o&&(e.adler=q(e.adler,t,n,0)),r.wrap=0,n>=r.w_size&&(0===o&&(ge(r.head),r.strstart=0,r.block_start=0,r.insert=0),(i=new Uint8Array(r.w_size)).set(t.subarray(n-r.w_size,n),0),t=i,n=r.w_size);var i=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,ye(r);3<=r.lookahead;){for(var c=r.strstart,u=r.lookahead-2;r.ins_h=me(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++,--u;);r.strstart=c,r.lookahead=2,ye(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=a,e.avail_in=i,r.wrap=o,re}(this.strm,r))!==Re)throw new Error(Y[n]);this._dict_set=!0}}function Ue(e,t){if((t=new je(t)).push(e,!0),t.err)throw t.msg||Y[t.err];return t.result}function Be(e,t){return(t=t||{}).raw=!0,Ue(e,t)}function ze(e,t){return(t=t||{}).gzip=!0,Ue(e,t)}je.prototype.push=function(e,t){var n,r,o,i,s=this.strm,a=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?Ne:Pe,"string"==typeof e?s.input=we(e):"[object ArrayBuffer]"===ke.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;)if(0===s.avail_out&&(s.output=new Uint8Array(a),s.next_out=0,s.avail_out=a),(r===Ae||r===Me)&&s.avail_out<=6)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else{if((n=function(e,t){var n,r;if(!e||!e.state||ne<t||t<0)return e?w(e,ie):ie;var o=e.state;if(!e.output||!e.input&&0!==e.avail_in||666===o.status&&t!==te)return w(e,0===e.avail_out?ae:ie);o.strm=e;var i=o.last_flush;if(o.last_flush=t,42===o.status&&(2===o.wrap?(e.adler=0,A(o,31),A(o,139),A(o,8),o.gzhead?(A(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),A(o,255&o.gzhead.time),A(o,o.gzhead.time>>8&255),A(o,o.gzhead.time>>16&255),A(o,o.gzhead.time>>24&255),A(o,9===o.level?2:o.strategy>=le||o.level<2?4:0),A(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(A(o,255&o.gzhead.extra.length),A(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=T(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(A(o,0),A(o,0),A(o,0),A(o,0),A(o,0),A(o,9===o.level?2:o.strategy>=le||o.level<2?4:0),A(o,3),o.status=113)):(s=de+(o.w_bits-8<<4)<<8,s|=(o.strategy>=le||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(s|=32),s+=31-s%31,o.status=113,M(o,s),0!==o.strstart&&(M(o,e.adler>>>16),M(o,65535&e.adler)),e.adler=1)),69===o.status)if(o.gzhead.extra){for(n=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>n&&(e.adler=T(e.adler,o.pending_buf,o.pending-n,n)),k(e),n=o.pending,o.pending!==o.pending_buf_size));)A(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>n&&(e.adler=T(e.adler,o.pending_buf,o.pending-n,n)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){n=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>n&&(e.adler=T(e.adler,o.pending_buf,o.pending-n,n)),k(e),n=o.pending,o.pending===o.pending_buf_size)){r=1;break}}while(r=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,A(o,r),0!==r);o.gzhead.hcrc&&o.pending>n&&(e.adler=T(e.adler,o.pending_buf,o.pending-n,n)),0===r&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){n=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>n&&(e.adler=T(e.adler,o.pending_buf,o.pending-n,n)),k(e),n=o.pending,o.pending===o.pending_buf_size)){r=1;break}}while(r=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,A(o,r),0!==r);o.gzhead.hcrc&&o.pending>n&&(e.adler=T(e.adler,o.pending_buf,o.pending-n,n)),0===r&&(o.status=103)}else o.status=103;if(103===o.status&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&k(e),o.pending+2<=o.pending_buf_size&&(A(o,255&e.adler),A(o,e.adler>>8&255),e.adler=0,o.status=113)):o.status=113),0!==o.pending){if(k(e),0===e.avail_out)return o.last_flush=-1,re}else if(0===e.avail_in&&I(t)<=I(i)&&t!==te)return w(e,ae);if(666===o.status&&0!==e.avail_in)return w(e,ae);if(0!==e.avail_in||0!==o.lookahead||t!==J&&666!==o.status){var s=o.strategy===le?function(e,t){for(var n;;){if(0===e.lookahead&&(ye(e),0===e.lookahead)){if(t===J)return 1;break}if(e.match_length=0,n=Q(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(P(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(P(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(P(e,!1),0===e.strm.avail_out)?1:2}(o,t):o.strategy===he?function(e,t){for(var n,r,o,i,s=e.window;;){if(e.lookahead<=258){if(ye(e),e.lookahead<=258&&t===J)return 1;if(0===e.lookahead)break}if(e.match_length=0,3<=e.lookahead&&0<e.strstart&&(r=s[o=e.strstart-1])===s[++o]&&r===s[++o]&&r===s[++o]){for(i=e.strstart+258;r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&o<i;);e.match_length=258-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(3<=e.match_length?(n=Q(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Q(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(P(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(P(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(P(e,!1),0===e.strm.avail_out)?1:2}(o,t):be[o.level].func(o,t);if(3!==s&&4!==s||(o.status=666),1===s||3===s)return 0===e.avail_out&&(o.last_flush=-1),re;if(2===s&&(t===$?X(o):t!==ne&&(Z(o,0,0,!1),t===ee)&&(ge(o.head),0===o.lookahead)&&(o.strstart=0,o.block_start=0,o.insert=0),k(e),0===e.avail_out))return o.last_flush=-1,re}return t===te&&(o.wrap<=0||(2===o.wrap?(A(o,255&e.adler),A(o,e.adler>>8&255),A(o,e.adler>>16&255),A(o,e.adler>>24&255),A(o,255&e.total_in),A(o,e.total_in>>8&255),A(o,e.total_in>>16&255),A(o,e.total_in>>24&255)):(M(o,e.adler>>>16),M(o,65535&e.adler)),k(e),0<o.wrap&&(o.wrap=-o.wrap),0===o.pending))?oe:re}(s,r))===De)return 0<s.next_out&&this.onData(s.output.subarray(0,s.next_out)),i=void 0,n=(o=this.strm)&&o.state?42!==(i=o.state.status)&&69!==i&&73!==i&&91!==i&&103!==i&&113!==i&&666!==i?w(o,ie):(o.state=null,113===i?w(o,se):re):ie,this.onEnd(n),this.ended=!0,n===Re;if(0!==s.avail_out){if(0<r&&0<s.next_out)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else if(0===s.avail_in)break}else this.onData(s.output)}return!0},je.prototype.onData=function(e){this.chunks.push(e)},je.prototype.onEnd=function(e){e===Re&&(this.result=function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;for(var o=new Uint8Array(t),i=0,s=0,a=e.length;i<a;i++){var c=e[i];o.set(c,s),s+=c.length}return o}(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var He={Deflate:je,deflate:F=Ue,deflateRaw:Be,gzip:ze,constants:W};e.Deflate=je,e.constants=W,e.default=He,e.deflate=F,e.deflateRaw=Be,e.gzip=ze,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";function r(e,t,n,r){if(this.bucketSize=1,this.tokensPerInterval=1,this.interval=1e3,this.parentBucket=null,this.content=0,this.lastDrip=0,this.bucketSize=e,this.tokensPerInterval=t,"string"==typeof n)switch(n){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+n)}else this.interval=n;this.parentBucket=r,this.content=0,this.lastDrip=+new Date}Object.defineProperty(t,"__esModule",{value:!0}),t.TokenBucket=void 0,r.prototype.removeTokens=function(e,t){var n=this;return this.bucketSize?e>this.bucketSize?(setTimeout(t.bind(null,"Requested tokens "+e+" exceeds bucket size "+this.bucketSize,null),0),!1):(this.drip(),e>this.content?r():this.parentBucket?this.parentBucket.removeTokens(e,(function(o,i){return o?t(o,null):e>n.content?r():(n.content-=e,void t(null,Math.min(i,n.content)))})):(this.content-=e,setTimeout(t.bind(null,null,this.content),0),!0)):(setTimeout(t.bind(null,null,e,Number.POSITIVE_INFINITY),0),!0);function r(){var r=Math.ceil((e-n.content)*(n.interval/n.tokensPerInterval));return setTimeout((function(){n.removeTokens(e,t)}),r),!1}},r.prototype.tryRemoveTokens=function(e){return!(this.bucketSize&&(e>this.bucketSize||(this.drip(),e>this.content)||this.parentBucket&&!this.parentBucket.tryRemoveTokens(e)||(this.content-=e,0)))},r.prototype.drip=function(){var e,t;this.tokensPerInterval?(e=+new Date,t=Math.max(e-this.lastDrip,0),this.lastDrip=e,t*=this.tokensPerInterval/this.interval,this.content=Math.min(this.content+t,this.bucketSize)):this.content=this.bucketSize},t.TokenBucket=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,(c=o?[2&c[0],o.value]:c)[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3]))i.label=c[1];else if(6===c[0]&&i.label<o[1])i.label=o[1],o=c;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(c)}}c=t.call(e,i)}catch(a){c=[6,a],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStoreHandler=void 0,n(13)),a=n(7),c=n(5),u=i(n(14));function l(e,t,n,r,o,i){this.name=e,this.storeName=t,this.config=n,this.traceType=r,this.staticConfig=o,this.stateCenter=i,this.storeSize=0,this.storeTime=0,this.storeDelPer=c.STORE_SIZE.storeDelPer,this.updateTimeFreq=6e4,this.storeSleepInterval=6e5,this.droping=!1,this.bufferData=[],this.updateTimer=null,this.interSymbol="#",this.drops=[],this.storesKeys="",this.transStores=[],this.store=s.createZegoStore(e,n.env,t),this.commonStore=s.createZegoStore("data_common",n.env,"reporter")}Object.defineProperty(l.prototype,"KEY",{get:function(){return"z_t_"+this.config.appID},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"STORES_KEY",{get:function(){return"z_store_keys"},enumerable:!1,configurable:!0}),l.prototype.init=function(){return r(this,void 0,void 0,(function(){var e,t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,6,,7]),this.setCommonStoreState(),[4,this.transferStoreData()];case 1:return n.sent(),[4,this.commonStore.getItem(this.name+this.interSymbol+this.storeName)];case 2:return(e=n.sent())?[3,4]:(t={storeSize:this.storeSize,lock:0,pros:1},[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,t)]);case 3:return n.sent(),[3,5];case 4:t="string"==typeof e?JSON.parse(e):e,this.storeSize=t.storeSize,n.label=5;case 5:return[3,7];case 6:return n.sent(),[3,7];case 7:return[2]}}))}))},l.prototype.uninit=function(){this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)},l.prototype.setCommonStoreState=function(){var e=this,t=(this.getStorage(this.STORES_KEY)||"").split(";");this.transStores=t.filter((function(t){return t.includes(e.config.appID+"")})),t=t.filter((function(t){return!t.includes(e.config.appID+"")})),this.storesKeys=t.join(";"),console.warn("storesKeys",this.storesKeys)},l.prototype.resetCommonStore=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return console.warn("storesKeys",this.storesKeys),e=0<this.storesKeys.length?";":"",console.warn("pre",e),this.saveStorage(this.STORES_KEY,this.storesKeys+e+this.name+this.interSymbol+this.storeName),[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,{storeSize:this.storeSize,lock:0,pros:0})];case 1:return t.sent(),[2]}}))}))},l.prototype.transferStoreData=function(){return r(this,void 0,void 0,(function(){var e,t,n,i,c=this;return o(this,(function(u){switch(u.label){case 0:return[4,this.commonStore.keys()];case 1:e=u.sent(),console.warn("transferStoreData"+JSON.stringify(e)),t=function(t){var i,u,l,h,p,f,d,_;return o(this,(function(g){switch(g.label){case 0:return(i=e[t])===n.name+n.interSymbol+n.storeName?[3,9]:[4,n.commonStore.getItem(i)];case 1:return u=g.sent(),console.warn("store val",i,u,n.transStores),(u="string"==typeof u?JSON.parse(u):u).lock||u.pros&&!n.transStores.includes(i)?[3,9]:(h=i.split(n.interSymbol),l=h[0],h=h[1],[4,(p=s.createZegoStore(l,n.config.env,h)).keys()]);case 2:return f=g.sent(),console.warn("oldStoreKeys",f),0!=f.length?[3,3]:[3,8];case 3:return u.lock=1,[4,n.commonStore.setItem(i,u)];case 4:g.sent(),d=function(e){var t,i,s,u,l;return o(this,(function(h){switch(h.label){case 0:return t=f[e],[4,p.getItem(t)];case 1:return i=h.sent(),console.warn("oldStoreKeys",t,i),-1!==t.indexOf("pending")?(console.log("pending",i),i&&JSON.parse(i).forEach((function(e){return r(c,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.storeData(e)];case 1:return t.sent(),[2]}}))}))}))):(l=a.analyzeKey(t),s=l.level,u=l.timestamp,l=l.seq,n.storeData({level:s,timestamp:u,seq:l,content:i})),setTimeout((function(){return r(c,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,p.removeItem(t)];case 1:return e.sent(),[2]}}))}))}),300),[2]}}))},_=0,g.label=5;case 5:return _<f.length?[5,d(_)]:[3,8];case 6:g.sent(),g.label=7;case 7:return _++,[3,5];case 8:n.drops.push({name:l,storeName:h}),g.label=9;case 9:return[2]}}))},n=this,i=0,u.label=2;case 2:return i<e.length?[5,t(i)]:[3,5];case 3:u.sent(),u.label=4;case 4:return i++,[3,2];case 5:return this.transportStorageData(),setTimeout((function(){return r(c,void 0,void 0,(function(){var e,t,n;return o(this,(function(r){switch(r.label){case 0:e=0,r.label=1;case 1:if(!(e<this.drops.length))return[3,7];n=this.drops[e],t=n.name,n=n.storeName,r.label=2;case 2:return r.trys.push([2,5,,6]),[4,this.dropInstance(t,n)];case 3:return r.sent(),[4,this.commonStore.removeItem(t+this.interSymbol+n)];case 4:case 5:return r.sent(),[3,6];case 6:return e++,[3,1];case 7:return[2]}}))}))}),1e3),[2]}}))}))},l.prototype.dropInstance=function(e,t){return new Promise((function(n,r){u.default.dropInstance({name:e+":"+t}).then((function(){n()})).catch((function(e){r(e)}))}))},l.prototype.setDropCallBack=function(e){this.dropCallBack=e},l.prototype.storeData=function(e){var t=this;return console.debug("storeData",e),new Promise((function(n,i){return r(t,void 0,void 0,(function(){var t,r,i,s,c,u=this;return o(this,(function(o){switch(o.label){case 0:t=e.level,r=e.timestamp,s=e.seq,i=e.content,s=t+"_"+r+"_"+s,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.store.getItem(s)];case 2:return o.sent()?(n(),[2]):[3,4];case 3:return o.sent(),[3,4];case 4:if(this.droping)return this.bufferData.push(e),[2];if(c=a.calculateMemSize(s)+a.calculateMemSize(i),this.staticConfig.totalDBSize-c<=0)return this.dropDBData(t,s,i).then((function(){u.droping=!1,u.bufferDump()})).catch((function(e){})),n(),[2];o.label=5;case 5:return o.trys.push([5,8,,9]),[4,this.store.setItem(s,i)];case 6:return o.sent(),this.storeSize+=c,this.staticConfig.totalDBSize-=c,[4,this.refreshStoreInfo()];case 7:return o.sent(),n(),[3,9];case 8:return"QuotaExceededError"===o.sent().name&&this.dropDBData(t,s,i).then((function(){u.droping=!1,u.bufferDump()})).catch((function(e){})),[3,9];case 9:return[2]}}))}))}))},l.prototype.loadPendingData=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return[4,this.store.keys()];case 1:return t.sent().forEach((function(t){return r(e,void 0,void 0,(function(){var e,n=this;return o(this,(function(i){switch(i.label){case 0:return-1===t.indexOf("pending")?[3,3]:[4,this.store.getItem(t)];case 1:return(e=i.sent())?(JSON.parse(e).forEach((function(e){return r(n,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.storeData(e)];case 1:return t.sent(),[2]}}))}))})),[4,this.store.removeItem(t)]):[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))})),[2]}}))}))},l.prototype.storePendingData=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.store.setItem("pending"+(new Date).getTime(),JSON.stringify(e))];case 1:return t.sent(),[2]}}))}))},l.prototype.bufferDump=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return(e=this.bufferData.pop())?[4,this.storeData(e)]:[3,2];case 1:t.sent(),this.bufferDump(),t.label=2;case 2:return[2]}}))}))},l.prototype.dropDBData=function(e,t,n){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(i){return this.droping=!0,[2,new Promise((function(i,s){return r(e,void 0,void 0,(function(){var e,r,c,u;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,10,,11]),[4,this.store.keys()];case 1:(c=o.sent()).reverse(),e=Math.ceil(c.length*this.storeDelPer),u=0,o.label=2;case 2:return u<e?[4,this.store.getItem(c[u])]:[3,7];case 3:return null==(r=o.sent())?[3,6]:[4,this.store.removeItem(c[u])];case 4:return o.sent(),c=a.calculateMemSize(c[u])+a.calculateMemSize(r),this.staticConfig.totalDBSize+=c,this.storeSize-=c,[4,this.refreshStoreInfo()];case 5:o.sent(),this.dropCallBack(r),o.label=6;case 6:return u++,[3,2];case 7:return[4,this.store.setItem(t,n)];case 8:return o.sent(),this.storeSize+=a.calculateMemSize(t)+a.calculateMemSize(n),[4,this.refreshStoreInfo()];case 9:return o.sent(),i(),[3,11];case 10:return u=o.sent(),s(u),[3,11];case 11:return[2]}}))}))}))]}))}))},l.prototype.removeDataItem=function(e){var t=this;return new Promise((function(n,i){return r(t,void 0,void 0,(function(){var t,r,s,c,u;return o(this,(function(o){switch(o.label){case 0:t=e.level,r=e.timestamp,s=e.seq,e.content,s=t+"_"+r+"_"+s,o.label=1;case 1:return o.trys.push([1,6,,7]),[4,this.store.getItem(s)];case 2:return(c=o.sent())?[4,this.store.removeItem(s)]:[3,5];case 3:return o.sent(),u=1==this.config.env?a.calculateMemSize(JSON.parse(c)):a.calculateMemSize(c),u=a.calculateMemSize(s)+u,this.storeSize-=u,this.staticConfig.totalDBSize+=u,this.traceType.DB_O_DONE+=u,[4,this.refreshStoreInfo()];case 4:o.sent(),n(),o.label=5;case 5:return[3,7];case 6:return u=o.sent(),i(u),[3,7];case 7:return[2]}}))}))}))},l.prototype.refreshStoreInfo=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,this.commonStore.getItem(this.name+this.interSymbol+this.storeName)];case 1:return e.sent()?[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,{storeSize:this.storeSize,lock:0,pros:1})]:[3,3];case 2:e.sent(),e.label=3;case 3:return[3,5];case 4:return e.sent(),[3,5];case 5:return[2]}}))}))},l.prototype.readStoreDataItem=function(){var e=this;return new Promise((function(t,n){return r(e,void 0,void 0,(function(){var e,r,i,s;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.store.keys()];case 1:return r=o.sent(),[4,this.store.getItem(r[0])];case 2:return s=o.sent(),i=a.analyzeKey(r[0]),e=i.level,r=i.timestamp,i=i.seq,t({level:e,timestamp:r,seq:i,content:s}),[3,4];case 3:return s=o.sent(),n(s),[3,4];case 4:return[2]}}))}))}))},l.prototype.loadDBData=function(e,t,n,i){var s=this;return new Promise((function(c,u){return r(s,void 0,void 0,(function(){var r,s,l,h,p,f,d,_,g,m;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),[4,this.store.keys()];case 1:r=o.sent(),s=[],p=h=m=l=0,o.label=2;case 2:return p<r.length?i(r[p])?[3,4]:[4,this.store.getItem(r[p])]:[3,5];case 3:if(null==(g=o.sent()))return[3,4];if(_=a.analyzeKey(r[p]),f=_.level,d=_.timestamp,_=_.seq,s.push({level:f,timestamp:d,seq:_,content:g,key:r[p]}),g=a.calculateMemSize(g),m+=g,e<=(l+=g)&&(l=0,h++),t<=h&&n<=m)return[3,5];o.label=4;case 4:return p++,[3,2];case 5:return c({datas:s,len:m}),[3,7];case 6:return m=o.sent(),u(m),[3,7];case 7:return[2]}}))}))}))},l.prototype.sortKeys=function(e,t){void 0===t&&(t=!1),e.sort((function(e,t){var n=e.split("_");return(t=(t=+(e=t.split("_"))[0]-+n[0])||+e[1]-+n[1])||+e[2]-+n[2]})),t&&e.reverse()},l.prototype.saveStorage=function(e,t){try{localStorage.setItem(e,t)}catch(e){this.stateCenter._log.debug("storage set err")}},l.prototype.getStorage=function(e){try{return localStorage.getItem(e)}catch(e){this.stateCenter._log.debug("storage get err")}},l.prototype.saveDataToStorage=function(e){try{var t=e.level,n=e.timestamp,r=e.seq,o=e.content,i=t+"_"+n+"_"+r;this.saveStorage(this.KEY+"_"+i,o)}catch(e){this.stateCenter._log.debug("saveDataToStorage "+JSON.stringify(e))}},l.prototype.transportStorageData=function(){for(var e=[],t=0;t<localStorage.length;t++){var n,r,o,i,s=localStorage.key(t);this.stateCenter._log.debug("transportStorageData "+s),null!=s&&s.startsWith(this.KEY)&&(o=s.replace(this.KEY+"_",""),n=(i=a.analyzeKey(o)).level,r=i.timestamp,o=i.seq,"string"==typeof(i=this.getStorage(s))&&this.storeData({level:n,timestamp:r,seq:o,content:i}),e.push(s))}setTimeout((function(){for(var t=0;t<e.length;t++)localStorage.removeItem(e[t])}),100)},t.ZegoStoreHandler=n=l},function(e,t,n){"use strict";var r=n(36),o=n(37).Buffer;e.exports=function(e){return function e(t){return function(n){if(o.isBuffer(n))return n.length;switch(typeof n){case"string":return n.length*r.STRING;case"boolean":return r.BOOLEAN;case"number":return r.NUMBER;case"symbol":return Symbol.keyFor&&Symbol.keyFor(n)?Symbol.keyFor(n).length*r.STRING:(n.toString().length-8)*r.STRING;case"object":if(Array.isArray(n))return n.map(e(t)).reduce((function(e,t){return e+t}),0);var i=t,s=n;if(null==s)return 0;for(var a=0,c=function(e){var t,n=[];for(t in e)n.push(t);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(e),Array.prototype.push.apply(n,e)),n}(s),u=0;u<c.length;u++){var l=c[u];if("object"==typeof s[l]&&null!==s[l]){if(i.has(s[l]))continue;i.add(s[l])}a+=e(i)(l);try{a+=e(i)(s[l])}catch(i){i instanceof RangeError&&(a=0)}}return a;default:return 0}}}(new WeakSet)(e)}},function(e,t){e.exports={STRING:2,BOOLEAN:4,NUMBER:8}},function(e,t,n){"use strict";(function(e){var r=n(38),o=n(39),i=n(40);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(e=null===e?new c(t):e).length=t,e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"!=typeof e)return u(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=e,s=t,u=n;if(s.byteLength,u<0||s.byteLength<u)throw new RangeError("'offset' is out of bounds");if(s.byteLength<u+(r||0))throw new RangeError("'length' is out of bounds");return s=void 0===u&&void 0===r?new Uint8Array(s):void 0===r?new Uint8Array(s,u):new Uint8Array(s,u,r),c.TYPED_ARRAY_SUPPORT?(o=s).__proto__=c.prototype:o=p(o,s),o}if("string"==typeof t){if(u=e,r=t,s=n,c.isEncoding(s="string"==typeof s&&""!==s?s:"utf8"))return(s=(u=a(u,o=0|d(r,s))).write(r,s))!==o?u.slice(0,s):u;throw new TypeError('"encoding" must be a valid string encoding')}var l;n=e,r=t;if(c.isBuffer(r))return 0!==(n=a(n,l=0|f(r.length))).length&&r.copy(n,0,0,l),n;if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||(l=r.length)!=l?a(n,0):p(n,r);if("Buffer"===r.type&&i(r.data))return p(n,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(l(t),e=a(e,t<0?0:0|f(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|f(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function d(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var n=(e="string"!=typeof e?""+e:e).length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return P(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return A(e).length;default:if(r)return P(e).length;t=(""+t).toLowerCase(),r=!0}}function _(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?o?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):m(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,o){var i=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=i=2,a/=2,n/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o)for(var u=-1,l=n;l<s;l++)if(c(e,l)===c(t,-1===u?0:l-u)){if(l-(u=-1===u?l:u)+1===a)return u*i}else-1!==u&&(l-=l-u),u=-1;else for(l=n=s<n+a?s-a:n;0<=l;l--){for(var h=!0,p=0;p<a;p++)if(c(e,l+p)!==c(t,p)){h=!1;break}if(h)return l}return-1}function y(e,t,n,r){return M(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function v(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,s,a,c,u=e[o],l=null,h=239<u?4:223<u?3:191<u?2:1;if(o+h<=n)switch(h){case 1:u<128&&(l=u);break;case 2:128==(192&(i=e[o+1]))&&127<(c=(31&u)<<6|63&i)&&(l=c);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&2047<(c=(15&u)<<12|(63&i)<<6|63&s)&&(c<55296||57343<c)&&(l=c);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(c=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&a)&&c<1114112&&(l=c)}null===l?(l=65533,h=1):65535<l&&(r.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=h}var p=r,f=p.length;if(f<=b)return String.fromCharCode.apply(String,p);for(var d="",_=0;_<f;)d+=String.fromCharCode.apply(String,p.slice(_,_+=b));return d}t.Buffer=c,t.SlowBuffer=function(e){return c.alloc(+(e=+e!=e?0:e))},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol)&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0}),c.alloc=function(e,t,n){return l(e),e<=0||void 0===t?a(null,e):"string"==typeof n?a(null,e).fill(t,n):a(null,e).fill(t)},c.allocUnsafe=function(e){return h(null,e)},c.allocUnsafeSlow=function(e){return h(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var n=c.allocUnsafe(t),r=0,o=0;o<e.length;++o){var s=e[o];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?v(this,0,e):function(e,t,n){var o=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var i=t,s=n,a=this.length;(!s||s<0||a<s)&&(s=a);for(var c,u="",l=i=!i||i<0?0:i;l<s;++l)u+=(c=this[l])<16?"0"+c.toString(16):c.toString(16);return u;case"utf8":case"utf-8":return v(this,t,n);case"ascii":a=t;var h=n,p="";h=Math.min(this.length,h);for(var f=a;f<h;++f)p+=String.fromCharCode(127&this[f]);return p;case"latin1":case"binary":i=t;var d=n,_="";d=Math.min(this.length,d);for(var g=i;g<d;++g)_+=String.fromCharCode(this[g]);return _;case"base64":return y=n,0===(m=t)&&y===this.length?r.fromByteArray(this):r.fromByteArray(this.slice(m,y));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var m=t,y=n,b=this.slice(m,y),S="",E=0;E<b.length;E+=2)S+=String.fromCharCode(b[E]+256*b[E+1]);return S;default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}.apply(this,arguments)},c.prototype.equals=function(e){if(c.isBuffer(e))return this===e||0===c.compare(this,e);throw new TypeError("Argument must be a Buffer")},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n)&&(e+=" ... "),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(o<=r&&n<=t)return 0;if(o<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(r,o),l=e.slice(t,n),h=0;h<a;++h)if(u[h]!==l[h]){i=u[h],s=l[h];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||o<n)&&(n=o),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,s,a,c,u=!1;;)switch(r){case"hex":var l,h=e,p=n,f=(l=Number(t)||0,this.length-l);if((!p||f<(p=Number(p)))&&(p=f),(f=h.length)%2!=0)throw new TypeError("Invalid hex string");f/2<p&&(p=f/2);for(var d=0;d<p;++d){var _=parseInt(h.substr(2*d,2),16);if(isNaN(_))return d;this[l+d]=_}return d;case"utf8":case"utf-8":return s=t,a=n,M(P(e,(i=this).length-s),i,s,a);case"ascii":return y(this,e,t,n);case"latin1":case"binary":return y(this,e,t,n);case"base64":return i=this,s=t,a=n,M(A(e),i,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f=t,c=n,M(function(e,t){for(var n,r,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,o.push(r%=256),o.push(n);return o}(e,this.length-f),this,f,c);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function S(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function E(e,t,n,r,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function C(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function T(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function w(e,t,n,r,i){return i||T(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function I(e,t,n,r,i){return i||T(e,0,n,8),o.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(o=this.subarray(e,t)).__proto__=c.prototype;else for(var r=t-e,o=new c(r,void 0),i=0;i<r;++i)o[i]=this[i+e];return o},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e+--t],o=1;0<t&&(o*=256);)r+=this[e+--t]*o;return r},c.prototype.readUInt8=function(e,t){return t||S(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||S(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||S(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=t,o=1,i=this[e+--r];0<r&&(o*=256);)i+=this[e+--r]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){return t||S(e,2,this.length),32768&(e=this[e]|this[e+1]<<8)?4294901760|e:e},c.prototype.readInt16BE=function(e,t){return t||S(e,2,this.length),32768&(e=this[e+1]|this[e]<<8)?4294901760|e:e},c.prototype.readInt32LE=function(e,t){return t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||S(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||S(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||S(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||S(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||E(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||E(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):C(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):C(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){e=+e,t|=0,r||E(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){e=+e,t|=0,r||E(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=n-1,i=1,s=0;for(this[t+o]=255&e;0<=--o&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):C(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):C(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return w(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return w(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return I(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return I(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var o,i=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&n<t&&t<r)for(o=i-1;0<=o;--o)e[o+t]=this[o+n];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){var o;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length&&(o=e.charCodeAt(0))<256&&(e=o),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(!(n<=t))if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else for(var i=c.isBuffer(e)?e:P(new c(e,r).toString()),s=i.length,a=0;a<n-t;++a)this[a+t]=i[a%s];return this};var k=/[^+\/0-9A-Za-z-_]/g;function P(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!o){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&i.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,n<128){if(--t<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function A(e){return r.toByteArray(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(k,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function M(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(6))},function(e,t,n){"use strict";t.byteLength=function(e){var t;return 3*((e=(t=u(e))[0])+(t=t[1]))/4-t},t.toByteArray=function(e){for(var t,n=(r=u(e))[0],r=r[1],s=new i(3*(n+r)/4-r),a=0,c=0<r?n-4:n,l=0;l<c;l+=4)t=o[e.charCodeAt(l)]<<18|o[e.charCodeAt(l+1)]<<12|o[e.charCodeAt(l+2)]<<6|o[e.charCodeAt(l+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return 2===r&&(t=o[e.charCodeAt(l)]<<2|o[e.charCodeAt(l+1)]>>4,s[a++]=255&t),1===r&&(t=o[e.charCodeAt(l)]<<10|o[e.charCodeAt(l+1)]<<4|o[e.charCodeAt(l+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],s=0,a=n-o;s<a;s+=16383)i.push(function(e,t){for(var n,o=[],i=s;i<t;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(r[n>>18&63]+r[n>>12&63]+r[n>>6&63]+r[63&n]);return o.join("")}(e,a<s+16383?a:s+16383));return 1==o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2==o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],o[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return[e=-1===(e=e.indexOf("="))?t:e,e===t?0:4-e%4]}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,u=c>>1,l=-7,h=n?o-1:0,p=n?-1:1;for(n=e[t+h],h+=p,i=n&(1<<-l)-1,n>>=-l,l+=a;0<l;i=256*i+e[t+h],h+=p,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;0<l;s=256*s+e[t+h],h+=p,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(n?-1:1);s+=Math.pow(2,r),i-=u}return(n?-1:1)*s*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var s,a,c=8*i-o-1,u=(1<<c)-1,l=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,f=r?1:-1;for(i=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(t+=1<=s+l?h/r:h*Math.pow(2,1-l))*r&&(s++,r/=2),u<=s+l?(a=0,s=u):1<=s+l?(a=(t*r-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));8<=o;e[n+p]=255&a,p+=f,a/=256,o-=8);for(s=s<<o|a,c+=o;0<c;e[n+p]=255&s,p+=f,s/=256,c-=8);e[n+p-f]|=128*i}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.PendingQueue=void 0,n(1)),s=n(7);function a(e,t,n,r){var o=this;this.levels=e,this.product=t,this.staticConfig=n,this.stateCenter=r,this.byteLength=0,this.size=0,this.pendingDataSize=0,this.cacheMap=new Map,e.forEach((function(e){o.cacheMap.set(e,new i.Queue)}))}a.prototype.enqueue=function(e,t){!(t=this.cacheMap.get(t))||t.all().find((function(t){return t.content==e.content}))||(t.enqueue(e),t=s.calculateMemSize(e.content),this.pendingDataSize+=t,this.size++,this.staticConfig.totalAvailCache-=t,this.enCallback&&this.enCallback(this.byteLength,this.size,this.pendingDataSize))},a.prototype.dequeue=function(e){return e=null==(e=this.cacheMap.get(e))?void 0:e.dequeue(),this.size--,this.deCallback&&this.deCallback(),e},a.prototype.findInQueue=function(e){var t=null==(t=this.cacheMap.get(e.level))?void 0:t.all();return null==t?void 0:t.find((function(t){return t.key===e.key}))},a.prototype.readReportData=function(e){var t=o(this.cacheMap.entries());return e=this.readData(t,e,!0),this.reset(),{totalLen:e.totalLen,reportDataArr:e.resArr}},a.prototype.readStoreData=function(e){var t=Math.ceil(this.pendingDataSize*e);return e=o(this.cacheMap.entries()).reverse(),t=this.readData(e,t,!1),this.refresh(t.totalLen),{totalLen:t.totalLen,storeArr:t.resArr}},a.prototype.readData=function(e,t,n){var o=[],i=0;e:for(var a=0;a<e.length;a++)for(var c=r(e[a],2),u=c[0],l=c[1];l.size();){var h=this.dequeue(u);if(o.push(h),t<(i+=s.calculateMemSize(h.content)))break e}return{totalLen:i,resArr:o}},a.prototype.decodeReportData=function(e){var t=this;e.forEach((function(e){t.enqueue(e,e.level)}))},a.prototype.setListener=function(e){this.enCallback=e.enCallback,this.deCallback=e.deCallback},a.prototype.getPendingDataInfo=function(){return{pendingDataSize:this.pendingDataSize,size:this.size}},a.prototype.refresh=function(e){this.pendingDataSize-=e,this.staticConfig.totalAvailCache+=e},a.prototype.reset=function(){this.byteLength=0},t.PendingQueue=n=a},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,(c=o?[2&c[0],o.value]:c)[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3]))i.label=c[1];else if(6===c[0]&&i.label<o[1])i.label=o[1],o=c;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(c)}}c=t.call(e,i)}catch(a){c=[6,a],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.loadJS=void 0,n(43));function s(e,t,n){return(t=i.decrypt(e,t))&&i.hashMd5(t)===n?t:""}t.loadJS=function(e,t,n,i,a,c,u){var l=this;return new Promise((function(h,p){return r(l,void 0,void 0,(function(){var l,f,d,_,g;return o(this,(function(m){switch(m.label){case 0:if(l="dy",e)return[3,7];m.label=1;case 1:return m.trys.push([1,5,,6]),[4,t.getItem("code")];case 2:return f=m.sent(),[4,t.getItem("key")];case 3:return d=m.sent(),[4,t.getItem("hash")];case 4:_=m.sent();var y=s(f,d,_)||c,v=l,b=u,S=document.getElementsByTagName("HEAD").item(0),E=document.createElement("script");E.language="javascript",E.type="text/javascript",E.id=v,E.param=b;try{E.appendChild(document.createTextNode(y))}catch(v){E.text=y}return S.appendChild(E),h(),[3,6];case 5:return m.sent(),p(),[3,6];case 6:return[2];case 7:if(window.ActiveXObject)try{g=new ActiveXObject("Msxml2.XMLHTTP")}catch(m){g=new ActiveXObject("Microsoft.XMLHTTP")}else window.XMLHttpRequest&&(g=new XMLHttpRequest);return g.open("GET",n,!0),g.send(null),g.onreadystatechange=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:if(4!=g.readyState)return[3,10];if(!(200<=g.status&&g.status<300||0==g.status||304==g.status))return[3,8];e.label=1;case 1:return e.trys.push([1,6,,7]),s(g.responseText,i,a)?[4,t.setItem("code",g.responseText)]:[3,5];case 2:return e.sent(),[4,t.setItem("key",i)];case 3:return e.sent(),[4,t.setItem("hash",a)];case 4:e.sent(),e.label=5;case 5:return h(),[3,7];case 6:return e.sent(),p(),[3,7];case 7:return[2];case 8:return p(),[2];case 9:return[3,11];case 10:case 11:return[2]}}))}))},[2]}}))}))}))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.hashMd5=t.decrypt=void 0,r(n(15))),i=r(n(45)),s=r(n(50));t.decrypt=function(e,t){var n="";try{n=i.default.decrypt(e,t).toString(s.default)}catch(e){}return n},t.hashMd5=function(e){return o.default(e).toString()}},function(e,t){},function(e,t,n){var r;e.exports=(r=n(0),n(46),n(15),n(16),n(49),function(){for(var e=r,t=e.lib.BlockCipher,n=e.algo,o=[],i=[],s=[],a=[],c=[],u=[],l=[],h=[],p=[],f=[],d=[],_=0;_<256;_++)d[_]=_<128?_<<1:_<<1^283;var g=0,m=0;for(_=0;_<256;_++){var y=m^m<<1^m<<2^m<<3^m<<4,v=(o[g]=y=y>>>8^255&y^99,d[i[y]=g]),b=d[v],S=d[b],E=257*d[y]^16843008*y;s[g]=E<<24|E>>>8,a[g]=E<<16|E>>>16,c[g]=E<<8|E>>>24,u[g]=E,l[y]=(E=16843009*S^65537*b^257*v^16843008*g)<<24|E>>>8,h[y]=E<<16|E>>>16,p[y]=E<<8|E>>>24,f[y]=E,g?(g=v^d[d[d[S^v]]],m^=d[d[m]]):g=m=1}var O=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*(1+(this._nRounds=6+n)),i=this._keySchedule=[],s=0;s<r;s++)s<n?i[s]=t[s]:(u=i[s-1],s%n?6<n&&s%n==4&&(u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u]):(u=o[(u=u<<8|u>>>24)>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u],u^=O[s/n|0]<<24),i[s]=i[s-n]^u);for(var a=this._invKeySchedule=[],c=0;c<r;c++){s=r-c;var u=c%4?i[s]:i[s-4];a[c]=c<4||s<=4?u:l[o[u>>>24]]^h[o[u>>>16&255]]^p[o[u>>>8&255]]^f[o[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,u,o)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,h,p,f,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,o,i,s,a){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],h=e[t+2]^n[2],p=e[t+3]^n[3],f=4,d=1;d<c;d++){var _=r[u>>>24]^o[l>>>16&255]^i[h>>>8&255]^s[255&p]^n[f++],g=r[l>>>24]^o[h>>>16&255]^i[p>>>8&255]^s[255&u]^n[f++],m=r[h>>>24]^o[p>>>16&255]^i[u>>>8&255]^s[255&l]^n[f++],y=r[p>>>24]^o[u>>>16&255]^i[l>>>8&255]^s[255&h]^n[f++];u=_,l=g,h=m,p=y}_=(a[u>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&p])^n[f++],g=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[p>>>8&255]<<8|a[255&u])^n[f++],m=(a[h>>>24]<<24|a[p>>>16&255]<<16|a[u>>>8&255]<<8|a[255&l])^n[f++],y=(a[p>>>24]<<24|a[u>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[f++],e[t]=_,e[t+1]=g,e[t+2]=m,e[t+3]=y},keySize:8});e.AES=t._createHelper(n)}(),r.AES)},function(e,t,n){var r;e.exports=(e=n(0),r=e.lib.WordArray,e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<n;a++)o.push(r.charAt(s>>>6*(3-a)&63));var c=r.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,n=this._map;if(!(o=this._reverseMap))for(var o=this._reverseMap=[],i=0;i<n.length;i++)o[n.charCodeAt(i)]=i;for(var s,a,c=n.charAt(64),u=(c&&-1!==(c=e.indexOf(c))&&(t=c),e),l=t,h=o,p=[],f=0,d=0;d<l;d++)d%4&&(s=h[u.charCodeAt(d-1)]<<d%4*2,a=h[u.charCodeAt(d)]>>>6-d%4*2,p[f>>>2]|=(a|=s)<<24-f%4*8,f++);return r.create(p,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64)},function(e,t,n){var r,o,i,s;e.exports=(e=n(0),r=(i=(n=e).lib).WordArray,o=i.Hasher,i=n.algo,s=[],i=i.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],c=n[4],u=0;u<80;u++){s[u]=u<16?0|e[t+u]:(l=s[u-3]^s[u-8]^s[u-14]^s[u-16])<<1|l>>>31;var l=(r<<5|r>>>27)+c+s[u];l+=u<20?1518500249+(o&i|~o&a):u<40?1859775393+(o^i^a):u<60?(o&i|o&a|i&a)-1894007588:(o^i^a)-899497514,c=a,a=i,i=o<<30|o>>>2,o=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(64+r>>>9<<4)]=Math.floor(n/4294967296),t[15+(64+r>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=o._createHelper(i),n.HmacSHA1=o._createHmacHelper(i),e.SHA1)},function(e,t,n){var r;e.exports=(e=n(0),n=e.lib.Base,r=e.enc.Utf8,void(e.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,o=4*n;(t=t.sigBytes>o?e.finalize(t):t).clamp(),e=this._oKey=t.clone(),t=this._iKey=t.clone();for(var i=e.words,s=t.words,a=0;a<n;a++)i[a]^=1549556828,s[a]^=909522486;e.sigBytes=t.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})))},function(e,t,n){var r,o,i,s,a,c,u,l,h,p,f;function d(e){return"string"==typeof e?f:p}function _(e,t,n){var r,o=this._iv;o?(r=o,this._iv=void 0):r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]}e.exports=(e=n(0),n(16),void(e.lib.Cipher||(e=(n=e).lib,r=e.Base,o=e.WordArray,i=e.BufferedBlockAlgorithm,(l=n.enc).Utf8,s=l.Base64,a=n.algo.EvpKDF,c=e.Cipher=i.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return d(n).encrypt(e,t,n,r)},decrypt:function(t,n,r){return d(n).decrypt(e,t,n,r)}}}}),e.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),u=n.mode={},l=e.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),l=u.CBC=((u=l.extend()).Encryptor=u.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;_.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),u.Decryptor=u.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=e.slice(t,t+r);n.decryptBlock(e,t),_.call(this,e,t,r),this._prevBlock=o}}),u),u=(n.pad={}).Pkcs7={pad:function(e,t){for(var n=(t*=4)-e.sigBytes%t,r=n<<24|n<<16|n<<8|n,i=[],s=0;s<n;s+=4)i.push(r);t=o.create(i,n),e.concat(t)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.BlockCipher=c.extend({cfg:c.cfg.extend({mode:l,padding:u}),reset:function(){c.reset.call(this);var e,t=(n=this.cfg).iv,n=n.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,t&&t.words):(this._mode=e.call(n,this,t&&t.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),h=e.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),u=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return(t=(e=e.salt)?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t,n=s.parse(e);return 1398893684==(e=n.words)[0]&&1701076831==e[1]&&(t=o.create(e.slice(2,4)),e.splice(0,4),n.sigBytes-=16),h.create({ciphertext:n,salt:t})}},p=e.SerializableCipher=r.extend({cfg:r.extend({format:u}),encrypt:function(e,t,n,r){r=this.cfg.extend(r),t=(o=e.createEncryptor(n,r)).finalize(t);var o=o.cfg;return h.create({ciphertext:t,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),n=(n.kdf={}).OpenSSL={execute:function(e,t,n,r){return r=r||o.random(8),e=a.create({keySize:t+n}).compute(e,r),n=o.create(e.words.slice(t),4*n),e.sigBytes=4*t,h.create({key:e,iv:n,salt:r})}},f=e.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:n}),encrypt:function(e,t,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(r=p.encrypt.call(this,e,t,n.key,r)).mixIn(n),r},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,p.decrypt.call(this,e,t,n.key,r)}}))))},function(e,t,n){e.exports=n(0).enc.Utf8},function(e,t,n){"use strict";function r(){this.logLevel=t.ENUM_LOG_LEVEL.DISABLE}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLog=t.ENUM_LOG_LEVEL=void 0,t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},r.prototype.setLogLevel=function(e){return void 0!==(e=t.ENUM_LOG_LEVEL[e])&&(this.logLevel=e,!0)},r.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.DEBUG&&console.debug(r)},r.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.INFO&&console.log(r)},r.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.INFO&&console.info(r)},r.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.WARN&&console.warn(r)},r.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.ERROR&&console.error(r)},t.ZegoLog=r},function(e,t,n){"use strict";function r(e){this.logger=e,this._log=e}Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0,r.prototype.isLogin=function(){return!0},t.StateCenter=r},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicCode=void 0,n(4));function s(){this.init()}s.prototype.init=function(){window.dyObj={}},s.prototype.runExecution=function(e,t,n){n=new(Function.bind.apply(Function,o([void 0],e,[n])));try{n.apply(void 0,o(t))}catch(e){i.log.error(e)}},t.DynamicCode=n=s}],r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=17))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),o=n(5),i=n(2),s=n(1),a=n(3),c=(u.prototype.getSeq=function(){return++this.seq},u.prototype.registerListener=function(){var e=this;window.addEventListener("message",(function(t){var n,c,u;if((t=t.data).data)try{if(n=JSON.parse(t.data),"onSendMessageToGameCallback"===t.type){var l=n,h=o.a.getCurrentGame();if(a.a.createSpan(s.g.FromGameInfo,{game_id:h.gameInfo.miniGameId,command:l.command,data:l.data}).end(!0),!e.callbackMap[l.seq])throw new Error(JSON.stringify(Object(i.g)(r.d.SystemModuleSeqNotFounded)));e.callbackMap[l.seq].callback(l),delete e.callbackMap[l.seq]}else"onMessageFromGame"===t.type&&(c=n,u=o.a.getCurrentGame(),a.a.createSpan(s.g.FromGameInfo,{game_id:u.gameInfo.miniGameId,command:c.command,data:c.data}).end(!0),e.eventBus.exec(c.command,c.data,{seq:c.seq,command:c.command}))}catch(t){console.warn(t)}}),!1)},u.prototype.request=function(e){var t,n=e.seq||Object(i.e)(this.getSeq()),c=(n=(e.callback&&"function"==typeof e.callback&&(this.callbackMap[n]={command:e.command,callback:e.callback}),{command:e.command,seq:n,code:r.d.Success,data:e.data}),document.querySelector(o.a.getCurrentGame().domId));null!=c&&c.contentWindow&&(t=o.a.getCurrentGame(),a.a.createSpan(s.g.ToGameInfo,{game_id:t.gameInfo.miniGameId,command:e.command,data:e.data}).end(!0),c.contentWindow.postMessage({type:e.gameCallback?"sendMessageFromGameCallback":"sendMessageToGame",data:JSON.stringify(n)},"*"))},u);function u(e){this.seq=0,this.callbackMap={},this.eventBus=e,this.registerListener()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),o.base64encode=function(e){for(var t,n,r,i=e.length,s=0,a="";s<i;){if(t=255&e.charCodeAt(s++),s==i){a=(a+=o.base64EncodeChars.charAt(t>>2))+o.base64EncodeChars.charAt((3&t)<<4)+"==";break}if(n=e.charCodeAt(s++),s==i){a=(a=(a+=o.base64EncodeChars.charAt(t>>2))+o.base64EncodeChars.charAt((3&t)<<4|(240&n)>>4))+o.base64EncodeChars.charAt((15&n)<<2)+"=";break}r=e.charCodeAt(s++),a=(a=(a=(a+=o.base64EncodeChars.charAt(t>>2))+o.base64EncodeChars.charAt((3&t)<<4|(240&n)>>4))+o.base64EncodeChars.charAt((15&n)<<2|(192&r)>>6))+o.base64EncodeChars.charAt(63&r)}return a},o.base64decode=function(e){for(var t,n,r,i,s=e.length,a=0,c="";a<s;){for(;t=o.base64DecodeChars[255&e.charCodeAt(a++)],a<s&&-1==t;);if(-1==t)break;for(;n=o.base64DecodeChars[255&e.charCodeAt(a++)],a<s&&-1==n;);if(-1==n)break;c+=String.fromCharCode(t<<2|(48&n)>>4);do{if(61==(r=255&e.charCodeAt(a++)))return c}while(r=o.base64DecodeChars[r],a<s&&-1==r);if(-1==r)break;c+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(61==(i=255&e.charCodeAt(a++)))return c}while(i=o.base64DecodeChars[i],a<s&&-1==i);if(-1==i)break;c+=String.fromCharCode((3&r)<<6|i)}return c},o.utf16to8=function(e){for(var t,n="",r=e.length,o=0;o<r;o++)1<=(t=e.charCodeAt(o))&&t<=127?n+=e.charAt(o):n=2047<t?(n=(n+=String.fromCharCode(224|t>>12&15))+String.fromCharCode(128|t>>6&63))+String.fromCharCode(128|t>>0&63):(n+=String.fromCharCode(192|t>>6&31))+String.fromCharCode(128|t>>0&63);return n},o.utf8to16=function(e){for(var t,n,r,o="",i=e.length,s=0;s<i;)switch((t=e.charCodeAt(s++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=e.charAt(s-1);break;case 12:case 13:n=e.charCodeAt(s++),o+=String.fromCharCode((31&t)<<6|63&n);break;case 14:n=e.charCodeAt(s++),r=e.charCodeAt(s++),o+=String.fromCharCode((15&t)<<12|(63&n)<<6|(63&r)<<0)}return o},o.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o.base64DecodeChars=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];var r=o;function o(){}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n,r,o,i){this.version="",this.domId=e,this.gameMode=t,this.config=n||{},this.gameInfo=r,this.webViewWidth=o,this.webViewHeight=i,this.startTime=Date.now(),this.loadingTime=0,this.loadedTime=0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),o=n(6),i=n(4),s=n(2),a=n(1),c=n(3),u=(l.getInstance=function(){return 0===Object.keys(this.instance).length&&i.a.appId&&i.a.gameUserInfo.userId&&(this.instance=new l),this.instance},l.destroyInstance=function(){this.instance={}},l.prototype.connectionInit=function(){this.connectionAgent.init(),this.bindDispatchResultUpdate(),this.bindDisconnected(),this.bindConnected(),this.bindBroken(),this.connectionAgent.setAppInfo({appID:i.a.appId,env:a.h.BROWSER,mode:this.mode}),this.connectionAgent.setUserInfo(i.a.gameUserInfo.userId),this.connectionAgent.setNetAgentDefaultServers(this.accesshubDefaultServers);var e=this.getDispatchServers();this.connectionAgent.setDispatchConnectServers(e)},l.prototype.bindDispatchResultUpdate=function(){this.connectionAgent.on(a.b.DISPATCH_RESULT_UPDATE,(function(e){e&&e.servers&&localStorage.setItem(a.a,JSON.stringify(e.servers))}))},l.prototype.bindDisconnected=function(){this.connectionAgent.on(a.b.DISCONNECTED,(function(e){console.warn(a.b.DISCONNECTED,e)}))},l.prototype.bindConnected=function(){this.connectionAgent.on(a.b.CONNECTED,(function(e){console.warn(a.b.CONNECTED,e)}))},l.prototype.bindBroken=function(){this.connectionAgent.on(a.b.BROKEN,(function(e){console.warn(a.b.BROKEN,e)}))},l.prototype.getDispatchServers=function(){var e=localStorage.getItem(a.a),t=[];return e?JSON.parse(e):t},l.prototype.destroyAccesshub=function(){this.connectionAgent.destroyConnect()},l.prototype.unInit=function(){this.connectionAgent.unInit()},l.prototype.isConnected=function(){return this.connectionAgent.isConnect()},l.prototype.request=function(e,t,n){var u=this,l=Object.assign({},t,{mg_token:i.a.token,app_id:i.a.appId,user_id:i.a.gameUserInfo.userId,sdk_version:o.a.getVersion(),device_id:c.a.getDeviceId(),os_type:c.a.systemInfo.system});return console.warn("toline",Object(s.f)(l,n)),new Promise((function(t,o){return function(e,t,n,r){return new(n=n||Promise)((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}(u,void 0,void 0,(function(){var c,u,h,p,f,d=this;return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var u=[a,c];if(n)throw new TypeError("Generator is already executing.");for(;i=s&&u[s=0]?0:i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,(u=o?[2&u[0],o.value]:u)[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3]))i.label=u[1];else if(6===u[0]&&i.label<o[1])i.label=o[1],o=u;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(u)}}u=t.call(e,i)}catch(c){u=[6,c],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,(function(_){return f=a.d,c=this.getHeaders(),u=Object(s.f)(l,n),h=i.a.gameUserInfo.userId,p=r.Method.METHOD_POST,f={service:f,headers:c,body:u,ack:!1,idName:h,method_no:p,location:e},this.connectionAgent.startHttpRequest(f,(function(e){console.warn("request rsp",e),t(d.afterRequest(e))}),(function(e){console.warn("request err",e),o(e)}),(function(e){}),{timeout:a.e}),[2]}))}))}))},l.prototype.afterRequest=function(e){try{console.error(e);var t=JSON.parse(e.body);return Promise.resolve(Object(s.d)(t))}catch(e){return Promise.reject(e)}},l.prototype.getHeaders=function(){return[{name:"accept-language",val:i.a.language.toString()}]},l.prototype.getDomain=function(){var e=this;return new Promise((function(t){e.connectionAgent.getAppConfigByAgent("init",i.a.token).then((function(e){var n=e.code;e=e.data;0===n&&t(e.app_config.domain)}))}))},l.instance={},l);function l(){this.connectionAgent=new r.ZegoConnectionAgent,this.accesshubDefaultServers=[a.c],this.mode=r.Mode.MODE_ONLINE,this.connectionInit()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),o=n(0),i=(s.prototype.getSeq=function(){return++this.seq},s.prototype.registerListener=function(){var e=this;window.addEventListener("message",(function(t){var n;if("string"==typeof(t=t.data))try{var i=JSON.parse(t);if(console.log("===message parseData",i),"onSendMessageToCloudGameCallback"===i.type){var s=i;if(console.log("===onSendMessageToCloudGameCallback",s),!e.callbackMap[s.seq])throw new Error(JSON.stringify(Object(r.g)(o.d.SystemModuleSeqNotFounded)));e.callbackMap[s.seq].callback(s),delete e.callbackMap[s.seq]}else"onMessageFromCloudGame"===i.type&&(n=i,console.log("===onMessageFromCloudGame",n),e.eventBus.exec(n.command,n.data,{seq:n.seq,command:n.command}))}catch(t){console.error("iframeMessage JSON.parse error",t)}}),!1)},s.prototype.setCloudGameDomId=function(e){this.domId=e},s.prototype.request=function(e){e.seq||(e.seq=Object(r.e)(this.getSeq())),e.callback&&"function"==typeof e.callback&&(this.callbackMap[e.seq]={command:e.command,callback:e.callback});var t=document.querySelector(this.domId);null!=t&&t.contentWindow&&t.contentWindow.sendMessageToCloudGame&&t.contentWindow.sendMessageToCloudGame(JSON.stringify(e))},s);function s(e){this.seq=0,this.domId="",this.callbackMap={},this.registerListener(),this.eventBus=e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},i=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},s=(a.prototype.on=function(e,t){this.listenerMap.set(e,t)},a.prototype.off=function(e){this.listenerMap.delete(e)},a.prototype.emit=function(e,t){if("function"==typeof(e=this.listenerMap.get(e)))try{e(t)}catch(e){throw e}},a.prototype.add=function(e,t){this.innerEvents[e].push(t)},a.prototype.remove=function(e,t){var n;t?-1!==(n=this.innerEvents[e].findIndex((function(e){return e===t})))&&this.innerEvents[e].splice(n,1):this.innerEvents[e].length=0},a.prototype.exec=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.innerEvents[e].forEach((function(e){return e.apply(void 0,i([],o(t),!1))}))},a);function a(){var e;this.listenerMap=new Map,this.innerEvents=((e={})[r.f.Init]=[],e[r.f.GameLoaded]=[],e[r.f.GameLoading]=[],e[r.f.GameOverDetail]=[],e[r.f.ActionEvents]=[],e[r.f.UserMicChange]=[],e[r.f.UserSpeakerChange]=[],e[r.k.Destroy]=[],e[r.k.GameOrientation]=[],e[r.k.Language]=[],e[r.k.PlayGameSound]=[],e[r.k.ChangeGameSoundVolume]=[],e[r.k.GameRecharge]=[],e[r.k.GameIntroduction]=[],e[r.k.GetConfig]=[],e[r.k.PlayerPlaying]=[],e[r.k.GameState]=[],e[r.k.GameUploadError]=[],e[r.k.GetRobotSetting]=[],e[r.c.GetGameSetting]=[],e[r.c.GetCustomComponents]=[],e[r.c.RunCustomComponent]=[],e[r.c.GetCustomFunctions]=[],e[r.c.RunCustomFunction]=[],e[r.a.CloudGameFirstFrame]=[],e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"ZegoMiniGameEngine",(function(){return h}));var r=n(9),o=n(0),i=n(4),s=n(1),a=n(3),c=n(5),u=n(2),l=n(6),h=(p.getInstance=function(){return this.instance},p.getVersion=function(){return l.a.getVersion()},p.prototype.isConnected=function(){return p.isInit},p.prototype.updateToken=function(e){var t=a.a.createSpan(s.g.UpdateToken,{token_hash:r.a.hashStr(e).toString()});i.a.token=e,this.manager.setTokenAlarm(i.a.token),t.end(!0)},p.init=function(e,t,n){var c=this;if(this.isInit)return Promise.reject(Object(u.g)(o.d.ErrorAlreadyInit));if(!n||!n.userId)return Promise.reject(Object(u.g)(o.d.ErrorInvalidUserInfo));if(!t)return Promise.reject(Object(u.g)(o.d.ErrorInvalidToken));if(!e)return Promise.reject(Object(u.g)(o.d.ErrorInvalidParams));i.a.token=t,i.a.gameUserInfo=n,i.a.appId=e,this.instance=new p;var l=a.a.createSpan(s.g.Init,{token_hash:r.a.hashStr(t).toString()});return p.getInstance().manager.login().then((function(e){return console.warn("login success",e),l.setAttributes({error:e.code}),e.code===o.d.Success?(c.isInit=!0,c.instance):Promise.reject(Object(u.g)(e.code,e.message))})).catch((function(e){return console.warn("login err",e),l.setAttributes({error:e.errorCode||o.d.ErrorUndefinedCode}),Promise.reject(Object(u.g)(e.errorCode||o.d.ErrorUndefinedCode,e.errorCode?e.message:""))})).finally((function(){l.end(!0)}))},p.prototype.unInit=function(){if(!this.isConnected())throw new Error(JSON.stringify(Object(u.g)(o.d.ErrorNotInit)));c.a.currentGameId&&this.unloadGame(!0);var e=a.a.createSpan(s.g.UnInit,{});p.instance=null,this.manager=null,p.isInit=!1,e.setAttributes({error:o.d.Success}),e.end(!0)},p.prototype.getAllGameList=function(){return this.getGameList(0)},p.prototype.getGameList=function(e){var t;return p.getInstance().isConnected()?(t=a.a.createSpan(s.g.GetGameList,{page_size:1e4,page_index:0,game_mode:e}),this.manager.getGameList(0,1e4,e).then((function(e){return t.setAttributes({error:e.code}),e.code===o.d.Success?(t.setAttributes({result_num:e.data.total}),e.data):Promise.reject(Object(u.g)(e.code,e.message))})).finally((function(){t.end(!0)}))):Promise.reject(Object(u.g)(o.d.ErrorNotInit))},p.prototype.getGameInfo=function(e){var t;return p.getInstance().isConnected()?(t=a.a.createSpan(s.g.GetGameInfo,{game_id:e}),e?this.manager.getGameInfo(e).then((function(e){return t.setAttributes({error:e.code}),e.code===o.d.Success?e.data:Promise.reject(Object(u.g)(e.code,e.message))})).finally((function(){t.end(!0)})):(t.setAttributes({error:o.d.ErrorInvalidGameId}),t.end(!0),Promise.reject(Object(u.g)(o.d.ErrorInvalidGameId)))):Promise.reject(Object(u.g)(o.d.ErrorNotInit))},p.prototype.createGameRoom=function(e,t,n,r,i,c){var l;return p.getInstance().isConnected()?(l=a.a.createSpan(s.g.CreateGameRoom,{game_id:e,room_id:t,max_player_num:n,game_coin:r,tax_type:i,tax_rate:c}),e?t?n<=0||r<=0?(l.setAttributes({error:o.d.ErrorInvalidParams}),l.end(!0),Promise.reject(Object(u.g)(o.d.ErrorInvalidParams))):this.manager.createGameRoom(e,t,n,r,i,c).then((function(e){return l.setAttributes({error:e.code}),e.code===o.d.Success||Promise.reject(Object(u.g)(e.code,e.message))})).finally((function(){l.end(!0)})):(l.setAttributes({error:o.d.ErrorInvalidRoomId}),l.end(!0),Promise.reject(Object(u.g)(o.d.ErrorInvalidRoomId))):(l.setAttributes({error:o.d.ErrorInvalidGameId}),l.end(!0),Promise.reject(Object(u.g)(o.d.ErrorInvalidGameId)))):Promise.reject(Object(u.g)(o.d.ErrorNotInit))},p.prototype.closeGameRoom=function(e,t){var n;return p.getInstance().isConnected()?(n=a.a.createSpan(s.g.CloseGameRoom,{game_id:e,room_id:t}),e?t?this.manager.closeGameRoom(e,t).then((function(e){return n.setAttributes({error:e.code}),e.code===o.d.Success||Promise.reject(Object(u.g)(e.code,e.message))})).finally((function(){n.end(!0)})):(n.setAttributes({error:o.d.ErrorInvalidRoomId}),n.end(!0),Promise.reject(Object(u.g)(o.d.ErrorInvalidRoomId))):(n.setAttributes({error:o.d.ErrorInvalidRoomId}),n.end(!0),Promise.reject(Object(u.g)(o.d.ErrorInvalidGameId)))):Promise.reject(Object(u.g)(o.d.ErrorNotInit))},p.prototype.setGameContainer=function(e){var t=Object(u.c)(e);return t&&(this.manager.domId=e),t},p.prototype.loadGame=function(e,t,n){var r;return void 0===n&&(n={}),p.getInstance().isConnected()?(r=a.a.createSpan(s.g.LoadGame,{game_id:e,dom_id:this.manager.domId,room_id:n.roomId,game_mode:t,is_custom_play_sound:n.customPlaySound||!1,language:i.a.language,option:n}),Object(u.c)(this.manager.domId)?t!==o.h.GameModeHostsGame||n.roomId?n.minGameCoin&&n.minGameCoin<0?(r.setAttributes({error:o.d.ErrorInvalidParams}),r.end(!0),Promise.reject(Object(u.g)(o.d.ErrorInvalidParams))):this.manager.loadGame(e,t,n,r).finally((function(){r.end(!0)})):(r.setAttributes({error:o.d.ErrorInvalidRoomId}),r.end(!0),Promise.reject(Object(u.g)(o.d.ErrorInvalidRoomId))):(r.setAttributes({error:o.d.ErrorIframeIsNotFound}),r.end(!0),Promise.reject(Object(u.g)(o.d.ErrorIframeIsNotFound)))):Promise.reject(Object(u.g)(o.d.ErrorNotInit))},p.prototype.unloadGame=function(e){void 0===e&&(e=!1);var t=a.a.createSpan(s.g.UnloadGame,{});this.manager.unloadGame(e,t).then((function(e){if(t.setAttributes({error:e.code}),e.code!==o.d.Success)return Promise.reject(Object(u.g)(e.code,e.message))})).finally((function(){t.end(!0)}))},p.prototype.startGame=function(e,t,n){var r=a.a.createSpan(s.g.startGame,{game_config:e,user_list:t,robot_list:n});return this.manager.startGame(t,n,e,r).then((function(e){return r.setAttributes({error:e.code}),e.code===o.d.Success||Promise.reject(Object(u.g)(e.code,e.message))})).finally((function(){r.end(!0)}))},p.prototype.enableGameVibrate=function(e){this.manager.setGameSetting({settingType:o.m.VibrateState,settingValue:e?o.l.Open:o.l.Close})},p.prototype.muteGameSoundEffect=function(e){this.manager.setGameSetting({settingType:o.m.SoundEffectsState,settingValue:e?o.l.Close:o.l.Open})},p.prototype.muteGameMusic=function(e){this.manager.setGameSetting({settingType:o.m.BGMState,settingValue:e?o.l.Close:o.l.Open})},p.prototype.setGameSoundEffectVolume=function(e){if(e<0||100<e)throw new Error(JSON.stringify(Object(u.g)(o.d.ErrorInvalidParams)));this.manager.setGameSetting({settingType:o.m.SoundEffectsRange,settingValue:e+""})},p.prototype.setGameMusicVolume=function(e){if(e<0||100<e)throw new Error(JSON.stringify(Object(u.g)(o.d.ErrorInvalidParams)));this.manager.setGameSetting({settingType:o.m.BGMRange,settingValue:e+""})},p.prototype.getGameMusicSwitch=function(){return this.manager.getGameSetting(o.m.BGMState).then((function(e){return!!e}))},p.prototype.getGameMusicVolume=function(){return this.manager.getGameSetting(o.m.BGMRange).then((function(e){return+e}))},p.prototype.getGameSoundEffectSwitch=function(){return this.manager.getGameSetting(o.m.SoundEffectsState).then((function(e){return!!e}))},p.prototype.getGameSoundEffectVolume=function(){return this.manager.getGameSetting(o.m.SoundEffectsRange).then((function(e){return+e}))},p.prototype.getGameVibrateSwitch=function(){return this.manager.getGameSetting(o.m.VibrateState).then((function(e){return!!e}))},p.prototype.setGameLanguage=function(e){i.a.language=e||o.n.zh_CN},p.prototype.refreshGameCoin=function(){var e=a.a.createSpan(s.g.RefreshCoin,{});this.manager.refreshGameCoin(e),e.end(!0)},p.prototype.getGameComponentList=function(){var e=a.a.createSpan(s.g.GetGameComponentList,{});return this.manager.getGameComponentList(e).finally((function(){e.end(!0)}))},p.prototype.getGameFunctionList=function(){var e=a.a.createSpan(s.g.GetGameFunctionList,{});return this.manager.getGameFunctionList(e).finally((function(){e.end(!0)}))},p.prototype.setGameComponent=function(e,t){var n=a.a.createSpan(s.g.SetGameComponent,{component:e,visible:t});return this.manager.setGameComponent(e,t,n).finally((function(){n.end(!0)}))},p.prototype.runGameFunction=function(e){var t=a.a.createSpan(s.g.RunGameFunction,{function:e});return this.manager.runGameFunction(e,t).finally((function(){t.end(!0)}))},p.prototype.refreshToken=function(){return p.getInstance().manager.refrashToken().then((function(e){return e})).catch((function(e){console.warn("refreshToken",e)}))},p.prototype.startCloudGame=function(e,t,n){return p.getInstance().manager.startCloudGame(e,t,n)},p.prototype.stopCloudGame=function(e,t){return p.getInstance().manager.stopCloudGame(e,t)},p.prototype.setCloudGameContainer=function(e){var t=Object(u.c)(e);return t&&this.manager.setCloudGameContainer(e),t},p.prototype.startPublishCloudGameStream=function(e,t,n){return p.getInstance().manager.startPublishCloudGameStream(e,t,n)},p.prototype.stopPublishCloudGameStream=function(e,t,n){return p.getInstance().manager.stopPublishCloudGameStream(e,t,n)},p.prototype.setStreamProfile=function(e){return p.getInstance().manager.setStreamProfile(e)},p.prototype.setPlayVolume=function(e){return p.getInstance().manager.setPlayVolume(e)},p.prototype.getPlayVolume=function(){return p.getInstance().manager.getPlayVolume()},p.prototype.sendKeyboardEvent=function(e){return p.getInstance().manager.sendKeyboardEvent(e)},p.prototype.on=function(e,t){var n=a.a.createSpan(s.g.On,{type:e});p.getInstance().manager&&p.getInstance().manager.on(e,t),n.end(!0)},p.prototype.off=function(e){var t=a.a.createSpan(s.g.Off,{type:e});p.getInstance().manager&&p.getInstance().manager.off(e),t.end(!0)},p.isInit=!1,p);function p(){this.manager=new l.a}t.default=h}])}));